;-------------
;   Defense
;-------------

    ;----------------------
    ;   Swordsmen Strats
    ;----------------------

        (defrule
        (goal g-game-focus DEFENSIVE)
        (up-compare-goal g-desired-num-military > 0)
        (current-age >= castle-age)
        (goal g-primary-unit militiaman)
        (military-population g:< g-min-military-pop)
        (or
            (up-compare-goal g-enemy-foot-archers-count > 5)
            (or
                (up-compare-goal g-enemy-cavalry-archers-count > 5)
                (up-compare-goal g-enemy-hand-cannoneers-count > 3)))
        =>
        (up-modify-goal g-desired-num-skirmisher c:max 6)
        )

        (defrule
        (goal g-game-focus DEFENSIVE)
        (up-compare-goal g-desired-num-military > 0)
        (current-age >= castle-age)
        (goal g-primary-unit militiaman)
        (military-population g:< g-min-military-pop)
        (or
            (up-compare-goal g-enemy-heavy-cavalry-count > 4)
            (or
                (up-compare-goal g-enemy-camels-count > 6)
                (up-compare-goal g-enemy-elephants-count > 2)))
        (up-compare-goal g-enemy-foot-archers-count < 10)
        (up-compare-goal g-enemy-hand-cannoneers-count < 5)
        (up-compare-goal g-enemy-swordsmen-count < 10)
        =>
        (up-modify-goal g-desired-num-spearman c:max 6)
        )

        (defrule
        (goal g-game-focus DEFENSIVE)
        (up-compare-goal g-desired-num-military > 0)
        (current-age >= castle-age)
        (goal g-primary-unit militiaman)
        (military-population g:< g-min-military-pop)
        (or
            (up-compare-goal g-enemy-elephants-count > 2)
            (or
                (up-compare-goal g-enemy-heavy-cavalry-count > 3)
                (up-compare-goal g-enemy-camels-count > 3)))
        (up-compare-goal g-enemy-light-cavalry-count < 6)
        (up-compare-goal g-enemy-eagle-warriors-count < 10)
        (up-compare-goal g-enemy-foot-archers-count < 10)
        =>
        (up-modify-goal g-desired-num-monk c:max 2)
        )

    ;-------------------
    ;   Eagles Strats
    ;-------------------

        (defrule
        (goal g-game-focus DEFENSIVE)
        (up-compare-goal g-desired-num-military > 0)
        (current-age >= castle-age)
        (goal g-primary-unit eagle-warrior)
        (military-population g:< g-min-military-pop)
        (up-compare-goal g-enemy-swordsmen-count > 5)
        (up-compare-goal g-enemy-skirmishers-count < 10)
        =>
        (up-modify-goal g-desired-num-archer c:max 6)
        )

        (defrule
        (goal g-game-focus DEFENSIVE)
        (up-compare-goal g-desired-num-military > 0)
        (current-age >= castle-age)
        (goal g-primary-unit eagle-warrior)
        (military-population g:< g-min-military-pop)
        (or
            (up-compare-goal g-enemy-heavy-cavalry-count > 4)
            (or
                (up-compare-goal g-enemy-camels-count > 6)
                (up-compare-goal g-enemy-elephants-count > 2)))
        (up-compare-goal g-enemy-foot-archers-count < 10)
        (up-compare-goal g-enemy-hand-cannoneers-count < 5)
        (up-compare-goal g-enemy-swordsmen-count < 10)
        =>
        (up-modify-goal g-desired-num-spearman c:max 6)
        )

        (defrule
        (goal g-game-focus DEFENSIVE)
        (up-compare-goal g-desired-num-military > 0)
        (current-age >= castle-age)
        (goal g-primary-unit eagle-warrior)
        (military-population g:< g-min-military-pop)
        (up-compare-goal g-enemy-hand-cannoneers-count > 5)
        =>
        (up-modify-goal g-desired-num-skirmisher c:max 6)
        )

        (defrule
        (goal g-game-focus DEFENSIVE)
        (up-compare-goal g-desired-num-military > 0)
        (current-age >= castle-age)
        (goal g-primary-unit eagle-warrior)
        (military-population g:< g-min-military-pop)
        (up-compare-goal g-enemy-eagle-warriors-count > 6)
        (up-compare-goal g-enemy-foot-archers-count < 10)
        (up-compare-goal g-enemy-heavy-cavalry-count < 10)
        =>
        (up-modify-goal g-desired-num-militia c:max 6)
        )

        (defrule
        (goal g-game-focus DEFENSIVE)
        (up-compare-goal g-desired-num-military > 0)
        (current-age >= castle-age)
        (goal g-primary-unit eagle-warrior)
        (military-population g:< g-min-military-pop)
        (or
            (up-compare-goal g-enemy-elephants-count > 2)
            (or
                (up-compare-goal g-enemy-heavy-cavalry-count > 3)
                (up-compare-goal g-enemy-camels-count > 3)))
        (up-compare-goal g-enemy-light-cavalry-count < 6)
        (up-compare-goal g-enemy-eagle-warriors-count < 10)
        (up-compare-goal g-enemy-foot-archers-count < 10)
        =>
        (up-modify-goal g-desired-num-monk c:max 2)
        )

    ;-------------------
    ;   Archer Strats
    ;-------------------

        (defrule
        (goal g-game-focus DEFENSIVE)
        (up-compare-goal g-desired-num-military > 0)
        (current-age >= castle-age)
        (goal g-primary-unit archer)
        (military-population g:< g-min-military-pop)
        (or
            (up-compare-goal g-enemy-eagle-warriors-count > 6)
            (up-compare-goal g-enemy-huskarls-count > 5))
        (up-compare-goal g-enemy-foot-archers-count < 10)
        (up-compare-goal g-enemy-heavy-cavalry-count < 10)
        =>
        (up-modify-goal g-desired-num-militia c:max 6)
        )

        (defrule
        (goal g-game-focus DEFENSIVE)
        (up-compare-goal g-desired-num-military > 0)
        (current-age >= castle-age)
        (goal g-primary-unit archer)
        (military-population g:< g-min-military-pop)
        (up-compare-const EAGLE-WARRIOR-AVAILABLE == YES)
        (up-compare-goal g-enemy-field-siege-count > 2)
        =>
        (up-modify-goal g-desired-num-eagle-warrior c:max 6)
        )
        (defrule
        (goal g-game-focus DEFENSIVE)
        (up-compare-goal g-desired-num-military > 0)
        (current-age >= castle-age)
        (goal g-primary-unit archer)
        (military-population g:< g-min-military-pop)
        (up-compare-const EAGLE-WARRIOR-AVAILABLE == YES)
        (up-compare-goal g-enemy-skirmishers-count > 5)
        (up-compare-goal g-enemy-swordsmen-count < 10)
        (up-compare-goal g-enemy-jaguar-warriors-count < 5)
        (up-compare-goal g-enemy-cataphracts-count < 5)
        (up-compare-goal g-enemy-teutonic-knights-count < 5)
        =>
        (up-modify-goal g-desired-num-eagle-warrior c:max 6)
        )

        (defrule
        (goal g-game-focus DEFENSIVE)
        (up-compare-goal g-desired-num-military > 0)
        (current-age >= castle-age)
        (goal g-primary-unit archer)
        (military-population g:< g-min-military-pop)
        (or
            (up-compare-goal g-enemy-heavy-cavalry-count > 4)
            (or
                (up-compare-goal g-enemy-light-cavalry-count > 6)
                (up-compare-goal g-enemy-elephants-count > 2)))
        (up-compare-goal g-enemy-foot-archers-count < 10)
        (up-compare-goal g-enemy-hand-cannoneers-count < 5)
        (up-compare-goal g-enemy-swordsmen-count < 10)
        =>
        (up-modify-goal g-desired-num-spearman c:max 6)
        )

        (defrule
        (goal g-game-focus DEFENSIVE)
        (up-compare-goal g-desired-num-military > 0)
        (current-age >= castle-age)
        (goal g-primary-unit archer)
        (military-population g:< g-min-military-pop)
        (up-compare-goal g-enemy-hand-cannoneers-count > 5)
        =>
        (up-modify-goal g-desired-num-skirmisher c:max 6)
        )

        (defrule
        (goal g-game-focus DEFENSIVE)
        (up-compare-goal g-desired-num-military > 0)
        (current-age >= castle-age)
        (goal g-primary-unit archer)
        (military-population g:< g-min-military-pop)
        (or
            (up-compare-goal g-enemy-elephants-count > 2)
            (or
                (up-compare-goal g-enemy-heavy-cavalry-count > 3)
                (up-compare-goal g-enemy-camels-count > 3)))
        (up-compare-goal g-enemy-light-cavalry-count < 6)
        (up-compare-goal g-enemy-eagle-warriors-count < 10)
        (up-compare-goal g-enemy-foot-archers-count < 10)
        =>
        (up-modify-goal g-desired-num-monk c:max 2)
        )

    ;------------------------
    ;   Unique Unit Strats
    ;------------------------

        (defrule
        (goal g-game-focus DEFENSIVE)
        (up-compare-goal g-desired-num-military > 0)
        (current-age >= castle-age)
        (goal g-primary-unit my-unique-unit)
        (military-population g:< g-min-military-pop)
        (or
            (up-compare-goal g-enemy-foot-archers-count > 5)
            (or
                (up-compare-goal g-enemy-cavalry-archers-count > 5)
                (up-compare-goal g-enemy-hand-cannoneers-count > 3)))
        =>
        (up-modify-goal g-desired-num-skirmisher c:max 6)
        )

        (defrule
        (goal g-game-focus DEFENSIVE)
        (up-compare-goal g-desired-num-military > 0)
        (current-age >= castle-age)
        (goal g-primary-unit my-unique-unit)
        (military-population g:< g-min-military-pop)
        (or
            (up-compare-goal g-enemy-heavy-cavalry-count > 4)
            (or
                (up-compare-goal g-enemy-camels-count > 6)
                (up-compare-goal g-enemy-elephants-count > 2)))
        (up-compare-goal g-enemy-foot-archers-count < 10)
        (up-compare-goal g-enemy-hand-cannoneers-count < 5)
        (up-compare-goal g-enemy-swordsmen-count < 10)
        =>
        (up-modify-goal g-desired-num-spearman c:max 6)
        )

        (defrule
        (goal g-game-focus DEFENSIVE)
        (up-compare-goal g-desired-num-military > 0)
        (current-age >= castle-age)
        (goal g-primary-unit my-unique-unit)
        (military-population g:< g-min-military-pop)
        (or
            (up-compare-goal g-enemy-elephants-count > 2)
            (or
                (up-compare-goal g-enemy-heavy-cavalry-count > 3)
                (up-compare-goal g-enemy-camels-count > 3)))
        (up-compare-goal g-enemy-light-cavalry-count < 6)
        (up-compare-goal g-enemy-eagle-warriors-count < 10)
        (up-compare-goal g-enemy-foot-archers-count < 10)
        =>
        (up-modify-goal g-desired-num-monk c:max 2)
        )

;---------------------------------
;   Calculate Countering Scores
;---------------------------------

    ;-----------
    ;   Setup
    ;-----------

        (load "The General 1.2/Functions/Reset")

        (defrule
        (taunt-detected TAUNT-PLAYER 240)
        (up-compare-goal g-army-comp-end-rule-id > 0)
        (or
            (up-compare-goal g-desired-num-military <= 0)
            (or
                (up-compare-goal g-age-status < MID-CASTLE)
                (or
                    (up-compare-goal g-primary-unit <= 0)
                    (and
                        (up-compare-goal g-age-status < TO-IMPERIAL)
                        (goal g-position POCKET)))))
        =>
        (chat-to-player my-player-number "Not ready for support units yet")
        (acknowledge-taunt THIS-ANY-TAUNT-PLAYER 240)
        )
        (defrule
        (up-compare-goal g-army-comp-end-rule-id > 0)
        (or
            (up-compare-goal g-desired-num-military <= 0)
            (or
                (up-compare-goal g-age-status < MID-CASTLE)
                (or
                    (up-compare-goal g-primary-unit <= 0)
                    (and
                        (up-compare-goal g-age-status < TO-IMPERIAL)
                        (goal g-position POCKET)))))
        =>
        (up-jump-direct g: g-army-comp-end-rule-id)
        )

        (defrule
        (taunt-detected TAUNT-PLAYER 240)
        (up-compare-goal g-army-comp-end-rule-id > 0)
        (up-modify-goal g-temp c:= 42)
        (up-modify-goal g-temp2 g:= g-desired-num-town-center)
        (up-modify-goal g-temp2 c:* 6)
        (up-modify-goal g-temp g:+ g-temp2)
        (up-object-type-count-total c: villager g:< g-temp)    ;We don't have enough villagers to sustain support units
        (players-population every-enemy < 100)
        =>
        (chat-to-player my-player-number "Not enough eco for support units yet")
        (acknowledge-taunt THIS-ANY-TAUNT-PLAYER 240)
        )
        (defrule
        (up-compare-goal g-army-comp-end-rule-id > 0)
        (up-modify-goal g-temp c:= 42)
        (up-modify-goal g-temp2 g:= g-desired-num-town-center)
        (up-modify-goal g-temp2 c:* 6)
        (up-modify-goal g-temp g:+ g-temp2)
        (up-object-type-count-total c: villager g:< g-temp)    ;We don't have enough villagers to sustain support units
        (players-population every-enemy < 100)
        =>
        (up-jump-direct g: g-army-comp-end-rule-id)
        )

        (defrule
        (up-compare-goal g-army-comp-end-rule-id <= 0)
        =>
        (set-goal g-current-unit-type 25)
        )

        (defrule
        (up-compare-goal g-desired-num-military > 0)
        (up-compare-goal g-age-status >= MID-CASTLE)
        (up-compare-goal g-primary-unit > 0)
        =>
        (set-goal g-current-unit-type SUPPORT-MILITIA)
        (set-goal g-current-unit-score 0)
        (set-goal g-current-unit-attack-type NONE)
        (set-goal g-current-unit-armor-type NONE)
        (set-goal g-best-unit-type PENDING)
        (set-goal g-best-unit-score -99999)
        (up-get-fact game-time 0 g-loop-counter)
        (up-get-fact player-number 0 g-loop-counter2)
        ; (up-log-data 0 CHAT-LOG-ENTRY c: 0)
        ; (up-log-data 0 CHAT-LOG-TIME g: g-loop-counter)
        ; (up-log-data 0 CHAT-LOG-PLAYER g: g-loop-counter2)
        (up-log-data 0 "Calculate Best Counter Unit" g: g-current-group)
        )

        (defrule
        (true)
        =>
        (up-get-rule-id g-army-comp-start-rule-id)
        (disable-self)
        )

    ;--------------------------------
    ;   Check if Unit is Available
    ;--------------------------------

        ;If unit not available, check next unit
        (defrule
        (or
            (and
                (goal g-current-unit-type SUPPORT-MILITIA)
                (goal g-primary-unit militiaman))
            (or
                (and
                    (goal g-current-unit-type SUPPORT-SPEARMAN)
                    (goal g-primary-unit spearman))
                (and
                    (goal g-current-unit-type SUPPORT-ARCHER)
                    (goal g-primary-unit archer))))
        =>
        (up-modify-goal g-current-unit-type c:+ 1)
        (up-jump-rule -1)
        )
        (defrule
        (or
            (and
                (goal g-current-unit-type SUPPORT-CONDOTTIERO)
                (or
                    (current-age < imperial-age)
                    (or
                        (goal g-primary-unit condottiero)
                        (nor
                            (civ-selected italian)
                            (players-civ any-ally italian)))))
            (and
                (goal g-current-unit-type SUPPORT-SKIRMISHER)
                (goal g-primary-unit skirmisher)))
        =>
        (up-modify-goal g-current-unit-type c:+ 1)
        (up-jump-rule -2)
        )
        (defrule
        (or
            (and
                (goal g-current-unit-type SUPPORT-EAGLE-WARRIOR)
                (or
                    (goal g-primary-unit eagle-warrior)
                    (up-compare-const EAGLE-WARRIOR-AVAILABLE == NO)))
            (and
                (goal g-current-unit-type SUPPORT-CAVALRY-ARCHER)
                (or
                    (goal g-primary-unit cavalry-archer)
                    (up-compare-const CAVALRY-ARCHER-AVAILABLE == NO))))
        =>
        (up-modify-goal g-current-unit-type c:+ 1)
        (up-jump-rule -3)
        )
        (defrule
        (or
            (and
                (goal g-current-unit-type SUPPORT-ELEPHANT-ARCHER)
                (or
                    (goal g-primary-unit elephant-archer)
                    (up-compare-const ELEPHANT-ARCHER-AVAILABLE == NO)))
            (and
                (goal g-current-unit-type SUPPORT-SLINGER)
                (or
                    (goal g-primary-unit slinger)
                    (not
                        (civ-selected incan)))))
        =>
        (up-modify-goal g-current-unit-type c:+ 1)
        (up-jump-rule -4)
        )
        (defrule
        (or
            (and
                (goal g-current-unit-type SUPPORT-GENITOUR)
                (or
                    (goal g-primary-unit genitour)
                    (nor
                        (civ-selected berbers)
                        (players-civ any-ally berbers))))
            (and
                (goal g-current-unit-type SUPPORT-SCOUT-CAVALRY)
                (or
                    (goal g-primary-unit scout-cavalry)
                    (up-compare-const SCOUT-CAVALRY-AVAILABLE == NO))))
        =>
        (up-modify-goal g-current-unit-type c:+ 1)
        (up-jump-rule -5)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-HAND-CANNONEER)
        (or
            (goal g-primary-unit hand-cannoneer)
            (or
                (up-compare-const HAND-CANNONEER-AVAILABLE == NO)
                (nor
                    (current-age == imperial-age)
                    (civ-selected bohemians))))
        =>
        (up-modify-goal g-current-unit-type c:+ 1)
        (up-jump-rule -6)
        )
        (defrule
        (or
            (and
                (goal g-current-unit-type SUPPORT-KNIGHT)
                (or
                    (goal g-primary-unit knight)
                    (up-compare-const KNIGHT-AVAILABLE == NO)))
            (and
                (goal g-current-unit-type SUPPORT-CAMEL)
                (or
                    (goal g-primary-unit camel)
                    (up-compare-const CAMEL-AVAILABLE == NO))))
        =>
        (up-modify-goal g-current-unit-type c:+ 1)
        (up-jump-rule -7)
        )
        (defrule
        (or
            (and
                (goal g-current-unit-type SUPPORT-BATTLE-ELEPHANT)
                (or
                    (goal g-primary-unit battle-elephant)
                    (up-compare-const BATTLE-ELEPHANT-AVAILABLE == NO)))
            (and
                (goal g-current-unit-type SUPPORT-STEPPE-LANCER)
                (or
                    (goal g-primary-unit steppe-lancer)
                    (up-compare-const STEPPE-LANCER-AVAILABLE == NO))))
        =>
        (up-modify-goal g-current-unit-type c:+ 1)
        (up-jump-rule -8)
        )
        (defrule
        (or
            (and
                (goal g-current-unit-type SUPPORT-SHRIVAMSHA-RIDER)
                (or
                    (goal g-primary-unit shrivamsha-rider)
                    (not
                        (civ-selected gurjaras))))
            (and
                (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
                (goal g-primary-unit my-unique-unit)))
        =>
        (up-modify-goal g-current-unit-type c:+ 1)
        (up-jump-rule -9)
        )
        (defrule
        (goal g-age-status LATE-IMPERIAL)
        (or
            (goal g-current-unit-type SUPPORT-EAGLE-WARRIOR)
            (or
                (goal g-current-unit-type SUPPORT-CONDOTTIERO)
                (or
                    (goal g-current-unit-type SUPPORT-CAVALRY-ARCHER)
                    (or
                        (goal g-current-unit-type SUPPORT-ELEPHANT-ARCHER)
                        (or
                            (goal g-current-unit-type SUPPORT-SLINGER)
                            (or
                                (goal g-current-unit-type SUPPORT-HAND-CANNONEER)
                                (goal g-current-unit-type SUPPORT-KNIGHT)))))))
        =>
        (up-modify-goal g-current-unit-type c:+ 1)
        (up-jump-rule -10)
        )
        (defrule
        (goal g-age-status LATE-IMPERIAL)
        (or
            (goal g-current-unit-type SUPPORT-CAMEL)
            (or
                (goal g-current-unit-type SUPPORT-BATTLE-ELEPHANT)
                (or
                    (goal g-current-unit-type SUPPORT-STEPPE-LANCER)
                    (or
                        (goal g-current-unit-type SUPPORT-SHRIVAMSHA-RIDER)
                        (and
                            (goal g-current-unit-type SUPPORT-ARCHER)
                            (not
                                (civ-selected persian)))))))
        =>
        (up-modify-goal g-current-unit-type c:+ 1)
        (up-jump-rule -11)
        )
        #load-if-not-defined AZTEC-CIV
        #load-if-not-defined CELTIC-CIV
        #load-if-not-defined CUMANS-CIV
        #load-if-not-defined DRAVIDIANS-CIV
        #load-if-not-defined ETHIOPIAN-CIV
        #load-if-not-defined FRANKISH-CIV
        #load-if-not-defined GOTHIC-CIV
        #load-if-not-defined GURJARAS-CIV
        #load-if-not-defined INCAN-CIV
        #load-if-not-defined JAPANESE-CIV
        #load-if-not-defined MAGYAR-CIV
        #load-if-not-defined MALAY-CIV
        #load-if-not-defined POLES-CIV
        #load-if-not-defined SICILIANS-CIV
        #load-if-not-defined TEUTONIC-CIV
        #load-if-not-defined VIKING-CIV

            (defrule
            (goal g-age-status LATE-IMPERIAL)
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            =>
            (up-modify-goal g-current-unit-type c:+ 1)
            (up-jump-rule -12)
            )

        #end-if
        #end-if
        #end-if
        #end-if
        #end-if
        #end-if
        #end-if
        #end-if
        #end-if
        #end-if
        #end-if
        #end-if
        #end-if
        #end-if
        #end-if
        #end-if

    ;-------------------
    ;   Get Unit Info
    ;-------------------

        ;Get Building Type
        (defrule
        (or
            (goal g-current-unit-type SUPPORT-MILITIA)
            (or
                (goal g-current-unit-type SUPPORT-SPEARMAN)
                (or
                    (goal g-current-unit-type SUPPORT-EAGLE-WARRIOR)
                    (or
                        (goal g-current-unit-type SUPPORT-CONDOTTIERO)
                        (and
                            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
                            (research-completed ri-anarchy))))))
        =>
        (set-goal g-current-unit-building barracks)
        )
        (defrule
        (or
            (goal g-current-unit-type SUPPORT-ARCHER)
            (or
                (goal g-current-unit-type SUPPORT-SKIRMISHER)
                (or
                    (goal g-current-unit-type SUPPORT-CAVALRY-ARCHER)
                    (or
                        (goal g-current-unit-type SUPPORT-HAND-CANNONEER)
                        (or
                            (goal g-current-unit-type SUPPORT-SLINGER)
                            (or
                                (goal g-current-unit-type SUPPORT-GENITOUR)
                                (goal g-current-unit-type SUPPORT-ELEPHANT-ARCHER)))))))
        =>
        (set-goal g-current-unit-building archery-range)
        )
        (defrule
        (or
            (goal g-current-unit-type SUPPORT-SCOUT-CAVALRY)
            (or
                (goal g-current-unit-type SUPPORT-KNIGHT)
                (or
                    (goal g-current-unit-type SUPPORT-CAMEL)
                    (or
                        (goal g-current-unit-type SUPPORT-BATTLE-ELEPHANT)
                        (or
                            (goal g-current-unit-type SUPPORT-STEPPE-LANCER)
                            (or
                                (goal g-current-unit-type SUPPORT-SHRIVAMSHA-RIDER)
                                (and
                                    (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
                                    (research-completed ri-marauders))))))))
        =>
        (set-goal g-current-unit-building stable)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-MONK)
        =>
        (set-goal g-current-unit-building monastery)
        )
        ;Assume unique unit building type is castle

        ;Get Attack Type
        (defrule
        (up-compare-goal g-current-unit-building != archery-range)
        (or
            (up-compare-goal g-current-unit-type != SUPPORT-UNIQUE-UNIT)
            (up-compare-const UNIQUE-UNIT-ATTACK-TYPE == MELEE-ATTACK))
        =>
        (set-goal g-current-unit-attack-type MELEE-ATTACK)
        )
        (defrule
        (or
            (and
                (up-compare-goal g-current-unit-building == archery-range)
                (up-compare-goal g-current-unit-type != SUPPORT-HAND-CANNONEER))
            (and
                (up-compare-goal g-current-unit-type == SUPPORT-UNIQUE-UNIT)
                (up-compare-const UNIQUE-UNIT-ATTACK-TYPE == PIERCE-ATTACK)))
        =>
        (set-goal g-current-unit-attack-type PIERCE-ATTACK)
        )

        ;Get Armor Type
        (defrule
        (or
            (up-compare-goal g-current-unit-building == barracks)
            (and
                (up-compare-goal g-current-unit-type == SUPPORT-UNIQUE-UNIT)
                (up-compare-const UNIQUE-UNIT-ARMOR-TYPE == INFANTRY-ARMOR)))
        =>
        (set-goal g-current-unit-attack-type INFANTRY-ARMOR)
        )
        (defrule
        (or
            (up-compare-goal g-current-unit-building == archery-range)
            (and
                (up-compare-goal g-current-unit-type == SUPPORT-UNIQUE-UNIT)
                (up-compare-const UNIQUE-UNIT-ARMOR-TYPE == ARCHER-ARMOR)))
        =>
        (set-goal g-current-unit-attack-type ARCHER-ARMOR)
        )
        (defrule
        (or
            (up-compare-goal g-current-unit-building == stable)
            (and
                (up-compare-goal g-current-unit-type == SUPPORT-UNIQUE-UNIT)
                (up-compare-const UNIQUE-UNIT-ARMOR-TYPE == CAVALRY-ARMOR)))
        =>
        (set-goal g-current-unit-attack-type CAVALRY-ARMOR)
        )

        (defrule
        (up-compare-goal g-desired-num-military > 0)
        (up-compare-goal g-age-status >= MID-CASTLE)
        (up-compare-goal g-primary-unit > 0)
        =>
        (up-log-data 0 "Support Unit Type: %d" g: g-current-unit-type)
        )

    ;------------------------------
    ;   Base Starting Priorities
    ;------------------------------

        #load-if-defined DE-AVAILABLE
        (defrule
        (goal g-current-unit-type SUPPORT-MILITIA)
        =>
        (set-goal g-current-unit-score 600)
        )
        #else
        (defrule
        (goal g-current-unit-type SUPPORT-MILITIA)
        =>
        (set-goal g-current-unit-score 500)
        )
        #end-if
        (defrule
        (goal g-current-unit-type SUPPORT-SPEARMAN)
        =>
        (set-goal g-current-unit-score 850)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-EAGLE-WARRIOR)
        =>
        (set-goal g-current-unit-score 900)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-CONDOTTIERO)
        =>
        (set-goal g-current-unit-score 950)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-ARCHER)
        =>
        (set-goal g-current-unit-score 1000)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-SKIRMISHER)
        =>
        (set-goal g-current-unit-score 950)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-CAVALRY-ARCHER)
        =>
        (set-goal g-current-unit-score 800)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-ELEPHANT-ARCHER)
        =>
        (set-goal g-current-unit-score 800)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-SLINGER)
        =>
        (set-goal g-current-unit-score 900)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-GENITOUR)
        =>
        (set-goal g-current-unit-score 750)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-HAND-CANNONEER)
        =>
        (set-goal g-current-unit-score 1100)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-SCOUT-CAVALRY)
        =>
        (set-goal g-current-unit-score 800)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-KNIGHT)
        =>
        (set-goal g-current-unit-score 1100)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-CAMEL)
        =>
        (set-goal g-current-unit-score 850)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-BATTLE-ELEPHANT)
        =>
        (set-goal g-current-unit-score 800)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-STEPPE-LANCER)
        =>
        (set-goal g-current-unit-score 800)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-SHRIVAMSHA-RIDER)
        =>
        (set-goal g-current-unit-score 1100)
        )
        ;Unique Unit base score within civ #load-ifs below

    ;--------------------------------------
    ;   Adjustments Based on Age/Pop (1)
    ;--------------------------------------

        #load-if-defined DE-AVAILABLE
        (defrule
        (goal g-current-unit-type SUPPORT-MILITIA)
        (current-age == imperial-age)
        =>
        (up-modify-goal g-current-unit-score c:+ 150)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 1)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
        )
        #else
        (defrule
        (goal g-current-unit-type SUPPORT-MILITIA)
        (current-age == imperial-age)
        =>
        (up-modify-goal g-current-unit-score c:+ 250)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 1)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
        )
        #end-if
        (defrule
        (goal g-current-unit-type SUPPORT-CAVALRY-ARCHER)
        (current-age == imperial-age)
        =>
        (up-modify-goal g-current-unit-score c:+ 100)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 1)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-ELEPHANT-ARCHER)
        (civilian-population >= 90)
        =>
        (up-modify-goal g-current-unit-score c:+ 100)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 1)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-ELEPHANT-ARCHER)
        (civilian-population >= 110)
        (current-age == imperial-age)
        =>
        (up-modify-goal g-current-unit-score c:+ 100)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 1)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-SCOUT-CAVALRY)
        (current-age == imperial-age)
        =>
        (up-modify-goal g-current-unit-score c:+ 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 1)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-KNIGHT)
        (current-age == imperial-age)
        =>
        (up-modify-goal g-current-unit-score c:- 100)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 1)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -100)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-BATTLE-ELEPHANT)
        (civilian-population >= 90)
        =>
        (up-modify-goal g-current-unit-score c:+ 100)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 1)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-BATTLE-ELEPHANT)
        (civilian-population >= 110)
        (current-age == imperial-age)
        =>
        (up-modify-goal g-current-unit-score c:+ 100)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 1)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
        )

    ;-------------------------------------------
    ;   Adjustments Based on Primary Unit (2)
    ;-------------------------------------------

        ; (defrule
        ; (goal g-current-unit-type SUPPORT-MILITIA)
        ; (goal g-primary-unit eagle-warrior)
        ; =>
        ; (up-modify-goal g-current-unit-score c:+ 100)
        ; (up-log-data 0 CHAT-COUNTER-TYPE c: 2)
        ; (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
        ; )
        (defrule
        (goal g-current-unit-type SUPPORT-SPEARMAN)
        (goal g-primary-unit-class archery-class)
        =>
        (up-modify-goal g-current-unit-score c:+ 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 2)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-EAGLE-WARRIOR)
        (goal g-primary-unit skirmisher)
        =>
        (up-modify-goal g-current-unit-score c:+ 100)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 2)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-CONDOTTIERO)
        (up-compare-goal g-primary-unit-class == infantry-class)
        =>
        (up-modify-goal g-current-unit-score c:+ 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 2)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-ARCHER)
        (goal g-primary-unit eagle-warrior)
        =>
        (up-modify-goal g-current-unit-score c:- 100)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 2)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -100)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-ARCHER)
        (goal g-primary-unit skirmisher)
        (current-age == castle-age)
        =>
        (up-modify-goal g-current-unit-score c:+ 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 2)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-SKIRMISHER)
        (goal g-primary-unit eagle-warrior)
        =>
        (up-modify-goal g-current-unit-score c:- 100)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 2)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -100)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-SKIRMISHER)
        (goal g-primary-unit genitour)
        =>
        (up-modify-goal g-current-unit-score c:- 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 2)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-SKIRMISHER)
        (goal g-primary-unit archer)
        (current-age == castle-age)
        =>
        (up-modify-goal g-current-unit-score c:+ 300)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 2)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 300)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-CAVALRY-ARCHER)
        (goal g-primary-unit-class archery-class)
        =>
        (up-modify-goal g-current-unit-score c:- 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 2)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-SLINGER)
        (goal g-primary-unit-class archery-class)
        (up-compare-goal g-primary-unit != skirmisher)
        =>
        (up-modify-goal g-current-unit-score c:- 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 2)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-SLINGER)
        (goal g-primary-unit eagle-warrior)
        =>
        (up-modify-goal g-current-unit-score c:+ 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 2)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-GENITOUR)
        (goal g-primary-unit-class archery-class)
        =>
        (up-modify-goal g-current-unit-score c:- 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 2)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-ELEPHANT-ARCHER)
        (goal g-primary-unit-class archery-class)
        =>
        (up-modify-goal g-current-unit-score c:- 100)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 2)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -100)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-HAND-CANNONEER)
        (goal g-primary-unit-class archery-class)
        (up-compare-goal g-primary-unit != skirmisher)
        =>
        (up-modify-goal g-current-unit-score c:- 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 2)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
        )

    ;------------------------------------------------
    ;   Adjustments Based on Primary Unit Cost (3)
    ;------------------------------------------------

        (defrule
        (goal g-current-unit-type SUPPORT-SPEARMAN)
        (nor
            (goal g-primary-unit skirmisher)
            (goal g-primary-unit genitour))
        (or
            (goal g-primary-unit-class archery-class)
            (goal g-primary-unit-class cavalry-archer-class))
        (unit-type-count trade-cart < 20)
        =>
        (up-modify-goal g-current-unit-score c:+ 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 3)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-SKIRMISHER)
        (up-compare-goal g-primary-unit != archer)
        (up-compare-goal g-primary-unit != hand-cannoneer)
        (up-compare-goal g-primary-unit != cavalry-archer)
        (up-compare-goal g-primary-unit != slinger)
        (up-compare-goal g-primary-unit != elephant-archer)
        (up-compare-goal g-primary-unit != scout-cavalry)
        (up-compare-goal g-primary-unit != spearman)
        (up-compare-goal g-primary-unit != genitour)
        (unit-type-count trade-cart < 20)
        =>
        (up-modify-goal g-current-unit-score c:+ 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 3)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-SCOUT-CAVALRY)
        (up-compare-goal g-primary-unit-class != cavalry-class)
        (up-compare-goal g-primary-unit != skirmisher)
        (up-compare-goal g-primary-unit != spearman)
        (up-compare-goal g-primary-unit != genitour)
        (unit-type-count trade-cart < 20)
        =>
        (up-modify-goal g-current-unit-score c:+ 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 3)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
        )
        (defrule
        (or
            (goal g-current-unit-type SUPPORT-ARCHER)
            (or
                (goal g-current-unit-type SUPPORT-SLINGER)
                (or
                    (goal g-current-unit-type SUPPORT-HAND-CANNONEER)
                    (goal g-current-unit-type SUPPORT-ELEPHANT-ARCHER))))
        (goal g-primary-unit spearman)
        (unit-type-count trade-cart < 20)
        =>
        (up-modify-goal g-current-unit-score c:+ 300)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 3)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 300)
        )
        (defrule
        (or
            (goal g-current-unit-type SUPPORT-EAGLE-WARRIOR)
            (or
                (goal g-current-unit-type SUPPORT-KNIGHT)
                (or
                    (goal g-current-unit-type SUPPORT-CAMEL)
                    (or
                        (goal g-current-unit-type SUPPORT-BATTLE-ELEPHANT)
                        (or
                            (goal g-current-unit-type SUPPORT-STEPPE-LANCER)
                            (goal g-current-unit-type SUPPORT-SHRIVAMSHA-RIDER))))))
        (goal g-primary-unit spearman)
        (unit-type-count trade-cart < 20)
        =>
        (up-modify-goal g-current-unit-score c:+ 100)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 3)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
        )
        (defrule
        (or
            (goal g-current-unit-armor-type INFANTRY-ARMOR)
            (goal g-current-unit-armor-type CAVALRY-ARMOR))
        (up-compare-goal g-current-unit-type != SUPPORT-SPEARMAN)
        (up-compare-goal g-current-unit-type != SUPPORT-GENITOUR)
        (up-compare-goal g-current-unit-type != SUPPORT-SCOUT-CAVALRY)
        (goal g-primary-unit skirmisher)
        (unit-type-count trade-cart < 20)
        =>
        (up-modify-goal g-current-unit-score c:+ 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 3)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
        )
        (defrule
        (up-compare-goal g-current-unit-building != stable)
        (up-compare-goal g-current-unit-type != SUPPORT-SPEARMAN)
        (up-compare-goal g-current-unit-type != SUPPORT-GENITOUR)
        (up-compare-goal g-current-unit-type != SUPPORT-SKIRMISHER)
        (goal g-primary-unit scout-cavalry)
        (unit-type-count trade-cart < 20)
        =>
        (up-modify-goal g-current-unit-score c:+ 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 3)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-CAVALRY-ARCHER)
        (goal g-primary-unit scout-cavalry)
        (unit-type-count trade-cart < 20)
        =>
        (up-modify-goal g-current-unit-score c:+ 100)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 3)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
        )

    ;---------------------------------
    ;   Unique Unit Adjustments (4, not logged)
    ;---------------------------------

		#load-if-defined AZTEC-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            =>
            (up-modify-goal g-current-unit-score c:+ 600)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (current-age == imperial-age)
            =>
            (up-modify-goal g-current-unit-score c:+ 250)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (goal g-primary-unit eagle-warrior)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            )

        #end-if
        
        #load-if-defined BENGALIS-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            =>
            (up-modify-goal g-current-unit-score c:+ 750)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (current-age == imperial-age)
            =>
            (up-modify-goal g-current-unit-score c:+ 150)
            )

        #end-if

		#load-if-defined BERBERS-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            =>
            (up-modify-goal g-current-unit-score c:+ 700)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (current-age == imperial-age)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            )

        #end-if

        #load-if-defined BOHEMIANS-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            =>
            (up-modify-goal g-current-unit-score c:+ 750)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (civilian-population >= 90)
            =>
            (up-modify-goal g-current-unit-score c:+ 100)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (current-age == imperial-age)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (goal g-primary-unit spearman)
            =>
            (up-modify-goal g-current-unit-score c:+ 300)
            )

        #end-if

		#load-if-defined BRITON-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            =>
            (up-modify-goal g-current-unit-score c:+ 750)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (current-age == imperial-age)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (goal g-primary-unit spearman)
            =>
            (up-modify-goal g-current-unit-score c:+ 300)
            )

        #end-if

		#load-if-defined BULGARIANS-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            =>
            (up-modify-goal g-current-unit-score c:+ 750)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (current-age == imperial-age)
            =>
            (up-modify-goal g-current-unit-score c:+ 150)
            )

        #end-if

		#load-if-defined BURGUNDIANS-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            =>
            (up-modify-goal g-current-unit-score c:+ 850)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (current-age == imperial-age)
            =>
            (up-modify-goal g-current-unit-score c:+ 50)
            )

        #end-if

		#load-if-defined BURMESE-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            =>
            (up-modify-goal g-current-unit-score c:+ 750)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (current-age == imperial-age)
            =>
            (up-modify-goal g-current-unit-score c:+ 150)
            )

        #end-if
		
		#load-if-defined BYZANTINE-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            =>
            (up-modify-goal g-current-unit-score c:+ 700)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (current-age == imperial-age)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            )

        #end-if

		#load-if-defined CELTIC-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            =>
            (up-modify-goal g-current-unit-score c:+ 700)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (current-age == imperial-age)
            =>
            (up-modify-goal g-current-unit-score c:+ 250)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (goal g-primary-unit spearman)
                (or
                    (goal g-primary-unit archer)
                    (goal g-primary-unit cavalry-archer)))
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            )

        #end-if

		#load-if-defined CHINESE-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            =>
            (up-modify-goal g-current-unit-score c:+ 750)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (current-age == imperial-age)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (goal g-primary-unit spearman)
            =>
            (up-modify-goal g-current-unit-score c:+ 300)
            )

        #end-if

		#load-if-defined CUMANS-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            =>
            (up-modify-goal g-current-unit-score c:+ 800)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (current-age == imperial-age)
            =>
            (up-modify-goal g-current-unit-score c:+ 150)
            )

        #end-if

        #load-if-defined DRAVIDIANS-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            =>
            (up-modify-goal g-current-unit-score c:+ 750)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (current-age == imperial-age)
            =>
            (up-modify-goal g-current-unit-score c:+ 250)
            )

        #end-if

		#load-if-defined ETHIOPIAN-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            =>
            (up-modify-goal g-current-unit-score c:+ 600)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (current-age == imperial-age)
            =>
            (up-modify-goal g-current-unit-score c:+ 250)
            )

        #end-if

		#load-if-defined FRANKISH-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            =>
            (up-modify-goal g-current-unit-score c:+ 650)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (current-age == imperial-age)
            =>
            (up-modify-goal g-current-unit-score c:+ 300)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (goal g-primary-unit scout-cavalry)
                (goal g-primary-unit knight))
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            )

        #end-if

		#load-if-defined GOTHIC-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            =>
            (up-modify-goal g-current-unit-score c:+ 750)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (current-age == imperial-age)
            =>
            (up-modify-goal g-current-unit-score c:+ 300)
            )

        #end-if

        #load-if-defined GURJARAS-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            =>
            (up-modify-goal g-current-unit-score c:+ 750)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (current-age == imperial-age)
            =>
            (up-modify-goal g-current-unit-score c:+ 250)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (goal g-primary-unit-class cavalry-class)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            )

        #end-if

		#load-if-defined HUN-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            =>
            (up-modify-goal g-current-unit-score c:+ 600)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (current-age == imperial-age)
            =>
            (up-modify-goal g-current-unit-score c:+ 250)
            )

        #end-if

		#load-if-defined INCAN-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            =>
            (up-modify-goal g-current-unit-score c:+ 700)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (current-age == imperial-age)
            =>
            (up-modify-goal g-current-unit-score c:+ 250)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (goal g-primary-unit skirmisher)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            )

        #end-if

		#load-if-defined INDIAN-CIV
            #load-if-not-defined DE-AVAILABLE
                (defrule
                (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
                =>
                (up-modify-goal g-current-unit-score c:+ 500)
                )
                (defrule
                (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
                (civilian-population >= 90)
                =>
                (up-modify-goal g-current-unit-score c:+ 200)
                )
                (defrule
                (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
                (current-age == imperial-age)
                (civilian-population >= 110)
                =>
                (up-modify-goal g-current-unit-score c:+ 150)
                )
                (defrule
                (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
                (goal g-primary-unit spearman)
                =>
                (up-modify-goal g-current-unit-score c:+ 300)
                )
            #else
                (defrule
                (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
                =>
                (up-modify-goal g-current-unit-score c:+ 800)
                )
                (defrule
                (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
                (current-age == imperial-age)
                =>
                (up-modify-goal g-current-unit-score c:+ 250)
                )
                (defrule
                (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
                (goal g-primary-unit hand-cannoneer)
                =>
                (up-modify-goal g-current-unit-score c:+ 200)
                )
            #end-if
        #end-if

		#load-if-defined ITALIAN-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            =>
            (up-modify-goal g-current-unit-score c:+ 750)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (current-age == imperial-age)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (goal g-primary-unit spearman)
            =>
            (up-modify-goal g-current-unit-score c:+ 100)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (goal g-primary-unit skirmisher)
            =>
            (up-modify-goal g-current-unit-score c:+ 300)
            )

        #end-if

		#load-if-defined JAPANESE-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            =>
            (up-modify-goal g-current-unit-score c:+ 650)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (current-age == imperial-age)
            =>
            (up-modify-goal g-current-unit-score c:+ 300)
            )

        #end-if

		#load-if-defined KHMER-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            =>
            (up-modify-goal g-current-unit-score c:+ 850)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (civilian-population >= 90)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (current-age == imperial-age)
            =>
            (up-modify-goal g-current-unit-score c:+ 150)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (goal g-primary-unit spearman)
            =>
            (up-modify-goal g-current-unit-score c:+ 300)
            )

        #end-if

		#load-if-defined KOREAN-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            =>
            (up-modify-goal g-current-unit-score c:+ 800)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (current-age == imperial-age)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (goal g-primary-unit spearman)
            =>
            (up-modify-goal g-current-unit-score c:+ 300)
            )

        #end-if

		#load-if-defined LITHUANIANS-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            =>
            (up-modify-goal g-current-unit-score c:+ 750)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (current-age == imperial-age)
            =>
            (up-modify-goal g-current-unit-score c:+ 150)
            )

        #end-if

		#load-if-defined MAGYAR-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            =>
            (up-modify-goal g-current-unit-score c:+ 650)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (current-age == imperial-age)
            =>
            (up-modify-goal g-current-unit-score c:+ 250)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (goal g-primary-unit archer)
                (goal g-primary-unit cavalry-archer))
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (nor
                (goal g-primary-unit skirmisher)
                (goal g-primary-unit genitour))
            (or
                (goal g-primary-unit-class archery-class)
                (goal g-primary-unit-class cavalry-archer-class))
            (unit-type-count trade-cart < 20)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-primary-unit != archer)
            (up-compare-goal g-primary-unit != hand-cannoneer)
            (up-compare-goal g-primary-unit != cavalry-archer)
            (up-compare-goal g-primary-unit != slinger)
            (up-compare-goal g-primary-unit != elephant-archer)
            (up-compare-goal g-primary-unit != scout-cavalry)
            (up-compare-goal g-primary-unit != spearman)
            (up-compare-goal g-primary-unit != genitour)
            (unit-type-count trade-cart < 20)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-primary-unit-class != cavalry-class)
            (up-compare-goal g-primary-unit != skirmisher)
            (up-compare-goal g-primary-unit != spearman)
            (up-compare-goal g-primary-unit != genitour)
            (unit-type-count trade-cart < 20)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            )

        #end-if

		#load-if-defined MALAY-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            =>
            (up-modify-goal g-current-unit-score c:+ 600)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (current-age == imperial-age)
            =>
            (up-modify-goal g-current-unit-score c:+ 250)
            )

        #end-if

		#load-if-defined MALIAN-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            =>
            (up-modify-goal g-current-unit-score c:+ 700)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (current-age == imperial-age)
            =>
            (up-modify-goal g-current-unit-score c:+ 250)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (goal g-primary-unit spearman)
            =>
            (up-modify-goal g-current-unit-score c:+ 300)
            )

        #end-if

		#load-if-defined MAYAN-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            =>
            (up-modify-goal g-current-unit-score c:+ 750)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (current-age == imperial-age)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (goal g-primary-unit spearman)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            )

        #end-if

		#load-if-defined MONGOL-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            =>
            (up-modify-goal g-current-unit-score c:+ 750)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (current-age == imperial-age)
            =>
            (up-modify-goal g-current-unit-score c:+ 250)
            )

        #end-if

		#load-if-defined PERSIAN-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            =>
            (up-modify-goal g-current-unit-score c:+ 550)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (current-age == imperial-age)
            =>
            (up-modify-goal g-current-unit-score c:+ 150)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (civilian-population >= 110)
            =>
            (up-modify-goal g-current-unit-score c:+ 100)
            )

        #end-if

		#load-if-defined POLES-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            =>
            (up-modify-goal g-current-unit-score c:+ 800)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (current-age == imperial-age)
            =>
            (up-modify-goal g-current-unit-score c:+ 250)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (goal g-primary-unit-class archery-class)
                (goal g-primary-unit-class cavalry-archer-class))
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (goal g-primary-unit skirmisher)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            )

        #end-if

		#load-if-defined PORTUGUESE-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            =>
            (up-modify-goal g-current-unit-score c:+ 900)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (current-age == imperial-age)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (goal g-primary-unit spearman)
            =>
            (up-modify-goal g-current-unit-score c:+ 300)
            )

        #end-if

		#load-if-defined SARACEN-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            =>
            (up-modify-goal g-current-unit-score c:+ 650)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (current-age == imperial-age)
            =>
            (up-modify-goal g-current-unit-score c:+ 250)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (goal g-primary-unit archer)
                (goal g-primary-unit skirmisher))
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            )

        #end-if

		#load-if-defined SICILIANS-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            =>
            (up-modify-goal g-current-unit-score c:+ 700)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (current-age == imperial-age)
            =>
            (up-modify-goal g-current-unit-score c:+ 250)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (goal g-primary-unit spearman)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (goal g-primary-unit skirmisher)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            )

        #end-if

		#load-if-defined SLAVIC-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            =>
            (up-modify-goal g-current-unit-score c:+ 750)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (current-age == imperial-age)
            =>
            (up-modify-goal g-current-unit-score c:+ 250)
            )

        #end-if

		#load-if-defined SPANISH-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            =>
            (up-modify-goal g-current-unit-score c:+ 1000)
            )

        #end-if

		#load-if-defined TATARS-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            =>
            (up-modify-goal g-current-unit-score c:+ 750)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (current-age == imperial-age)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            )

        #end-if

		#load-if-defined TEUTONIC-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            =>
            (up-modify-goal g-current-unit-score c:+ 600)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (current-age == imperial-age)
            =>
            (up-modify-goal g-current-unit-score c:+ 250)
            )

        #end-if

		#load-if-defined TURKISH-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            =>
            (up-modify-goal g-current-unit-score c:+ 850)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (current-age == imperial-age)
            =>
            (up-modify-goal g-current-unit-score c:+ 100)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (goal g-primary-unit spearman)
            =>
            (up-modify-goal g-current-unit-score c:+ 300)
            )

        #end-if

		#load-if-defined VIETNAMESE-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            =>
            (up-modify-goal g-current-unit-score c:+ 750)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (current-age == imperial-age)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (goal g-primary-unit spearman)
            =>
            (up-modify-goal g-current-unit-score c:+ 300)
            )

        #end-if

		#load-if-defined VIKING-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            =>
            (up-modify-goal g-current-unit-score c:+ 800)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (current-age == imperial-age)
            =>
            (up-modify-goal g-current-unit-score c:+ 250)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (goal g-primary-unit skirmisher)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            )

        #end-if

    ;------------------------------------------
    ;   Adjustments Based On Speed/Range (5)
    ;------------------------------------------

        #load-if-not-defined FRANKISH-CIV
        #load-if-not-defined GURJARAS-CIV
        #load-if-not-defined MALIAN-CIV

            (defrule
            (or
                (goal g-current-unit-building barracks)
                (or
                    (goal g-current-unit-type SUPPORT-BATTLE-ELEPHANT)
                    (and
                        (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
                        (up-compare-const UNIQUE-UNIT-CLASS == infantry-class))))
            (or
                (goal g-primary-unit-class archery-class)
                (or
                    (goal g-primary-unit-class archery-cannon-class)
                    (goal g-primary-unit elephant-archer)))
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 5)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )
        
        #end-if
        #end-if
        #end-if

        #load-if-not-defined BENGALIS-CIV
        #load-if-not-defined BERBERS-CIV
        #load-if-not-defined BURMESE-CIV
        #load-if-not-defined CUMANS-CIV
        #load-if-not-defined FRANKISH-CIV
        #load-if-not-defined GURJARAS-CIV
        #load-if-not-defined KOREAN-CIV
        #load-if-not-defined MALIAN-CIV
        #load-if-not-defined MONGOL-CIV
        #load-if-not-defined SPANISH-CIV

            (defrule
            (up-compare-goal g-current-unit-type != SUPPORT-CAVALRY-ARCHER)
            (up-compare-goal g-current-unit-type != SUPPORT-GENITOUR)
            (goal g-current-unit-armor-type ARCHER-ARMOR)
            (or
                (goal g-primary-unit-class infantry-class)
                (goal g-primary-unit battle-elephant))
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 5)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )
        
        #end-if
        #end-if
        #end-if
        #end-if
        #end-if
        #end-if
        #end-if
        #end-if
        #end-if
        #end-if

        #load-if-not-defined KHMER-CIV

            (defrule
            (up-compare-goal g-current-unit-type != SUPPORT-BATTLE-ELEPHANT)
            (or
                (goal g-current-unit-building stable)
                (and
                    (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
                    (up-compare-const UNIQUE-UNIT-CLASS == cavalry-class)))
            (or
                (goal g-primary-unit-class cavalry-archer-class)
                (goal g-primary-unit-class cavalry-cannon-class))
            (up-compare-goal g-primary-unit != elephant-archer)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 5)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )

            (defrule
            (or
                (goal g-current-unit-type SUPPORT-CAVALRY-ARCHER)
                (or
                    (goal g-current-unit-type SUPPORT-GENITOUR)
                    (and
                        (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
                        (or
                            (up-compare-const UNIQUE-UNIT-CLASS == cavalry-archer-class)
                            (up-compare-const UNIQUE-UNIT-CLASS == cavalry-cannon-class)))))
            (goal g-primary-unit-class cavalry-class)
            (up-compare-goal g-primary-unit != battle-elephant)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 5)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )

        #end-if

    ;-----------------------------------------
    ;   Prioritize Current Support Unit (6)
    ;-----------------------------------------

        (defrule
        (goal g-current-unit-type SUPPORT-MILITIA)
        (goal g-support-unit militiaman)
        (civilian-population < 120)
        (up-compare-goal g-age-status < MID-IMPERIAL)
        =>
        (up-modify-goal g-current-unit-score c:+ 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 6)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
        )

        (defrule
        (goal g-current-unit-type SUPPORT-SPEARMAN)
        (goal g-support-unit spearman)
        (civilian-population < 120)
        (up-compare-goal g-age-status < MID-IMPERIAL)
        =>
        (up-modify-goal g-current-unit-score c:+ 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 6)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
        )

        (defrule
        (goal g-current-unit-type SUPPORT-EAGLE-WARRIOR)
        (goal g-support-unit eagle-warrior)
        (civilian-population < 120)
        (up-compare-goal g-age-status < MID-IMPERIAL)
        =>
        (up-modify-goal g-current-unit-score c:+ 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 6)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
        )

        (defrule
        (goal g-current-unit-type SUPPORT-CONDOTTIERO)
        (goal g-support-unit condottiero)
        (civilian-population < 120)
        (up-compare-goal g-age-status < MID-IMPERIAL)
        =>
        (up-modify-goal g-current-unit-score c:+ 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 6)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
        )

        (defrule
        (goal g-current-unit-type SUPPORT-ARCHER)
        (goal g-support-unit archer)
        (civilian-population < 120)
        (up-compare-goal g-age-status < MID-IMPERIAL)
        =>
        (up-modify-goal g-current-unit-score c:+ 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 6)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
        )

        (defrule
        (goal g-current-unit-type SUPPORT-SKIRMISHER)
        (goal g-support-unit skirmisher)
        (civilian-population < 120)
        (up-compare-goal g-age-status < MID-IMPERIAL)
        =>
        (up-modify-goal g-current-unit-score c:+ 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 6)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
        )

        (defrule
        (goal g-current-unit-type SUPPORT-CAVALRY-ARCHER)
        (goal g-support-unit cavalry-archer)
        (civilian-population < 120)
        (up-compare-goal g-age-status < MID-IMPERIAL)
        =>
        (up-modify-goal g-current-unit-score c:+ 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 6)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
        )

        (defrule
        (goal g-current-unit-type SUPPORT-HAND-CANNONEER)
        (goal g-support-unit hand-cannoneer)
        (civilian-population < 120)
        (up-compare-goal g-age-status < MID-IMPERIAL)
        =>
        (up-modify-goal g-current-unit-score c:+ 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 6)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
        )

        (defrule
        (goal g-current-unit-type SUPPORT-SLINGER)
        (goal g-support-unit slinger)
        (civilian-population < 120)
        (up-compare-goal g-age-status < MID-IMPERIAL)
        =>
        (up-modify-goal g-current-unit-score c:+ 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 6)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
        )

        (defrule
        (goal g-current-unit-type SUPPORT-GENITOUR)
        (goal g-support-unit genitour)
        (civilian-population < 120)
        (up-compare-goal g-age-status < MID-IMPERIAL)
        =>
        (up-modify-goal g-current-unit-score c:+ 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 6)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
        )

        (defrule
        (goal g-current-unit-type SUPPORT-ELEPHANT-ARCHER)
        (goal g-support-unit elephant-archer)
        (civilian-population < 120)
        (up-compare-goal g-age-status < MID-IMPERIAL)
        =>
        (up-modify-goal g-current-unit-score c:+ 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 6)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
        )

        (defrule
        (goal g-current-unit-type SUPPORT-SCOUT-CAVALRY)
        (goal g-support-unit scout-cavalry)
        (civilian-population < 120)
        (up-compare-goal g-age-status < MID-IMPERIAL)
        =>
        (up-modify-goal g-current-unit-score c:+ 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 6)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
        )

        (defrule
        (goal g-current-unit-type SUPPORT-KNIGHT)
        (goal g-support-unit knight)
        (civilian-population < 120)
        (up-compare-goal g-age-status < MID-IMPERIAL)
        =>
        (up-modify-goal g-current-unit-score c:+ 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 6)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
        )

        (defrule
        (goal g-current-unit-type SUPPORT-CAMEL)
        (goal g-support-unit camel)
        (civilian-population < 120)
        (up-compare-goal g-age-status < MID-IMPERIAL)
        =>
        (up-modify-goal g-current-unit-score c:+ 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 6)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
        )

        (defrule
        (goal g-current-unit-type SUPPORT-BATTLE-ELEPHANT)
        (goal g-support-unit battle-elephant)
        (civilian-population < 120)
        (up-compare-goal g-age-status < MID-IMPERIAL)
        =>
        (up-modify-goal g-current-unit-score c:+ 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 6)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
        )

        (defrule
        (goal g-current-unit-type SUPPORT-STEPPE-LANCER)
        (goal g-support-unit steppe-lancer)
        (civilian-population < 120)
        (up-compare-goal g-age-status < MID-IMPERIAL)
        =>
        (up-modify-goal g-current-unit-score c:+ 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 6)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
        )

        (defrule
        (goal g-current-unit-type SUPPORT-SHRIVAMSHA-RIDER)
        (goal g-support-unit shrivamsha-rider)
        (civilian-population < 120)
        (up-compare-goal g-age-status < MID-IMPERIAL)
        =>
        (up-modify-goal g-current-unit-score c:+ 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 6)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
        )

        (defrule
        (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
        (goal g-support-unit my-unique-unit)
        (civilian-population < 120)
        (up-compare-goal g-age-status < MID-IMPERIAL)
        =>
        (up-modify-goal g-current-unit-score c:+ 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 6)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
        )

    ;--------------------------------------------
    ;   Prioritize for Upcoming Strategies (7)
    ;--------------------------------------------

		(defrule
		(or
			(goal g-next-strategy DRUSH)
			(or
				(goal g-next-strategy FL-LATHER)
				(or
					(goal g-next-strategy FI-FARMERTRON)
					(goal g-next-strategy EARLYI-CHAMPFLOOD))))
        (goal g-current-unit-type SUPPORT-MILITIA)
		=>
		(up-modify-goal g-current-unit-score c:+ 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 7)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
		)

		(defrule
		(or
			(goal g-next-strategy MIDF-FULL-MAA)
			(or
				(goal g-next-strategy MIDC-SWORDS)
				(or
					(goal g-next-strategy MIDI-CHAMPIONS)
					(goal g-next-strategy LATEI-CHAMPIONS))))
        (goal g-current-unit-type SUPPORT-MILITIA)
		=>
		(up-modify-goal g-current-unit-score c:+ 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 7)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
		)

		(defrule
		(or
			(goal g-next-strategy MIDC-PIKES)
			(or
				(goal g-next-strategy EARLYI-HALBSTRIKE)
                (or
                    (goal g-next-strategy MIDI-HALBS)
                    (or
                        (goal g-next-strategy BOOMI-IMPERIAL)
                        (goal g-next-strategy LATEI-TRASHALBS)))))
        (goal g-current-unit-type SUPPORT-SPEARMAN)
		=>
		(up-modify-goal g-current-unit-score c:+ 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 7)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
		)

		(defrule
		(or
			(goal g-next-strategy FL-EYRIES)
			(goal g-next-strategy MIDF-FULL-EAGLES))
        (goal g-current-unit-type SUPPORT-EAGLE-WARRIOR)
		=>
		(up-modify-goal g-current-unit-score c:+ 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 7)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
		)

		(defrule
		(or
			(goal g-next-strategy FC-EAGLES-REVENGE)
			(or
				(goal g-next-strategy EARLYC-EAGLES)
				(or
					(goal g-next-strategy MIDC-EAGLES)
					(or
						(goal g-next-strategy FI-AGEOFSTONEWALLS)
						(or
							(goal g-next-strategy EARLYI-EL-DORADO)
							(or
								(goal g-next-strategy MIDI-EAGLES)
								(goal g-next-strategy BOOMC-EAGLES)))))))
        (goal g-current-unit-type SUPPORT-EAGLE-WARRIOR)
		=>
		(up-modify-goal g-current-unit-score c:+ 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 7)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
		)

		(defrule
		(goal g-next-strategy MIDI-CONDOS)
        (goal g-current-unit-type SUPPORT-CONDOTTIERO)
		=>
		(up-modify-goal g-current-unit-score c:+ 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 7)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
		)

		(defrule
		(or
			(goal g-next-strategy FL-RANGER)
			(or
				(goal g-next-strategy FL-GUERILLA)
				(or
					(goal g-next-strategy FC-STRONGBOW)
					(or
						(goal g-next-strategy EARLYI-ARBINGER)
						(or
							(goal g-next-strategy BOOMC-XBOWS)
							(goal g-next-strategy LATEI-TRASHBOWS))))))
        (goal g-current-unit-type SUPPORT-ARCHER)
		=>
		(up-modify-goal g-current-unit-score c:+ 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 7)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
		)

		(defrule
		(or
			(goal g-next-strategy MIDF-FULL-ARCHERS)
			(or
				(goal g-next-strategy MIDF-FULL-RANGED)
				(or
					(goal g-next-strategy EARLYC-XBOWS)
					(or
						(goal g-next-strategy MIDC-XBOWS)
						(goal g-next-strategy MIDI-ARBS)))))
        (goal g-current-unit-type SUPPORT-ARCHER)
		=>
		(up-modify-goal g-current-unit-score c:+ 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 7)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
		)

		(defrule
		(or
			(goal g-next-strategy FL-SKIRMMETA)
			(or
				(goal g-next-strategy MIDF-FULL-SKIRMS)
				(or
					(goal g-next-strategy MIDC-SKIRMS)
					(or
						(goal g-next-strategy EARLYI-SKIRMASSACRE)
                        (or
                            (goal g-next-strategy MIDI-SKIRMS)
                            (goal g-next-strategy LATEI-TRASHKIRMS))))))
        (goal g-current-unit-type SUPPORT-SKIRMISHER)
		=>
		(up-modify-goal g-current-unit-score c:+ 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 7)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
		)

		(defrule
        (or
            (goal g-next-strategy FC-GENGHIS)
            (or
                (goal g-next-strategy MIDC-CAV-ARCHERS)
                (or
                    (goal g-next-strategy EARLYI-HORDE)
                    (goal g-next-strategy MIDI-CAV-ARCHERS))))
        (goal g-current-unit-type SUPPORT-CAVALRY-ARCHER)
		=>
		(up-modify-goal g-current-unit-score c:+ 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 7)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
		)

		(defrule
		(or
			(goal g-next-strategy FI-SNIPER)
			(or
                (goal g-next-strategy EARLYI-MUSKETEER)
                (goal g-next-strategy MIDI-CANNONEERS)))
        (goal g-current-unit-type SUPPORT-HAND-CANNONEER)
		=>
		(up-modify-goal g-current-unit-score c:+ 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 7)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
		)

		(defrule
		(or
			(goal g-next-strategy MIDC-SLINGERS)
            (or
                (goal g-next-strategy EARLYI-SLINGSHOT)
                (goal g-next-strategy MIDI-SLINGERS)))
        (goal g-current-unit-type SUPPORT-SLINGER)
		=>
		(up-modify-goal g-current-unit-score c:+ 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 7)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
		)

		(defrule
		(or
			(goal g-next-strategy MIDC-GENITOURS)
            (or
                (goal g-next-strategy EARLYI-GENITOURAID)
                (or
                    (goal g-next-strategy MIDI-GENITOURS)
                    (goal g-next-strategy LATEI-TRASHGENS))))
        (goal g-current-unit-type SUPPORT-GENITOUR)
		=>
		(up-modify-goal g-current-unit-score c:+ 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 7)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
		)

		(defrule
		(or
			(goal g-next-strategy MIDC-ELE-ARCHERS)
			(or
				(goal g-next-strategy EARLYI-WALKING-TOWERS)
				(goal g-next-strategy MIDI-ELE-ARCHERS)))
        (goal g-current-unit-type SUPPORT-ELEPHANT-ARCHER)
		=>
		(up-modify-goal g-current-unit-score c:+ 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 7)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
		)

		(defrule
		(or
			(goal g-next-strategy FL-VULTURE)
			(or
				(goal g-next-strategy MIDF-FULL-SCOUTS)
				(or
					(goal g-next-strategy MIDF-SCOUT-SKIRM)
					(goal g-next-strategy MIDC-LIGHT))))
        (goal g-current-unit-type SUPPORT-SCOUT-CAVALRY)
		=>
		(up-modify-goal g-current-unit-score c:+ 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 7)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
		)
		(defrule
        (or
            (goal g-next-strategy EARLYI-HUSSARMY)
            (or
                (goal g-next-strategy MIDI-HUSSARS)
                (or
                    (goal g-next-strategy LATEI-TRASHUSSARS)
                    (goal g-next-strategy LATEI-HUSSARS))))
        (goal g-current-unit-type SUPPORT-SCOUT-CAVALRY)
		=>
		(up-modify-goal g-current-unit-score c:+ 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 7)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
		)

		(defrule
		(or
			(goal g-next-strategy FC-KRUSH)
			(or
				(goal g-next-strategy EARLYC-KNIGHTS)
				(or
					(goal g-next-strategy MIDC-KNIGHTS)
					(or
						(goal g-next-strategy EARLYI-PALASTORM)
						(or
							(goal g-next-strategy MIDI-PALADINS)
							(goal g-next-strategy BOOMC-KNIGHTS))))))
        (goal g-current-unit-type SUPPORT-KNIGHT)
		=>
		(up-modify-goal g-current-unit-score c:+ 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 7)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
		)

		(defrule
		(or
			(goal g-next-strategy FC-CRUSH)
			(or
				(goal g-next-strategy EARLYC-CAMELS)
				(or
					(goal g-next-strategy MIDC-CAMELS)
					(or
						(goal g-next-strategy EARLYI-CAMELSTORM)
						(or
							(goal g-next-strategy MIDI-CAMELS)
							(goal g-next-strategy BOOMC-CAMELS))))))
        (goal g-current-unit-type SUPPORT-CAMEL)
		=>
		(up-modify-goal g-current-unit-score c:+ 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 7)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
		)

		(defrule
		(or
			(goal g-next-strategy MIDC-CIRCUS)
			(or
				(goal g-next-strategy EARLYI-CIRCUS-STOMP)
				(goal g-next-strategy MIDI-CIRCUS)))
        (goal g-current-unit-type SUPPORT-BATTLE-ELEPHANT)
		=>
		(up-modify-goal g-current-unit-score c:+ 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 7)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
		)

		(defrule
		(or
			(goal g-next-strategy FC-MORLEY)
			(or
				(goal g-next-strategy MIDC-LANCERS)
				(goal g-next-strategy MIDI-LANCERS)))
        (goal g-current-unit-type SUPPORT-STEPPE-LANCER)
		=>
		(up-modify-goal g-current-unit-score c:+ 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 7)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
		)

		(defrule
		(or
			(goal g-next-strategy MIDC-SHRIVAMSHA)
			(or
                (goal g-next-strategy MIDI-SHRIVAMSHA)
                (goal g-next-strategy LATEI-SHRIVAMSHA)))
        (goal g-current-unit-type SUPPORT-SHRIVAMSHA-RIDER)
		=>
		(up-modify-goal g-current-unit-score c:+ 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 7)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
		)

		(defrule
		(or
			(goal g-next-strategy FC-CASTLE-DROP)
			(or
				(goal g-next-strategy MIDC-UNIQUE)
				(or
					(goal g-next-strategy EARLYI-UNIQUE)
					(or
						(goal g-next-strategy MIDI-UNIQUE)
						(goal g-next-strategy LATEI-UNIQUE)))))
        (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
		=>
		(up-modify-goal g-current-unit-score c:+ 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 7)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
		)

		(defrule
		(or
			(goal g-next-strategy FC-DEMON)
			(or
				(goal g-next-strategy MIDC-MONKS)
				(goal g-next-strategy MIDI-MONKS)))
        (goal g-current-unit-type SUPPORT-MONK)
		=>
		(up-modify-goal g-current-unit-score c:+ 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 7)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
		)

    ;----------------------------
    ;   Buildings Complete (8)
    ;----------------------------

        ;Barracks Completed
        ;If primary unit is trained at barracks, score added is smaller
        (defrule
        (up-compare-goal g-primary-unit-class == infantry-class)
        (or
            (up-compare-goal g-primary-unit != my-unique-unit)
            (research-completed ri-anarchy))
        =>
        (up-jump-rule 2)
        )
            (defrule
            (building-type-count barracks >= 1)
            (goal g-current-unit-building barracks)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            ; (up-log-data 0 CHAT-ADJUST-FOR-BUILDINGS-COMPLETE c: 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 8)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )
            (defrule
            (building-type-count barracks >= 2)
            (goal g-current-unit-building barracks)
            =>
            (up-modify-goal g-current-unit-score c:+ 50)
            ; (up-log-data 0 CHAT-ADJUST-FOR-BUILDINGS-COMPLETE c: 50)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 8)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 50)
            )
        (defrule
        (or
            (up-compare-goal g-primary-unit-class != infantry-class)
            (and
                (goal g-primary-unit my-unique-unit)
                (up-research-status c: ri-anarchy < research-complete)))
        =>
        (up-jump-rule 2)
        )
            (defrule
            (building-type-count barracks >= 1)
            (goal g-current-unit-building barracks)
            =>
            (up-modify-goal g-current-unit-score c:+ 100)
            ; (up-log-data 0 CHAT-ADJUST-FOR-BUILDINGS-COMPLETE c: 100)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 8)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
            )
            (defrule
            (building-type-count barracks >= 2)
            (goal g-current-unit-building barracks)
            =>
            (up-modify-goal g-current-unit-score c:+ 100)
            ; (up-log-data 0 CHAT-ADJUST-FOR-BUILDINGS-COMPLETE c: 100)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 8)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
            )

        ;Archery Ranges Completed
        ;If primary unit is trained at archery range, score added is smaller
        (defrule
        (up-compare-goal g-primary-unit != archer)
        (up-compare-goal g-primary-unit != skirmisher)
        (up-compare-goal g-primary-unit != cavalry-archer)
        (up-compare-goal g-primary-unit != hand-cannoneer)
        (up-compare-goal g-primary-unit != slinger)
        (up-compare-goal g-primary-unit != genitour)
        (up-compare-goal g-primary-unit != elephant-archer)
        =>
        (up-jump-rule 3)
        )
            (defrule
            (building-type-count archery-range >= 1)
            (goal g-current-unit-building archery-range)
            (up-compare-goal g-current-unit-type != SUPPORT-ELEPHANT-ARCHER)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            ; (up-log-data 0 CHAT-ADJUST-FOR-BUILDINGS-COMPLETE c: 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 8)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )
            (defrule
            (building-type-count archery-range >= 2)
            (goal g-current-unit-building archery-range)
            (up-compare-goal g-current-unit-type != SUPPORT-ELEPHANT-ARCHER)
            =>
            (up-modify-goal g-current-unit-score c:+ 50)
            ; (up-log-data 0 CHAT-ADJUST-FOR-BUILDINGS-COMPLETE c: 50)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 8)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 50)
            )
            (defrule
            (building-type-count archery-range >= 1)
            (goal g-current-unit-type SUPPORT-ELEPHANT-ARCHER)
            =>
            (up-modify-goal g-current-unit-score c:+ 150)
            ; (up-log-data 0 CHAT-ADJUST-FOR-BUILDINGS-COMPLETE c: 150)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 8)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 150)
            )

        (defrule
        (or
            (goal g-primary-unit archer)
            (or
                (goal g-primary-unit skirmisher)
                (or
                    (goal g-primary-unit cavalry-archer)
                    (or
                        (goal g-primary-unit hand-cannoneer)
                        (or
                            (goal g-primary-unit slinger)
                            (or
                                (goal g-primary-unit genitour)
                                (goal g-primary-unit elephant-archer)))))))
        =>
        (up-jump-rule 2)
        )
            (defrule
            (building-type-count archery-range >= 1)
            (goal g-current-unit-building archery-range)
            (up-compare-goal g-current-unit-type != SUPPORT-ELEPHANT-ARCHER)
            =>
            (up-modify-goal g-current-unit-score c:+ 100)
            ; (up-log-data 0 CHAT-ADJUST-FOR-BUILDINGS-COMPLETE c: 100)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 8)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
            )
            (defrule
            (building-type-count archery-range >= 2)
            (goal g-current-unit-building archery-range)
            =>
            (up-modify-goal g-current-unit-score c:+ 100)
            ; (up-log-data 0 CHAT-ADJUST-FOR-BUILDINGS-COMPLETE c: 100)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 8)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
            )

        ;Stables Completed
        ;If primary unit is trained at stable, score added is smaller
        (defrule
        (up-compare-goal g-primary-unit-class == cavalry-class)
        (or
            (up-compare-goal g-primary-unit != my-unique-unit)
            (research-completed ri-marauders))
        =>
        (up-jump-rule 3)
        )
            (defrule
            (building-type-count stable >= 1)
            (goal g-current-unit-building stable)
            (up-compare-goal g-current-unit-type != SUPPORT-BATTLE-ELEPHANT)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            ; (up-log-data 0 CHAT-ADJUST-FOR-BUILDINGS-COMPLETE c: 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 8)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )
            (defrule
            (building-type-count stable >= 2)
            (goal g-current-unit-building stable)
            (up-compare-goal g-current-unit-type != SUPPORT-BATTLE-ELEPHANT)
            =>
            (up-modify-goal g-current-unit-score c:+ 50)
            ; (up-log-data 0 CHAT-ADJUST-FOR-BUILDINGS-COMPLETE c: 50)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 8)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 50)
            )
            (defrule
            (building-type-count stable >= 1)
            (goal g-current-unit-type SUPPORT-BATTLE-ELEPHANT)
            =>
            (up-modify-goal g-current-unit-score c:+ 150)
            ; (up-log-data 0 CHAT-ADJUST-FOR-BUILDINGS-COMPLETE c: 150)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 8)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 150)
            )
        (defrule
        (or
            (up-compare-goal g-primary-unit-class != cavalry-class)
            (and
                (goal g-primary-unit my-unique-unit)
                (up-research-status c: ri-marauders < research-complete)))
        =>
        (up-jump-rule 2)
        )
            (defrule
            (building-type-count stable >= 1)
            (goal g-current-unit-building stable)
            (up-compare-goal g-current-unit-type != SUPPORT-BATTLE-ELEPHANT)
            =>
            (up-modify-goal g-current-unit-score c:+ 100)
            ; (up-log-data 0 CHAT-ADJUST-FOR-BUILDINGS-COMPLETE c: 100)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 8)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
            )
            (defrule
            (building-type-count barracks >= 2)
            (goal g-current-unit-building stable)
            =>
            (up-modify-goal g-current-unit-score c:+ 100)
            ; (up-log-data 0 CHAT-ADJUST-FOR-BUILDINGS-COMPLETE c: 100)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 8)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
            )

        (defrule
        (building-type-count stable >= 1)
        (or
            (goal g-current-unit-type SUPPORT-CAVALRY-ARCHER)
            (or
                (goal g-current-unit-type SUPPORT-GENITOUR)
                (and
                    (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
                    (or
                        (up-compare-const UNIQUE-UNIT-CLASS == cavalry-archer-class)
                        (up-compare-const UNIQUE-UNIT-CLASS == cavalry-cannon-class)))))
        =>
        (up-modify-goal g-current-unit-score c:+ 50)
        ; (up-log-data 0 CHAT-ADJUST-FOR-BUILDINGS-COMPLETE c: 50)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 8)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 50)
        )

        ;Castles and Kreposts Completed
        (defrule
        (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
        (up-get-fact building-type-count castle g-temp)
        (up-get-fact building-type-count krepost g-temp2)
        (up-modify-goal g-temp g:+ g-temp2)
        (up-compare-goal g-temp >= 1)
        (or
            (up-compare-goal g-primary-unit != my-unique-unit)
            (up-compare-goal g-temp >= 2))
        =>
        (up-modify-goal g-current-unit-score c:+ 300)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 8)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 300)
        )

    ;------------------------
    ;   Techs Complete (9)
    ;------------------------

        (defrule
        (goal g-current-unit-type SUPPORT-MILITIA)
        (research-completed ri-man-at-arms)
        =>
        (up-modify-goal g-current-unit-score c:+ 50)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-COMPLETE c: 50)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 9)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 50)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-MILITIA)
        (research-completed ri-long-swordsman)
        =>
        (up-modify-goal g-current-unit-score c:+ 100)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-COMPLETE c: 100)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 9)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-MILITIA)
        (research-completed ri-two-handed-swordsman)
        =>
        (up-modify-goal g-current-unit-score c:+ 100)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-COMPLETE c: 100)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 9)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-MILITIA)
        (research-completed ri-champion)
        =>
        (up-modify-goal g-current-unit-score c:+ 100)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-COMPLETE c: 100)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 9)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-SPEARMAN)
        (research-completed ri-pikeman)
        =>
        (up-modify-goal g-current-unit-score c:+ 100)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-COMPLETE c: 100)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 9)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-SPEARMAN)
        (research-completed ri-halberdier)
        =>
        (up-modify-goal g-current-unit-score c:+ 100)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-COMPLETE c: 100)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 9)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-ARCHER)
        (research-completed ri-crossbow)
        =>
        (up-modify-goal g-current-unit-score c:+ 100)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-COMPLETE c: 100)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 9)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-ARCHER)
        (research-completed ri-arbalest)
        =>
        (up-modify-goal g-current-unit-score c:+ 100)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-COMPLETE c: 100)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 9)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-SKIRMISHER)
        (research-completed ri-elite-skirmisher)
        =>
        (up-modify-goal g-current-unit-score c:+ 100)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-COMPLETE c: 100)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 9)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-SKIRMISHER)
        (research-completed ri-imperial-skirmisher)
        =>
        (up-modify-goal g-current-unit-score c:+ 100)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-COMPLETE c: 100)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 9)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-CAVALRY-ARCHER)
        (research-completed ri-heavy-cavalry-archer)
        =>
        (up-modify-goal g-current-unit-score c:+ 100)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-COMPLETE c: 100)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 9)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-ELEPHANT-ARCHER)
        (research-completed ri-elite-elephant-archer)
        =>
        (up-modify-goal g-current-unit-score c:+ 100)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-COMPLETE c: 100)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 9)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-HAND-CANNONEER)
        (research-completed ri-chemistry)
        =>
        (up-modify-goal g-current-unit-score c:+ 100)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-COMPLETE c: 100)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 9)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-SCOUT-CAVALRY)
        (research-completed ri-light-cavalry)
        =>
        (up-modify-goal g-current-unit-score c:+ 100)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-COMPLETE c: 100)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 9)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-SCOUT-CAVALRY)
        (research-completed ri-hussar)
        =>
        (up-modify-goal g-current-unit-score c:+ 100)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-COMPLETE c: 100)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 9)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-SPEARMAN)
        (research-completed ri-pikeman)
        =>
        (up-modify-goal g-current-unit-score c:+ 100)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-COMPLETE c: 100)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 9)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-KNIGHT)
        (research-completed ri-cavalier)
        =>
        (up-modify-goal g-current-unit-score c:+ 100)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-COMPLETE c: 100)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 9)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-KNIGHT)
        (research-completed ri-paladin)
        =>
        (up-modify-goal g-current-unit-score c:+ 100)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-COMPLETE c: 100)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 9)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-CAMEL)
        (research-completed ri-heavy-camel)
        =>
        (up-modify-goal g-current-unit-score c:+ 100)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-COMPLETE c: 100)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 9)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-CAMEL)
        (research-completed ri-imperial-camel)
        =>
        (up-modify-goal g-current-unit-score c:+ 100)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-COMPLETE c: 100)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 9)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-BATTLE-ELEPHANT)
        (research-completed ri-elite-battle-elephant)
        =>
        (up-modify-goal g-current-unit-score c:+ 100)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-COMPLETE c: 100)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 9)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-STEPPE-LANCER)
        (research-completed ri-elite-steppe-lancer)
        =>
        (up-modify-goal g-current-unit-score c:+ 100)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-COMPLETE c: 100)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 9)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-SHRIVAMSHA-RIDER)
        (research-completed ri-elite-shrivamsha-rider)
        =>
        (up-modify-goal g-current-unit-score c:+ 100)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-COMPLETE c: 100)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 9)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
        )
        (defrule
        (goal g-current-unit-attack-type MELEE-ATTACK)
        (research-completed ri-forging)
        =>
        (up-modify-goal g-current-unit-score c:+ 50)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-COMPLETE c: 50)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 9)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 50)
        )
        (defrule
        (goal g-current-unit-attack-type MELEE-ATTACK)
        (research-completed ri-iron-casting)
        =>
        (up-modify-goal g-current-unit-score c:+ 50)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-COMPLETE c: 50)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 9)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 50)
        )
        (defrule
        (goal g-current-unit-attack-type MELEE-ATTACK)
        (research-completed ri-blast-furnace)
        =>
        (up-modify-goal g-current-unit-score c:+ 50)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-COMPLETE c: 50)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 9)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 50)
        )
        (defrule
        (goal g-current-unit-attack-type PIERCE-ATTACK)
        (research-completed ri-fletching)
        =>
        (up-modify-goal g-current-unit-score c:+ 75)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-COMPLETE c: 75)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 9)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 75)
        )
        (defrule
        (goal g-current-unit-attack-type PIERCE-ATTACK)
        (research-completed ri-bodkin-arrow)
        =>
        (up-modify-goal g-current-unit-score c:+ 75)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-COMPLETE c: 75)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 9)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 75)
        )
        (defrule
        (goal g-current-unit-attack-type PIERCE-ATTACK)
        (research-completed ri-bracer)
        =>
        (up-modify-goal g-current-unit-score c:+ 75)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-COMPLETE c: 75)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 9)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 75)
        )
        (defrule
        (goal g-current-unit-armor-type INFANTRY-ARMOR)
        (research-completed ri-scale-mail)
        =>
        (up-modify-goal g-current-unit-score c:+ 50)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-COMPLETE c: 50)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 9)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 50)
        )
        (defrule
        (goal g-current-unit-armor-type INFANTRY-ARMOR)
        (research-completed ri-chain-mail)
        =>
        (up-modify-goal g-current-unit-score c:+ 50)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-COMPLETE c: 50)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 9)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 50)
        )
        (defrule
        (goal g-current-unit-armor-type INFANTRY-ARMOR)
        (research-completed ri-plate-mail)
        =>
        (up-modify-goal g-current-unit-score c:+ 50)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-COMPLETE c: 50)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 9)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 50)
        )
        (defrule
        (goal g-current-unit-armor-type ARCHER-ARMOR)
        (research-completed ri-padded-archer-armor)
        =>
        (up-modify-goal g-current-unit-score c:+ 25)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-COMPLETE c: 25)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 9)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 25)
        )
        (defrule
        (goal g-current-unit-armor-type ARCHER-ARMOR)
        (research-completed ri-leather-archer-armor)
        =>
        (up-modify-goal g-current-unit-score c:+ 25)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-COMPLETE c: 25)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 9)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 25)
        )
        (defrule
        (goal g-current-unit-armor-type ARCHER-ARMOR)
        (research-completed ri-ring-archer-armor)
        =>
        (up-modify-goal g-current-unit-score c:+ 25)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-COMPLETE c: 25)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 9)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 25)
        )
        (defrule
        (goal g-current-unit-armor-type CAVALRY-ARMOR)
        (research-completed ri-scale-barding)
        =>
        (up-modify-goal g-current-unit-score c:+ 50)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-COMPLETE c: 50)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 9)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 50)
        )
        (defrule
        (goal g-current-unit-armor-type CAVALRY-ARMOR)
        (research-completed ri-chain-barding)
        =>
        (up-modify-goal g-current-unit-score c:+ 50)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-COMPLETE c: 50)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 9)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 50)
        )
        (defrule
        (goal g-current-unit-armor-type CAVALRY-ARMOR)
        (research-completed ri-plate-barding)
        =>
        (up-modify-goal g-current-unit-score c:+ 50)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-COMPLETE c: 50)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 9)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 50)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-MILITIA)
        (research-completed ri-supplies)
        =>
        (up-modify-goal g-current-unit-score c:+ 50)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-COMPLETE c: 50)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 9)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 50)
        )
        (defrule
        (or
            (goal g-current-unit-type SUPPORT-ARCHER)
            (or
                (goal g-current-unit-type SUPPORT-ELEPHANT-ARCHER)
                (and
                    (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
                    (or
                        (up-compare-const UNIQUE-UNIT-CLASS == archery-class)
                        (up-compare-const UNIQUE-UNIT-CLASS == cavalry-archer-class)))))
        (research-completed ri-thumb-ring)
        =>
        (up-modify-goal g-current-unit-score c:+ 50)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-COMPLETE c: 50)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 9)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 50)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-CAVALRY-ARCHER)
        (research-completed ri-thumb-ring)
        =>
        (up-modify-goal g-current-unit-score c:+ 100)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-COMPLETE c: 100)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 9)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
        )
        (defrule
        (or
            (goal g-current-unit-type SUPPORT-SCOUT-CAVALRY)
            (or
                (goal g-current-unit-type SUPPORT-STEPPE-LANCER)
                (goal g-current-unit-type SUPPORT-SHRIVAMSHA-RIDER)))
        (research-completed ri-bloodlines)
        =>
        (up-modify-goal g-current-unit-score c:+ 100)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-COMPLETE c: 100)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 9)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
        )
        (defrule
        (or
            (goal g-current-unit-type SUPPORT-KNIGHT)
            (or
                (goal g-current-unit-type SUPPORT-CAMEL)
                (and
                    (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
                    (goal g-current-unit-armor-type CAVALRY-ARMOR))))
        (research-completed ri-bloodlines)
        =>
        (up-modify-goal g-current-unit-score c:+ 50)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-COMPLETE c: 50)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 9)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 50)
        )
        (defrule
        (or
            (goal g-current-unit-type SUPPORT-CAVALRY-ARCHER)
            (or
                (goal g-current-unit-type SUPPORT-GENITOUR)
                (and
                    (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
                    (or
                        (up-compare-const UNIQUE-UNIT-CLASS == cavalry-archer-class)
                        (up-compare-const UNIQUE-UNIT-CLASS == cavalry-cannon-class)))))
        (research-completed ri-bloodlines)
        =>
        (up-modify-goal g-current-unit-score c:+ 50)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-COMPLETE c: 50)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 9)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 50)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-CAVALRY-ARCHER)
        (up-compare-goal g-enemy-spearmen-count >= 6)
        (research-completed ri-parthian-tactics)
        =>
        (up-modify-goal g-current-unit-score c:+ 100)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 9)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
        )

    ;------------------------------------
    ;   Tech Not Available to Civ (10)
    ;------------------------------------

        (defrule
        (goal g-current-unit-type SUPPORT-MILITIA)
        (up-compare-const TWO-HANDED-SWORDSMAN-AVAILABLE == NO)
        (current-age < imperial-age)
        =>
        (up-modify-goal g-current-unit-score c:- 200)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-NOT-AVAILABLE c: -200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 10)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-MILITIA)
        (up-compare-const TWO-HANDED-SWORDSMAN-AVAILABLE == NO)
        (current-age == imperial-age)
        =>
        (up-modify-goal g-current-unit-score c:- 300)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-NOT-AVAILABLE c: -300)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 10)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -300)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-MILITIA)
        (up-compare-const CHAMPION-AVAILABLE == NO)
        (current-age < imperial-age)
        =>
        (up-modify-goal g-current-unit-score c:- 200)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-NOT-AVAILABLE c: -200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 10)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-MILITIA)
        (up-compare-const CHAMPION-AVAILABLE == NO)
        (current-age == imperial-age)
        =>
        (up-modify-goal g-current-unit-score c:- 300)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-NOT-AVAILABLE c: -300)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 10)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -300)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-SPEARMAN)
        (up-compare-const PIKEMAN-AVAILABLE == NO)
        =>
        (up-modify-goal g-current-unit-score c:- 600)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-NOT-AVAILABLE c: -600)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 10)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -600)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-SPEARMAN)
        (up-compare-const HALBERDIER-AVAILABLE == NO)
        (current-age < imperial-age)
        =>
        (up-modify-goal g-current-unit-score c:- 200)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-NOT-AVAILABLE c: -200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 10)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-SPEARMAN)
        (up-compare-const HALBERDIER-AVAILABLE == NO)
        (current-age == imperial-age)
        =>
        (up-modify-goal g-current-unit-score c:- 350)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-NOT-AVAILABLE c: -350)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 10)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -350)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-EAGLE-WARRIOR)
        (up-compare-const ELITE-EAGLE-WARRIOR-AVAILABLE == NO)
        (current-age < imperial-age)
        =>
        (up-modify-goal g-current-unit-score c:- 200)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-NOT-AVAILABLE c: -200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 10)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-EAGLE-WARRIOR)
        (up-compare-const ELITE-EAGLE-WARRIOR-AVAILABLE == NO)
        (current-age == imperial-age)
        =>
        (up-modify-goal g-current-unit-score c:- 350)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-NOT-AVAILABLE c: -350)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 10)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -350)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-ARCHER)
        (up-compare-const CROSSBOWMAN-AVAILABLE == NO)
        =>
        (up-modify-goal g-current-unit-score c:- 500)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-NOT-AVAILABLE c: -500)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 10)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -500)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-ARCHER)
        (up-compare-const ARBALEST-AVAILABLE == NO)
        (current-age < imperial-age)
        =>
        (up-modify-goal g-current-unit-score c:- 250)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-NOT-AVAILABLE c: -250)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 10)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -250)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-ARCHER)
        (up-compare-const ARBALEST-AVAILABLE == NO)
        (current-age == imperial-age)
        =>
        (up-modify-goal g-current-unit-score c:- 400)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-NOT-AVAILABLE c: -400)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 10)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -400)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-SKIRMISHER)
        (up-compare-const ELITE-SKIRMISHER-AVAILABLE == NO)
        =>
        (up-modify-goal g-current-unit-score c:- 600)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-NOT-AVAILABLE c: -600)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 10)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -600)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-CAVALRY-ARCHER)
        (up-compare-const HEAVY-CAVALRY-ARCHER-AVAILABLE == NO)
        (current-age < imperial-age)
        =>
        (up-modify-goal g-current-unit-score c:- 100)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-NOT-AVAILABLE c: -100)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 10)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -100)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-CAVALRY-ARCHER)
        (up-compare-const HEAVY-CAVALRY-ARCHER-AVAILABLE == NO)
        (current-age == imperial-age)
        =>
        (up-modify-goal g-current-unit-score c:- 250)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-NOT-AVAILABLE c: -250)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 10)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -250)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-ELEPHANT-ARCHER)
        (up-compare-const ELITE-ELEPHANT-ARCHER-AVAILABLE == NO)
        (current-age < imperial-age)
        =>
        (up-modify-goal g-current-unit-score c:- 100)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-NOT-AVAILABLE c: -100)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 10)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -100)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-ELEPHANT-ARCHER)
        (up-compare-const ELITE-ELEPHANT-ARCHER-AVAILABLE == NO)
        (current-age == imperial-age)
        =>
        (up-modify-goal g-current-unit-score c:- 250)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-NOT-AVAILABLE c: -250)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 10)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -250)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-SCOUT-CAVALRY)
        (up-compare-const LIGHT-CAVALRY-AVAILABLE == NO)
        =>
        (up-modify-goal g-current-unit-score c:- 800)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-NOT-AVAILABLE c: -800)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 10)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -800)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-SCOUT-CAVALRY)
        (up-compare-const HUSSAR-AVAILABLE == NO)
        (current-age < imperial-age)
        =>
        (up-modify-goal g-current-unit-score c:- 250)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-NOT-AVAILABLE c: -250)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 10)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -250)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-SCOUT-CAVALRY)
        (up-compare-const HUSSAR-AVAILABLE == NO)
        (current-age == imperial-age)
        =>
        (up-modify-goal g-current-unit-score c:- 400)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-NOT-AVAILABLE c: -400)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 10)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -400)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-KNIGHT)
        (up-compare-const CAVALIER-AVAILABLE == NO)
        (current-age < imperial-age)
        =>
        (up-modify-goal g-current-unit-score c:- 300)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-NOT-AVAILABLE c: -300)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 10)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -300)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-KNIGHT)
        (up-compare-const CAVALIER-AVAILABLE == NO)
        (current-age == imperial-age)
        =>
        (up-modify-goal g-current-unit-score c:- 400)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-NOT-AVAILABLE c: -400)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 10)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -400)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-KNIGHT)
        (up-compare-const PALADIN-AVAILABLE == NO)
        (current-age < imperial-age)
        =>
        (up-modify-goal g-current-unit-score c:- 100)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-NOT-AVAILABLE c: -100)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 10)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -100)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-KNIGHT)
        (up-compare-const PALADIN-AVAILABLE == NO)
        (current-age == imperial-age)
        =>
        (up-modify-goal g-current-unit-score c:- 200)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-NOT-AVAILABLE c: -200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 10)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-CAMEL)
        (up-compare-const HEAVY-CAMEL-AVAILABLE == NO)
        (current-age < imperial-age)
        =>
        (up-modify-goal g-current-unit-score c:- 250)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-NOT-AVAILABLE c: -250)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 10)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -250)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-CAMEL)
        (up-compare-const HEAVY-CAMEL-AVAILABLE == NO)
        (current-age == imperial-age)
        =>
        (up-modify-goal g-current-unit-score c:- 400)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-NOT-AVAILABLE c: -400)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 10)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -400)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-BATTLE-ELEPHANT)
        (up-compare-const ELITE-BATTLE-ELEPHANT-AVAILABLE == NO)
        (current-age < imperial-age)
        =>
        (up-modify-goal g-current-unit-score c:- 200)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-NOT-AVAILABLE c: -200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 10)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-BATTLE-ELEPHANT)
        (up-compare-const ELITE-BATTLE-ELEPHANT-AVAILABLE == NO)
        (current-age == imperial-age)
        =>
        (up-modify-goal g-current-unit-score c:- 350)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-NOT-AVAILABLE c: -350)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 10)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -350)
        )
        (defrule
        (goal g-current-unit-attack-type MELEE-ATTACK)
        (up-compare-const BLAST-FURNACE-AVAILABLE == NO)
        (current-age < imperial-age)
        =>
        (up-modify-goal g-current-unit-score c:- 100)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-NOT-AVAILABLE c: -100)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 10)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -100)
        )
        (defrule
        (goal g-current-unit-attack-type MELEE-ATTACK)
        (up-compare-const BLAST-FURNACE-AVAILABLE == NO)
        (current-age == imperial-age)
        =>
        (up-modify-goal g-current-unit-score c:- 200)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-NOT-AVAILABLE c: -200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 10)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
        )
        (defrule
        (goal g-current-unit-attack-type PIERCE-ATTACK)
        (up-compare-const BRACER-AVAILABLE == NO)
        (current-age < imperial-age)
        =>
        (up-modify-goal g-current-unit-score c:- 200)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-NOT-AVAILABLE c: -200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 10)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
        )
        (defrule
        (goal g-current-unit-attack-type PIERCE-ATTACK)
        (up-compare-const BRACER-AVAILABLE == NO)
        (current-age == imperial-age)
        =>
        (up-modify-goal g-current-unit-score c:- 350)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-NOT-AVAILABLE c: -350)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 10)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -350)
        )
        (defrule
        (goal g-current-unit-armor-type INFANTRY-ARMOR)
        (up-compare-const CHAIN-MAIL-ARMOR-AVAILABLE == NO)
        =>
        (up-modify-goal g-current-unit-score c:- 300)
        ; (up-log-data 0 CHAT-ADJUST-FOR-TECHS-NOT-AVAILABLE c: -300)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 10)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -300)
        )
        (defrule
        (goal g-current-unit-armor-type INFANTRY-ARMOR)
        (up-compare-const PLATE-MAIL-ARMOR-AVAILABLE == NO)
        (current-age < imperial-age)
        =>
        (up-modify-goal g-current-unit-score c:- 100)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 10)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -100)
        )
        (defrule
        (goal g-current-unit-armor-type INFANTRY-ARMOR)
        (up-compare-const PLATE-MAIL-ARMOR-AVAILABLE == NO)
        (current-age == imperial-age)
        =>
        (up-modify-goal g-current-unit-score c:- 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 10)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
        )
        (defrule
        (goal g-current-unit-armor-type ARCHER-ARMOR)
        (up-compare-const LEATHER-ARCHER-ARMOR-AVAILABLE == NO)
        =>
        (up-modify-goal g-current-unit-score c:- 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 10)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
        )
        (defrule
        (goal g-current-unit-armor-type ARCHER-ARMOR)
        (up-compare-const RING-ARCHER-ARMOR-AVAILABLE == NO)
        (current-age == imperial-age)
        =>
        (up-modify-goal g-current-unit-score c:- 100)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 10)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -100)
        )
        (defrule
        (goal g-current-unit-armor-type CAVALRY-ARMOR)
        (up-compare-const CHAIN-BARDING-ARMOR-AVAILABLE == NO)
        =>
        (up-modify-goal g-current-unit-score c:- 300)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 10)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -300)
        )
        (defrule
        (goal g-current-unit-armor-type CAVALRY-ARMOR)
        (up-compare-const PLATE-BARDING-ARMOR-AVAILABLE == NO)
        (current-age < imperial-age)
        =>
        (up-modify-goal g-current-unit-score c:- 100)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 10)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -100)
        )
        (defrule
        (goal g-current-unit-armor-type CAVALRY-ARMOR)
        (up-compare-const PLATE-BARDING-ARMOR-AVAILABLE == NO)
        (current-age == imperial-age)
        =>
        (up-modify-goal g-current-unit-score c:- 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 10)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
        )
        (defrule
        (goal g-current-unit-armor-type INFANTRY-ARMOR)
        (up-compare-const CHAIN-MAIL-ARMOR-AVAILABLE == NO)
        =>
        (up-modify-goal g-current-unit-score c:- 300)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 10)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -300)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-MILITIA)
        (up-compare-const SUPPLIES-AVAILABLE == NO)
        (current-age < imperial-age)
        =>
        (up-modify-goal g-current-unit-score c:- 100)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 10)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -100)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-MILITIA)
        (up-compare-const SUPPLIES-AVAILABLE == NO)
        (current-age == imperial-age)
        =>
        (up-modify-goal g-current-unit-score c:- 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 10)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
        )
        (defrule
        (goal g-current-unit-attack-type PIERCE-ATTACK)
        (up-compare-goal g-current-unit-type != SUPPORT-SKIRMISHER)
        (up-compare-goal g-current-unit-type != SUPPORT-CAVALRY-ARCHER)
        (up-compare-const THUMB-RING-AVAILABLE == NO)
        =>
        (up-modify-goal g-current-unit-score c:- 150)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 10)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -150)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-CAVALRY-ARCHER)
        (up-compare-const THUMB-RING-AVAILABLE == NO)
        =>
        (up-modify-goal g-current-unit-score c:- 300)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 10)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -300)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-CAVALRY-ARCHER)
        (up-compare-const PARTHIAN-TACTICS-AVAILABLE == NO)
        (current-age < imperial-age)
        =>
        (up-modify-goal g-current-unit-score c:- 100)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 10)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -100)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-CAVALRY-ARCHER)
        (up-compare-const PARTHIAN-TACTICS-AVAILABLE == NO)
        (current-age == imperial-age)
        =>
        (up-modify-goal g-current-unit-score c:- 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 10)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
        )
        (defrule
        (goal g-current-unit-armor-type CAVALRY-ARMOR)
        (up-compare-goal g-current-unit-type != SUPPORT-BATTLE-ELEPHANT)
        (up-compare-const BLOODLINES-AVAILABLE == NO)
        =>
        (up-modify-goal g-current-unit-score c:- 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 10)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
        )

    ;---------------------------------------
    ;   Adjustments for Team Bonuses (11)
    ;---------------------------------------

        (defrule
        (goal g-current-unit-building archery-range)
        (or
            (civ-selected briton)
            (players-civ any-ally briton))
        =>
        (up-modify-goal g-current-unit-score c:+ 100)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 11)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
        )

        (defrule
        (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
        (or
            (civ-selected berbers)
            (players-civ any-ally berbers))
        =>
        (up-modify-goal g-current-unit-score c:+ 50)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 11)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 50)
        )

        (defrule
        (goal g-current-unit-building archery-range)
        (or
            (civ-selected briton)
            (players-civ any-ally briton))
        =>
        (up-modify-goal g-current-unit-score c:+ 100)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 11)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
        )

        (defrule
        (goal g-current-unit-type SUPPORT-MONK)
        (or
            (civ-selected byzantine)
            (players-civ any-ally byzantine))
        =>
        (up-modify-goal g-current-unit-score c:+ 50)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 11)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 50)
        )

        (defrule
        (goal g-current-unit-type SUPPORT-MONK)
        (or
            (civ-selected lithuanians)
            (players-civ any-ally lithuanians))
        =>
        (up-modify-goal g-current-unit-score c:+ 50)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 11)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 50)
        )
        
        (defrule
        (goal g-current-unit-building barracks)
        (or
            (civ-selected gothic)
            (players-civ any-ally gothic))
        =>
        (up-modify-goal g-current-unit-score c:+ 100)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 11)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
        )

        (defrule
        (or
            (goal g-current-unit-type SUPPORT-ELEPHANT-ARCHER)
            (or 
                (goal g-current-unit-type SUPPORT-CAMEL)
                (goal g-current-unit-type SUPPORT-BATTLE-ELEPHANT)))
        (or
            (civ-selected gurjaras)
            (players-civ any-ally gurjaras))
        =>
        (up-modify-goal g-current-unit-score c:+ 100)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 11)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
        )

        (defrule
        (or
            (goal g-current-unit-type SUPPORT-SCOUT-CAVALRY)
            (goal g-current-unit-type SUPPORT-CAMEL))
        (or
            (civ-selected indian)
            (players-civ any-ally indian))
        =>
        (up-modify-goal g-current-unit-score c:+ 100)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 11)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
        )

        (defrule
        (goal g-current-unit-building stable)
        (or
            (civ-selected hun)
            (players-civ any-ally hun))
        =>
        (up-modify-goal g-current-unit-score c:+ 100)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 11)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
        )

        (defrule
        (goal g-current-unit-type SUPPORT-KNIGHT)
        (or
            (up-compare-goal g-enemy-foot-archers-count >= 6)
            (up-compare-goal g-enemy-cavalry-archers-count >= 6))
        (or
            (civ-selected persian)
            (players-civ any-ally persian))
        =>
        (up-modify-goal g-current-unit-score c:+ 100)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 11)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
        )

        (defrule
        (goal g-current-unit-type SUPPORT-ARCHER)
        (or
            (civ-selected saracen)
            (players-civ any-ally saracen))
        =>
        (up-modify-goal g-current-unit-score c:+ 100)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 11)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
        )

        (defrule
        (goal g-current-unit-type SUPPORT-MONK)
        (or
            (civ-selected teutonic)
            (players-civ any-ally teutonic))
        =>
        (up-modify-goal g-current-unit-score c:+ 50)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 11)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 50)
        )

        (defrule
        (goal g-current-unit-type SUPPORT-HAND-CANNONEER)
        (or
            (civ-selected turkish)
            (players-civ any-ally turkish))
        =>
        (up-modify-goal g-current-unit-score c:+ 100)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 11)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
        )

        (defrule
        (goal g-current-unit-type SUPPORT-SKIRMISHER)
        (or
            (civ-selected vietnamese)
            (players-civ any-ally vietnamese))
        =>
        (up-modify-goal g-current-unit-score c:+ 50)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 11)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 50)
        )

    ;--------------------------------------------
    ;   Adjustments Against Specific Civs (12)
    ;--------------------------------------------

        (defrule
        (goal g-current-unit-type SUPPORT-MILITIA)
        (or
            (players-civ target-player aztec)
            (or
                (players-civ target-player incan)
                (players-civ target-player gothic)))
        =>
        (up-modify-goal g-current-unit-score c:+ 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 12)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-MILITIA)
        (or
            (players-civ target-player briton)
            (or
                (players-civ target-player chinese)
                (or
                    (players-civ target-player ethiopian)
                    (or
                        (players-civ target-player korean)
                        (players-civ target-player vietnamese)))))
        =>
        (up-modify-goal g-current-unit-score c:- 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 12)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-MILITIA)
        (or
            (players-civ target-player cumans)
            (or
                (players-civ target-player mongol)
                (players-civ target-player tatars)))
        =>
        (up-modify-goal g-current-unit-score c:- 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 12)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
        )

        (defrule
        (goal g-current-unit-type SUPPORT-SPEARMAN)
        (or
            (players-civ target-player bengalis)
            (players-civ target-player frankish))
        =>
        (up-modify-goal g-current-unit-score c:+ 300)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 12)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 300)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-SPEARMAN)
        (or
            (players-civ target-player berbers)
            (or
                (players-civ target-player bulgarians)
                (or
                    (players-civ target-player burgundians)
                    (or
                        (players-civ target-player burmese)
                        (or
                            (players-civ target-player gurjaras)
                            (or
                                (players-civ target-player hun)
                                (players-civ target-player khmer)))))))
        =>
        (up-modify-goal g-current-unit-score c:+ 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 12)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-SPEARMAN)
        (or
            (players-civ target-player lithuanians)
            (or
                (players-civ target-player persian)
                (or
                    (players-civ target-player poles)
                    (or
                        (players-civ target-player spanish)
                        (players-civ target-player teutonic)))))
        =>
        (up-modify-goal g-current-unit-score c:+ 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 12)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-SPEARMAN)
        (or
            (players-civ target-player briton)
            (or
                (players-civ target-player gothic)
                (or
                    (players-civ target-player ethiopian)
                    (or
                        (players-civ target-player sicilians)
                        (or
                            (players-civ target-player vietnamese)
                            (players-civ target-player viking))))))
        =>
        (up-modify-goal g-current-unit-score c:- 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 12)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-SPEARMAN)
        (or
            (players-civ target-player aztec)
            (or
                (players-civ target-player incan)
                (players-civ target-player mayan)))
        =>
        (up-modify-goal g-current-unit-score c:- 600)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 12)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -600)
        )

        (defrule
        (goal g-current-unit-type SUPPORT-EAGLE-WARRIOR)
        (players-civ target-player mayan)
        =>
        (up-modify-goal g-current-unit-score c:+ 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 12)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-EAGLE-WARRIOR)
        (or
            (players-civ target-player aztec)
            (or
                (players-civ target-player bulgarians)
                (or
                    (players-civ target-player byzantine)
                    (or
                        (players-civ target-player celtic)
                        (or
                            (players-civ target-player japanese)
                            (or
                                (players-civ target-player malian)
                                (players-civ target-player teutonic)))))))
        =>
        (up-modify-goal g-current-unit-score c:- 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 12)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-EAGLE-WARRIOR)
        (players-civ target-player viking)
        =>
        (up-modify-goal g-current-unit-score c:- 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 12)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-EAGLE-WARRIOR)
        (players-civ target-player gothic)
        =>
        (up-modify-goal g-current-unit-score c:- 300)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 12)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -300)
        )

        (defrule
        (goal g-current-unit-type SUPPORT-CONDOTTIERO)
        (or
            (players-civ target-player indian)
            (players-civ target-player turkish))
        =>
        (up-modify-goal g-current-unit-score c:+ 300)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 12)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 300)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-CONDOTTIERO)
        (or
            (players-civ target-player bohemians)
            (or
                (players-civ target-player italian)
                (or
                    (players-civ target-player portuguese)
                    (players-civ target-player spanish))))
        =>
        (up-modify-goal g-current-unit-score c:+ 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 12)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
        )

        (defrule
        (goal g-current-unit-type SUPPORT-ARCHER)
        (or
            (players-civ target-player burmese)
            (players-civ target-player turkish))
        =>
        (up-modify-goal g-current-unit-score c:+ 300)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 12)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 300)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-ARCHER)
        (or
            (players-civ target-player celtic)
            (or
                (players-civ target-player teutonic)
                (players-civ target-player indian)))
        =>
        (up-modify-goal g-current-unit-score c:+ 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 12)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-ARCHER)
        (or
            (players-civ target-player korean)
            (players-civ target-player vietnamese))
        =>
        (up-modify-goal g-current-unit-score c:- 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 12)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-ARCHER)
        (players-civ target-player gothic)
        =>
        (up-modify-goal g-current-unit-score c:- 300)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 12)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -300)
        )
        
        (defrule
        (goal g-current-unit-type SUPPORT-SKIRMISHER)
        (or
            (players-civ target-player briton)
            (or
                (players-civ target-player ethiopian)
                (or
                    (players-civ target-player korean)
                    (or
                        (players-civ target-player malay)
                        (or
                            (players-civ target-player mayan)
                            (or
                                (players-civ target-player tatars)
                                (players-civ target-player vietnamese)))))))
        =>
        (up-modify-goal g-current-unit-score c:+ 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 12)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-SKIRMISHER)
        (or
            (players-civ target-player bulgarians)
            (or
                (players-civ target-player burmese)
                (or
                    (players-civ target-player celtic)
                    (or
                        (players-civ target-player frankish)
                        (or
                            (players-civ target-player gothic)
                            (or
                                (players-civ target-player gurjaras)
                                (players-civ target-player italian)))))))
        =>
        (up-modify-goal g-current-unit-score c:- 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 12)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-SKIRMISHER)
        (or
            (players-civ target-player sicilians)
            (or
                (players-civ target-player spanish)
                (players-civ target-player teutonic)))
        =>
        (up-modify-goal g-current-unit-score c:- 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 12)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
        )
        
        (defrule
        (goal g-current-unit-type SUPPORT-CAVALRY-ARCHER)
        (or
            (players-civ target-player bulgarians)
            (players-civ target-player teutonic))
        =>
        (up-modify-goal g-current-unit-score c:+ 300)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 12)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 300)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-CAVALRY-ARCHER)
        (or
            (players-civ target-player burmese)
            (or
                (players-civ target-player celtic)
                (or
                    (players-civ target-player dravidians)
                    (or
                        (players-civ target-player gothic)
                        (or
                            (players-civ target-player turkish)
                            (players-civ target-player viking))))))
        =>
        (up-modify-goal g-current-unit-score c:+ 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 12)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-CAVALRY-ARCHER)
        (or
            (players-civ target-player briton)
            (or
                (players-civ target-player berbers)
                (or
                    (players-civ target-player gurjaras)
                    (or
                        (players-civ target-player indian)
                        (players-civ target-player vietnamese)))))
        =>
        (up-modify-goal g-current-unit-score c:- 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 12)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
        )
        
        (defrule
        (goal g-current-unit-type SUPPORT-ELEPHANT-ARCHER)
        (or
            (players-civ target-player briton)
            (or
                (players-civ target-player burmese)
                (or
                    (players-civ target-player chinese)
                    (or
                        (players-civ target-player ethiopian)
                        (or
                            (players-civ target-player mayan)
                            (players-civ target-player turkish))))))
        =>
        (up-modify-goal g-current-unit-score c:+ 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 12)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-ELEPHANT-ARCHER)
        (or
            (players-civ target-player bohemians)
            (or
                (players-civ target-player byzantine)
                (or
                    (players-civ target-player dravidians)
                    (or
                        (players-civ target-player gothic)
                        (or
                            (players-civ target-player indian)
                            (or
                                (players-civ target-player italian)
                                (players-civ target-player japanese)))))))
        =>
        (up-modify-goal g-current-unit-score c:- 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 12)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-ELEPHANT-ARCHER)
        (or
            (players-civ target-player teutonic)
            (players-civ target-player vietnamese))
        =>
        (up-modify-goal g-current-unit-score c:- 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 12)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-ELEPHANT-ARCHER)
        (or
            (players-civ target-player aztec)
            (or
                (players-civ target-player berbers)
                (or
                    (players-civ target-player lithuanians)
                    (players-civ target-player spanish))))
        =>
        (up-modify-goal g-current-unit-score c:- 300)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 12)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -300)
        )

        (defrule
        (goal g-current-unit-type SUPPORT-HAND-CANNONEER)
        (players-civ target-player celtic)
        =>
        (up-modify-goal g-current-unit-score c:+ 400)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 12)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 400)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-HAND-CANNONEER)
        (players-civ target-player bulgarians)
        =>
        (up-modify-goal g-current-unit-score c:+ 300)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 12)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 300)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-HAND-CANNONEER)
        (or
            (players-civ target-player aztec)
            (or
                (players-civ target-player gothic)
                (or
                    (players-civ target-player incan)
                    (or
                        (players-civ target-player japanese)
                        (or
                            (players-civ target-player malay)
                            (or
                                (players-civ target-player mayan)
                                (players-civ target-player teutonic)))))))
        =>
        (up-modify-goal g-current-unit-score c:+ 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 12)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-HAND-CANNONEER)
        (players-civ target-player viking)
        =>
        (up-modify-goal g-current-unit-score c:+ 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 12)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-HAND-CANNONEER)
        (or
            (players-civ target-player byzantine)
            (or
                (players-civ target-player lithuanians)
                (or
                    (players-civ target-player sicilians)
                    (players-civ target-player vietnamese))))
        =>
        (up-modify-goal g-current-unit-score c:- 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 12)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-HAND-CANNONEER)
        (players-civ any-enemy italian)
        =>
        (up-modify-goal g-current-unit-score c:- 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 12)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
        )

        (defrule
        (goal g-current-unit-type SUPPORT-SLINGER)
        (players-civ target-player celtic)
        =>
        (up-modify-goal g-current-unit-score c:+ 400)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 12)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 400)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-SLINGER)
        (players-civ target-player bulgarians)
        =>
        (up-modify-goal g-current-unit-score c:+ 300)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 12)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 300)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-SLINGER)
        (or
            (players-civ target-player aztec)
            (or
                (players-civ target-player gothic)
                (or
                    (players-civ target-player incan)
                    (or
                        (players-civ target-player japanese)
                        (or
                            (players-civ target-player malay)
                            (players-civ target-player viking))))))
        =>
        (up-modify-goal g-current-unit-score c:+ 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 12)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-SLINGER)
        (or
            (players-civ target-player byzantine)
            (or
                (players-civ target-player lithuanians)
                (or
                    (players-civ target-player sicilians)
                    (players-civ target-player vietnamese))))
        =>
        (up-modify-goal g-current-unit-score c:- 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 12)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
        )
        
        (defrule
        (goal g-current-unit-type SUPPORT-GENITOUR)
        (players-civ target-player tatars)
        =>
        (up-modify-goal g-current-unit-score c:+ 300)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 12)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 300)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-GENITOUR)
        (or
            (players-civ target-player briton)
            (or
                (players-civ target-player cumans)
                (or
                    (players-civ target-player ethiopian)
                    (or
                        (players-civ target-player korean)
                        (or
                            (players-civ target-player malay)
                            (or
                                (players-civ target-player mayan)
                                (players-civ target-player mongol)))))))
        =>
        (up-modify-goal g-current-unit-score c:+ 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 12)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-GENITOUR)
        (players-civ target-player vietnamese)
        =>
        (up-modify-goal g-current-unit-score c:+ 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 12)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-GENITOUR)
        (or
            (players-civ target-player bulgarians)
            (or
                (players-civ target-player burmese)
                (or
                    (players-civ target-player celtic)
                    (or
                        (players-civ target-player frankish)
                        (or
                            (players-civ target-player gothic)
                            (or
                                (players-civ target-player gurjaras)
                                (players-civ target-player indian)))))))
        =>
        (up-modify-goal g-current-unit-score c:- 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 12)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-GENITOUR)
        (or
            (players-civ target-player italian)
            (or
                (players-civ target-player saracen)
                (or
                    (players-civ target-player sicilians)
                    (or
                        (players-civ target-player spanish)
                        (players-civ target-player teutonic)))))
        =>
        (up-modify-goal g-current-unit-score c:- 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 12)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
        )

        (defrule
        (goal g-current-unit-type SUPPORT-SCOUT-CAVALRY)
        (or
            (players-civ target-player aztec)
            (or
                (players-civ target-player bohemians)
                (players-civ target-player spanish)))
        =>
        (up-modify-goal g-current-unit-score c:+ 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 12)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-SCOUT-CAVALRY)
        (or
            (players-civ target-player gothic)
            (or
                (players-civ target-player gurjaras)
                (or
                    (players-civ target-player indian)
                    (or
                        (players-civ target-player italian)
                        (players-civ target-player saracen)))))
        =>
        (up-modify-goal g-current-unit-score c:- 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 12)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
        )
        
        (defrule
        (goal g-current-unit-type SUPPORT-KNIGHT)
        (players-civ target-player aztec)
        =>
        (up-modify-goal g-current-unit-score c:+ 300)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 12)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 300)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-KNIGHT)
        (players-civ target-player mayan)
        =>
        (up-modify-goal g-current-unit-score c:+ 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 12)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-KNIGHT)
        (or
            (players-civ target-player gurjaras)
            (or
                (players-civ target-player indian)
                (or
                    (players-civ target-player italian)
                    (or
                        (players-civ target-player saracen)
                        (players-civ target-player teutonic)))))
        =>
        (up-modify-goal g-current-unit-score c:- 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 12)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
        )
        
        (defrule
        (goal g-current-unit-type SUPPORT-CAMEL)
        (or
            (players-civ target-player berbers)
            (or
                (players-civ target-player bulgarians)
                (or
                    (players-civ target-player burgundians)
                    (or
                        (players-civ target-player burmese)
                        (players-civ target-player spanish)))))
        =>
        (up-modify-goal g-current-unit-score c:+ 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 12)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-CAMEL)
        (players-civ target-player sicilians)
        =>
        (up-modify-goal g-current-unit-score c:- 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 12)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-CAMEL)
        (or
            (players-civ target-player aztec)
            (or
                (players-civ target-player incan)
                (players-civ target-player mayan)))
        =>
        (up-modify-goal g-current-unit-score c:- 400)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 12)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -400)
        )

        
        (defrule
        (goal g-current-unit-type SUPPORT-BATTLE-ELEPHANT)
        (or
            (players-civ target-player gurjaras)
            (or
                (players-civ target-player malian)
                (or
                    (players-civ target-player mongol)
                    (or
                        (players-civ target-player poles)
                        (or
                            (players-civ target-player turkish)
                            (players-civ target-player viking))))))
        =>
        (up-modify-goal g-current-unit-score c:+ 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 12)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-BATTLE-ELEPHANT)
        (or
            (players-civ target-player bohemians)
            (or
                (players-civ target-player byzantine)
                (or
                    (players-civ target-player celtic)
                    (or
                        (players-civ target-player japanese)
                        (or
                            (players-civ target-player lithuanians)
                            (or
                                (players-civ target-player spanish)
                                (players-civ target-player teutonic)))))))
        =>
        (up-modify-goal g-current-unit-score c:- 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 12)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-BATTLE-ELEPHANT)
        (players-civ target-player aztec)
        =>
        (up-modify-goal g-current-unit-score c:- 300)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 12)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -300)
        )

        (defrule
        (goal g-current-unit-type SUPPORT-STEPPE-LANCER)
        (players-civ target-player aztec)
        =>
        (up-modify-goal g-current-unit-score c:+ 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 12)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-STEPPE-LANCER)
        (or
            (players-civ target-player gurjaras)
            (or
                (players-civ target-player indian)
                (or
                    (players-civ target-player italian)
                    (players-civ target-player saracen))))
        =>
        (up-modify-goal g-current-unit-score c:- 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 12)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
        )
        
        (defrule
        (goal g-current-unit-type SUPPORT-SHRIVAMSHA-RIDER)
        (or
            (players-civ target-player aztec)
            (players-civ target-player mayan))
        =>
        (up-modify-goal g-current-unit-score c:+ 300)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 12)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 300)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-SHRIVAMSHA-RIDER)
        (or
            (players-civ target-player hun)
            (or
                (players-civ target-player mongol)
                (players-civ target-player tatars)))
        =>
        (up-modify-goal g-current-unit-score c:+ 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 12)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-SHRIVAMSHA-RIDER)
        (or
            (players-civ target-player bulgarians)
            (or
                (players-civ target-player celtic)
                (or
                    (players-civ target-player italian)
                    (players-civ target-player teutonic))))
        =>
        (up-modify-goal g-current-unit-score c:- 200)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 12)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
        )
        (defrule
        (goal g-current-unit-type SUPPORT-SHRIVAMSHA-RIDER)
        (or
            (players-civ target-player gurjaras)
            (or
                (players-civ target-player italian)
                (players-civ target-player saracen)))
        =>
        (up-modify-goal g-current-unit-score c:- 300)
        (up-log-data 0 CHAT-COUNTER-TYPE c: 12)
        (up-log-data 0 CHAT-COUNTER-AMOUNT c: -300)
        )

    ;-----------------------------------
    ;   Civ Specific Adjustments (13)
    ;-----------------------------------

		#load-if-defined AZTEC-CIV

            (defrule
            (or
                (goal g-current-unit-type SUPPORT-MILITIA)
                (or
                    (goal g-current-unit-type SUPPORT-EAGLE-WARRIOR)
                    (goal g-current-unit-type SUPPORT-CONDOTTIERO)))
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-SPEARMAN)
            =>
            (up-modify-goal g-current-unit-score c:+ 100)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-SKIRMISHER)
            =>
            (up-modify-goal g-current-unit-score c:+ 150)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 150)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-SKIRMISHER)
            (goal g-primary-unit my-unique-unit)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-MONK)
            =>
            (up-modify-goal g-current-unit-score c:+ 400)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 400)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-SKIRMISHER)
            (research-completed ri-atlatl)
            =>
            (up-modify-goal g-current-unit-score c:+ 50)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 50)
            )

            (defrule
            (goal g-current-unit-armor-type INFANTRY-ARMOR)
            (research-completed ri-garland-wars)
            =>
            (up-modify-goal g-current-unit-score c:+ 100)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (players-civ target-player gothic)
            =>
            (up-modify-goal g-current-unit-score c:+ 300)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 300)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player aztec)
                (or
                    (players-civ target-player bulgarians)
                    (or
                        (players-civ target-player celtic)
                        (or
                            (players-civ target-player dravidians)
                            (players-civ target-player viking)))))
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player briton)
                (or
                    (players-civ target-player cumans)
                    (or
                        (players-civ target-player ethiopian)
                        (or
                            (players-civ target-player korean)
                            (or
                                (players-civ target-player mongol)
                                (or
                                    (players-civ target-player tatars)
                                    (players-civ target-player vietnamese)))))))
            =>
            (up-modify-goal g-current-unit-score c:- 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
            )

		#end-if

        #load-if-defined BENGALIS-CIV

            (defrule
            (goal g-current-unit-type SUPPORT-ELEPHANT-ARCHER)
            =>
            (up-modify-goal g-current-unit-score c:+ 300)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 300)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-SCOUT-CAVALRY)
            (goal g-primary-unit my-unique-unit)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )

            (defrule
            (or
                (goal g-current-unit-type SUPPORT-ELEPHANT-ARCHER)
                (or
                    (goal g-current-unit-type SUPPORT-BATTLE-ELEPHANT)
                    (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)))
            (research-completed ri-paiks)
            =>
            (up-modify-goal g-current-unit-score c:+ 100)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
            )
            
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (players-civ target-player burmese)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (players-civ target-player italian)
            =>
            (up-modify-goal g-current-unit-score c:- 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (players-civ target-player berbers)
            =>
            (up-modify-goal g-current-unit-score c:- 300)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: -300)
            )

        #end-if

		#load-if-defined BERBERS-CIV

            (defrule
            (goal g-current-unit-type SUPPORT-SCOUT-CAVALRY)
            =>
            (up-modify-goal g-current-unit-score c:+ 100)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-SCOUT-CAVALRY)
            (goal g-primary-unit my-unique-unit)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-KNIGHT)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-CAMEL)
            =>
            (up-modify-goal g-current-unit-score c:+ 250)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 250)
            )
            
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (players-civ target-player mongol)
            =>
            (up-modify-goal g-current-unit-score c:+ 400)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 400)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player bengalis)
                (or
                    (players-civ target-player cumans)
                    (or
                        (players-civ target-player hun)
                        (or
                            (players-civ target-player korean)
                            (or
                                (players-civ target-player magyar)
                                (or
                                    (players-civ target-player spanish)
                                    (players-civ target-player tatars)))))))
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player byzantine)
                (or
                    (players-civ target-player gothic)
                    (or
                        (players-civ target-player gurjaras)
                        (or
                            (players-civ target-player indian)
                            (or
                                (players-civ target-player italian)
                                (or
                                    (players-civ target-player saracen)
                                    (players-civ target-player vietnamese)))))))
            =>
            (up-modify-goal g-current-unit-score c:- 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
            )

		#end-if

        #load-if-defined BOHEMIANS-CIV

            (defrule
            (goal g-current-unit-type SUPPORT-SPEARMAN)
            =>
            (up-modify-goal g-current-unit-score c:+ 150)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 150)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-SPEARMAN)
            (goal g-primary-unit my-unique-unit)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-HAND-CANNONEER)
            =>
            (up-modify-goal g-current-unit-score c:+ 150)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 150)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-MONK)
            =>
            (up-modify-goal g-current-unit-score c:+ 300)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 300)
            )
            
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player magyar)
                (players-civ target-player mongol))
            =>
            (up-modify-goal g-current-unit-score c:- 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
            )

        #end-if

		#load-if-defined BRITON-CIV

            (defrule
            (goal g-current-unit-type SUPPORT-SPEARMAN)
            (goal g-primary-unit my-unique-unit)
            =>
            (up-modify-goal g-current-unit-score c:+ 300)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 300)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-ARCHER)
            =>
            (up-modify-goal g-current-unit-score c:+ 400)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 400)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-SKIRMISHER)
            =>
            (up-modify-goal g-current-unit-score c:+ 50)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 50)
            )
            
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player burmese)
                (players-civ target-player turkish))
            =>
            (up-modify-goal g-current-unit-score c:+ 300)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 300)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player celtic)
                (players-civ target-player teutonic))
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player gothic)
                (players-civ target-player vietnamese))
            =>
            (up-modify-goal g-current-unit-score c:- 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
            )

		#end-if

		#load-if-defined BULGARIANS-CIV

            (defrule
            (goal g-current-unit-type SUPPORT-MILITIA)
            =>
            (up-modify-goal g-current-unit-score c:+ 250)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 250)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-SCOUT-CAVALRY)
            =>
            (up-modify-goal g-current-unit-score c:+ 100)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-KNIGHT)
            =>
            (up-modify-goal g-current-unit-score c:+ 100)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
            )

            (defrule
            (goal g-current-unit-armor-type CAVALRY-ARMOR)
            (research-completed ri-stirrups)
            =>
            (up-modify-goal g-current-unit-score c:+ 100)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-MILITIA)
            (research-completed ri-bagains)
            =>
            (up-modify-goal g-current-unit-score c:+ 100)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-MILITIA)
            (research-completed ri-bagains)
            (or
                (up-compare-goal g-enemy-swordsmen-count >= 5)
                (or
                    (up-compare-goal g-enemy-eagle-warriors-count >= 5)
                    (or
                        (up-compare-goal g-enemy-huskarls-count >= 5)
                        (or
                            (up-compare-goal g-enemy-samurai-count >= 5)
                            (up-compare-goal g-enemy-jaguar-warriors-count >= 5)))))
            =>
            (set-goal g-temp 300)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-MILITIA)
            (research-completed ri-stirrups)
            (or
                (up-compare-goal g-enemy-light-cavalry-count >= 5)
                (or
                    (up-compare-goal g-enemy-heavy-cavalry-count >= 5)
                    (or
                        (up-compare-goal g-enemy-camels-count >= 5)
                        (or
                            (up-compare-goal g-enemy-mamelukes-count >= 5)
                            (up-compare-goal g-enemy-cataphracts-count >= 5)))))
            =>
            (set-goal g-temp 200)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )

		#end-if

		#load-if-defined BURGUNDIANS-CIV

            (defrule
            (goal g-current-unit-type SUPPORT-HAND-CANNONEER)
            =>
            (up-modify-goal g-current-unit-score c:+ 100)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-SCOUT-CAVALRY)
            =>
            (up-modify-goal g-current-unit-score c:+ 100)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-KNIGHT)
            =>
            (up-modify-goal g-current-unit-score c:+ 250)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 250)
            )
            
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player aztec)
                (or
                    (players-civ target-player dravidians)
                    (or
                        (players-civ target-player incan)
                        (or
                            (players-civ target-player malay)
                            (players-civ target-player mayan)))))
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player gurjaras)
                (or
                    (players-civ target-player indian)
                    (or
                        (players-civ target-player italian)
                        (players-civ target-player saracen))))
            =>
            (up-modify-goal g-current-unit-score c:- 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
            )

		#end-if

		#load-if-defined BURMESE-CIV

            (defrule
            (goal g-current-unit-type SUPPORT-MILITIA)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-SCOUT-CAVALRY)
            (goal g-primary-unit my-unique-unit)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-BATTLE-ELEPHANT)
            =>
            (up-modify-goal g-current-unit-score c:+ 150)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 150)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-MONK)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-BATTLE-ELEPHANT)
            (research-completed ri-howdah)
            =>
            (up-modify-goal g-current-unit-score c:+ 50)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 50)
            )

            (defrule
            (goal g-current-unit-armor-type CAVALRY-ARMOR)
            (research-completed ri-manipur-cavalry)
            (or
                (up-compare-goal g-enemy-foot-archers-count >= 5)
                (or
                    (up-compare-goal g-enemy-skirmishers-count >= 5)
                    (or
                        (up-compare-goal g-enemy-cavalry-archers-count >= 5)
                        (or
                            (up-compare-goal g-enemy-hand-cannoneers-count >= 5)
                            (up-compare-goal g-enemy-genoese-crossbowmen-count >= 5)))))
            =>
            (set-goal g-temp 300)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player burmese)
                (players-civ target-player turkish))
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player berbers)
                (or
                    (players-civ target-player briton)
                    (or
                        (players-civ target-player indian)
                        (or
                            (players-civ target-player italian)
                            (players-civ target-player saracen)))))
            =>
            (up-modify-goal g-current-unit-score c:- 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
            )

		#end-if
		
		#load-if-defined BYZANTINE-CIV

            (defrule
            (or
                (goal g-current-unit-type SUPPORT-SPEARMAN)
                (goal g-current-unit-type SUPPORT-SKIRMISHER))
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-CAMEL)
            =>
            (up-modify-goal g-current-unit-score c:+ 100)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (research-completed ri-logistica)
            =>
            (up-modify-goal g-current-unit-score c:+ 100)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
            )
            
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player aztec)
                (players-civ target-player gothic))
            =>
            (up-modify-goal g-current-unit-score c:+ 400)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 400)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player bulgarians)
                (or
                    (players-civ target-player burmese)
                    (or
                        (players-civ target-player celtic)
                        (or
                            (players-civ target-player dravidians)
                            (or
                                (players-civ target-player indian)
                                (or
                                    (players-civ target-player incan)
                                    (players-civ target-player japanese)))))))
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player malay)
                (or
                    (players-civ target-player mayan)
                    (or
                        (players-civ target-player slavic)
                        (players-civ target-player viking))))
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player briton)
                (or
                    (players-civ target-player chinese)
                    (or
                        (players-civ target-player cumans)
                        (or
                            (players-civ target-player frankish)
                            (or
                                (players-civ target-player incan)
                                (or
                                    (players-civ target-player korean)
                                    (players-civ target-player mongol)))))))
            =>
            (up-modify-goal g-current-unit-score c:- 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player persian)
                (players-civ target-player tatars))
            =>
            (up-modify-goal g-current-unit-score c:- 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
            )

		#end-if

		#load-if-defined CELTIC-CIV

            (defrule
            (goal g-current-unit-armor-type INFANTRY-ARMOR)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-SPEARMAN)
            (goal g-primary-unit my-unique-unit)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )

		#end-if

		#load-if-defined CHINESE-CIV

            (defrule
            (or
                (goal g-current-unit-type SUPPORT-SPEARMAN)
                (goal g-current-unit-type SUPPORT-SCOUT-CAVALRY))
            (goal g-primary-unit my-unique-unit)
            =>
            (up-modify-goal g-current-unit-score c:+ 300)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 300)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player burmese)
                (players-civ target-player turkish))
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player gothic)
                (players-civ target-player vietnamese))
            =>
            (up-modify-goal g-current-unit-score c:- 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
            )

		#end-if

		#load-if-defined CUMANS-CIV

            (defrule
            (or
                (goal g-current-unit-building archery-range)
                (goal g-current-unit-building stable))
            =>
            (up-modify-goal g-current-unit-score c:+ 100)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
            )

            (defrule
            (or
                (goal g-current-unit-type SUPPORT-CAVALRY-ARCHER)
                (or
                    (goal g-current-unit-type SUPPORT-GENITOUR)
                    (goal g-current-unit-armor-type CAVALRY-ARMOR)))
            =>
            (up-modify-goal g-current-unit-score c:+ 100)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-SCOUT-CAVALRY)
            (goal g-primary-unit my-unique-unit)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )

            (defrule
            (or
                (goal g-current-unit-type SUPPORT-SCOUT-CAVALRY)
                (or
                    (goal g-current-unit-type SUPPORT-CAVALRY-ARCHER)
                    (goal g-current-unit-type SUPPORT-STEPPE-LANCER)))
            =>
            (up-modify-goal g-current-unit-score c:+ 50)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 50)
            )
            
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player burmese)
                (or
                    (players-civ target-player celtic)
                    (or
                        (players-civ target-player frankish)
                        (players-civ target-player turkish))))
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player berbers)
                (or
                    (players-civ target-player byzantine)
                    (or
                        (players-civ target-player gurjaras)
                        (or
                            (players-civ target-player italian)
                            (players-civ target-player vietnamese)))))
            =>
            (up-modify-goal g-current-unit-score c:- 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
            )

		#end-if

        #load-if-defined DRAVIDIANS-CIV
        
            (defrule
            (or
                (goal g-current-unit-type SUPPORT-MILITIA)
                (goal g-current-unit-type SUPPORT-CONDOTTIERO))
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )
        
            (defrule
            (goal g-current-unit-type SUPPORT-SPEARMAN)
            =>
            (up-modify-goal g-current-unit-score c:+ 100)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
            )
        
            (defrule
            (goal g-current-unit-type SUPPORT-SKIRMISHER)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-SKIRMISHER)
            (goal g-primary-unit my-unique-unit)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )
        
            (defrule
            (goal g-current-unit-type SUPPORT-ELEPHANT-ARCHER)
            =>
            (up-modify-goal g-current-unit-score c:+ 250)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 250)
            )

            (defrule
            (goal g-current-unit-attack-type MELEE-ATTACK)
            (research-completed ri-wootz-steel)
            =>
            (up-modify-goal g-current-unit-score c:+ 100)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
            )
            
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (players-civ target-player gothic)
            =>
            (up-modify-goal g-current-unit-score c:+ 300)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 300)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player celtic)
                (players-civ target-player viking))
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player briton)
                (or
                    (players-civ target-player cumans)
                    (or
                        (players-civ target-player hun)
                        (or
                            (players-civ target-player mongol)
                            (players-civ target-player tatars)))))
            =>
            (up-modify-goal g-current-unit-score c:- 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
            )

        #end-if

		#load-if-defined ETHIOPIAN-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-SPEARMAN)
            (current-age <= castle-age)
            =>
            (up-modify-goal g-current-unit-score c:+ 100)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
            )
        
            (defrule
            (goal g-current-unit-type SUPPORT-ARCHER)
            =>
            (up-modify-goal g-current-unit-score c:+ 300)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 300)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-SKIRMISHER)
            (goal g-primary-unit my-unique-unit)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )
            
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player briton)
                (or
                    (players-civ target-player cumans)
                    (or
                        (players-civ target-player hun)
                        (or
                            (players-civ target-player mongol)
                            (players-civ target-player tatars)))))
            =>
            (up-modify-goal g-current-unit-score c:- 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
            )

		#end-if

		#load-if-defined FRANKISH-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-SCOUT-CAVALRY)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )
        
            (defrule
            (goal g-current-unit-type SUPPORT-KNIGHT)
            =>
            (up-modify-goal g-current-unit-score c:+ 400)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 400)
            )
        
            (defrule
            (or
                (goal g-current-unit-type SUPPORT-SCOUT-CAVALRY)
                (goal g-current-unit-type SUPPORT-KNIGHT))
            (goal g-primary-unit my-unique-unit)
            =>
            (up-modify-goal g-current-unit-score c:+ 400)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 400)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (research-completed ri-bearded-axe)
            =>
            (up-modify-goal g-current-unit-score c:+ 75)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 75)
            )
            
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player briton)
                (or
                    (players-civ target-player ethiopian)
                    (or
                        (players-civ target-player ethiopian)
                        (players-civ target-player mayan))))
            =>
            (up-modify-goal g-current-unit-score c:- 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
            )

            (defrule
            (goal g-current-unit-building barracks)
            (or
                (goal g-primary-unit-class archery-class)
                (or
                    (goal g-primary-unit-class archery-cannon-class)
                    (goal g-primary-unit my-unique-unit)))
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )

            (defrule
            (up-compare-goal g-current-unit-type != SUPPORT-CAVALRY-ARCHER)
            (up-compare-goal g-current-unit-type != SUPPORT-GENITOUR)
            (or
                (goal g-current-unit-armor-type ARCHER-ARMOR)
                (goal g-primary-unit my-unique-unit))
            (goal g-primary-unit-class infantry-class)
            (up-compare-goal g-primary-unit != my-unique-unit)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )

		#end-if

		#load-if-defined GOTHIC-CIV

            (defrule
            (goal g-current-unit-type SUPPORT-SPEARMAN)
            (goal g-primary-unit my-unique-unit)
            =>
            (up-modify-goal g-current-unit-score c:+ 300)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 300)
            )
        
            (defrule
            (goal g-current-unit-armor-type INFANTRY-ARMOR)
            =>
            (up-modify-goal g-current-unit-score c:+ 300)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 300)
            )
            
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (players-civ target-player mayan)
            =>
            (up-modify-goal g-current-unit-score c:+ 400)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 400)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player briton)
                (or
                    (players-civ target-player ethiopian)
                    (or
                        (players-civ target-player korean)
                        (players-civ target-player vietnamese))))
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player bulgarians)
                (or
                    (players-civ target-player burmese)
                    (or
                        (players-civ target-player celtic)
                        (or
                            (players-civ target-player frankish)
                            (players-civ target-player spanish)))))
            =>
            (up-modify-goal g-current-unit-score c:- 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
            )

		#end-if

        #load-if-defined GURJARAS-CIV

            (defrule
            (or
                (goal g-current-unit-type SUPPORT-MILITIA)
                (goal g-current-unit-type SUPPORT-CONDOTTIERO))
            =>
            (up-modify-goal g-current-unit-score c:+ 100)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-SCOUT-CAVALRY)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-CAMEL)
            =>
            (up-modify-goal g-current-unit-score c:+ 300)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 300)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-CAMEL)
            (goal g-primary-unit my-unique-unit)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )
            
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player aztec)
                (players-civ target-player celtic))
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player gurjaras)
                (players-civ target-player teutonic))
            =>
            (up-modify-goal g-current-unit-score c:- 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
            )

            (defrule
            (goal g-current-unit-building barracks)
            (or
                (goal g-primary-unit-class archery-class)
                (or
                    (goal g-primary-unit-class archery-cannon-class)
                    (or
                        (goal g-primary-unit elephant-archer)
                        (goal g-primary-unit my-unique-unit))))
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )

            (defrule
            (up-compare-goal g-current-unit-type != SUPPORT-CAVALRY-ARCHER)
            (up-compare-goal g-current-unit-type != SUPPORT-GENITOUR)
            (or
                (goal g-current-unit-armor-type ARCHER-ARMOR)
                (goal g-primary-unit my-unique-unit))
            (goal g-primary-unit-class infantry-class)
            (up-compare-goal g-primary-unit != my-unique-unit)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )

        #end-if

		#load-if-defined HUN-CIV

            (defrule
            (or
                (goal g-current-unit-type SUPPORT-ARCHER)
                (or
                    (goal g-current-unit-type SUPPORT-SKIRMISHER)
                    (goal g-current-unit-type SUPPORT-CAVALRY-ARCHER)))
            (goal g-primary-unit my-unique-unit)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-CAVALRY-ARCHER)
            =>
            (up-modify-goal g-current-unit-score c:+ 250)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 250)
            )
            
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player briton)
                (or
                    (players-civ target-player chinese)
                    (or
                        (players-civ target-player ethiopian)
                        (or
                            (players-civ target-player korean)
                            (or
                                (players-civ target-player mayan)
                                (or
                                    (players-civ target-player mongol)
                                    (players-civ target-player vietnamese)))))))
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player gurjaras)
                (or
                    (players-civ target-player indian)
                    (or
                        (players-civ target-player italian)
                        (or
                            (players-civ target-player saracen)
                            (players-civ target-player spanish)))))
            =>
            (up-modify-goal g-current-unit-score c:- 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
            )

		#end-if

		#load-if-defined INCAN-CIV

            (defrule
            (goal g-current-unit-type SUPPORT-SKIRMISHER)
            (goal g-primary-unit my-unique-unit)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )

            (defrule
            (or
                (goal g-current-unit-type SUPPORT-EAGLE-WARRIOR)
                (or
                    (goal g-current-unit-type SUPPORT-SLINGER)
                    (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)))
            (research-completed ri-fabric-shields)
            =>
            (up-modify-goal g-current-unit-score c:+ 50)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 50)
            )

		#end-if

		#load-if-defined INDIAN-CIV
        
            #load-if-defined DE-AVAILABLE

                (defrule
                (goal g-current-unit-type SUPPORT-CAMEL)
                (goal g-primary-unit my-unique-unit)
                =>
                (up-modify-goal g-current-unit-score c:+ 200)
                (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
                (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
                )
                
            #end-if

            (defrule
            (goal g-current-unit-type SUPPORT-HAND-CANNONEER)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-CAMEL)
            =>
            (up-modify-goal g-current-unit-score c:+ 300)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-HAND-CANNONEER)
            (research-completed ri-shatagni)
            =>
            (up-modify-goal g-current-unit-score c:+ 100)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
            )
            
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player briton)
                (or
                    (players-civ target-player chinese)
                    (or
                        (players-civ target-player ethiopian)
                        (or
                            (players-civ target-player italian)
                            (or
                                (players-civ target-player korean)
                                (players-civ target-player mayan))))))
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player bulgarians)
                (or
                    (players-civ target-player burmese)
                    (or
                        (players-civ target-player celtic)
                        (or
                            (players-civ target-player frankish)
                            (or
                                (players-civ target-player persian)
                                (or
                                    (players-civ target-player slavic)
                                    (players-civ target-player spanish)))))))
            =>
            (up-modify-goal g-current-unit-score c:- 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (players-civ target-player teutonic)
            =>
            (up-modify-goal g-current-unit-score c:- 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
            )

		#end-if

		#load-if-defined ITALIAN-CIV

            (defrule
            (or
                (goal g-current-unit-type SUPPORT-CONDOTTIERO)
                (goal g-current-unit-type SUPPORT-ARCHER))
            =>
            (up-modify-goal g-current-unit-score c:+ 100)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-HAND-CANNONEER)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-SCOUT-CAVALRY)
            (goal g-primary-unit my-unique-unit)
            =>
            (up-modify-goal g-current-unit-score c:+ 300)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 300)
            )

            (defrule
            (or
                (goal g-current-unit-type SUPPORT-CONDOTTIERO)
                (or
                    (goal g-current-unit-type SUPPORT-ARCHER)
                    (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)))
            (research-completed ri-pavise)
            =>
            (up-modify-goal g-current-unit-score c:+ 50)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 50)
            )
            
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player frankish)
                (or
                    (players-civ target-player hun)
                    (or
                        (players-civ target-player spanish)
                        (players-civ target-player turkish))))
            =>
            (up-modify-goal g-current-unit-score c:+ 300)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 300)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player berbers)
                (or
                    (players-civ target-player burgundians)
                    (or
                        (players-civ target-player burmese)
                        (or
                            (players-civ target-player khmer)
                            (or
                                (players-civ target-player magyar)
                                (or
                                    (players-civ target-player mongol)
                                    (players-civ target-player persian)))))))
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player tatars)
                (players-civ target-player teutonic))
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player malay)
                (players-civ target-player vietnamese))
            =>
            (up-modify-goal g-current-unit-score c:- 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player aztec)
                (or
                    (players-civ target-player incan)
                    (players-civ target-player mayan)))
            =>
            (up-modify-goal g-current-unit-score c:- 400)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: -400)
            )

		#end-if

		#load-if-defined JAPANESE-CIV

            (defrule
            (goal g-current-unit-armor-type INFANTRY-ARMOR)
            =>
            (up-modify-goal g-current-unit-score c:+ 300)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 300)
            )
            
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player celtic)
                (or
                    (players-civ target-player dravidians)
                    (or
                        (players-civ target-player gothic)
                        (players-civ target-player viking))))
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player briton)
                (or
                    (players-civ target-player cumans)
                    (or
                        (players-civ target-player ethiopian)
                        (or
                            (players-civ target-player hun)
                            (or
                                (players-civ target-player mayan)
                                (or
                                    (players-civ target-player mongol)
                                    (players-civ target-player tatars)))))))
            =>
            (up-modify-goal g-current-unit-score c:- 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
            )

		#end-if

		#load-if-defined KHMER-CIV

            (defrule
            (goal g-current-unit-type SUPPORT-BATTLE-ELEPHANT)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-BATTLE-ELEPHANT)
            (research-completed ri-tusk-swords)
            =>
            (up-modify-goal g-current-unit-score c:+ 100)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (research-completed ri-double-crossbow)
            =>
            (up-modify-goal g-current-unit-score c:+ 100)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
            )
            
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player aztec)
                (or
                    (players-civ target-player bengalis)
                    (or
                        (players-civ target-player bohemians)
                        (or
                            (players-civ target-player burmese)
                            (or
                                (players-civ target-player celtic)
                                (or
                                    (players-civ target-player gurjaras)
                                    (players-civ target-player indian)))))))
            =>
            (up-modify-goal g-current-unit-score c:- 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player italian)
                (or
                    (players-civ target-player lithuanians)
                    (or
                        (players-civ target-player magyar)
                        (or
                            (players-civ target-player malian)
                            (players-civ target-player mongol)))))
            =>
            (up-modify-goal g-current-unit-score c:- 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
            )

            (defrule
            (or
                (goal g-current-unit-building barracks)
                (goal g-current-unit-type SUPPORT-BATTLE-ELEPHANT))
            (or
                (goal g-primary-unit-class archery-class)
                (or
                    (goal g-primary-unit-class archery-cannon-class)
                    (goal g-primary-unit my-unique-unit)))
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )

            (defrule
            (up-compare-goal g-current-unit-type != SUPPORT-CAVALRY-ARCHER)
            (up-compare-goal g-current-unit-type != SUPPORT-GENITOUR)
            (or
                (goal g-current-unit-armor-type ARCHER-ARMOR)
                (goal g-primary-unit my-unique-unit))
            (goal g-primary-unit-class infantry-class)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )

            (defrule
            (up-compare-goal g-current-unit-type != SUPPORT-BATTLE-ELEPHANT)
            (goal g-current-unit-building stable)
            (or
                (goal g-primary-unit-class cavalry-archer-class)
                (goal g-primary-unit my-unique-unit))
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )

            (defrule
            (or
                (goal g-current-unit-type SUPPORT-CAVALRY-ARCHER)
                (or
                    (goal g-current-unit-type SUPPORT-GENITOUR)
                    (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)))
            (goal g-primary-unit-class cavalry-class)
            (up-compare-goal g-primary-unit != battle-elephant)
            (up-compare-goal g-primary-unit != my-unique-unit)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )

		#end-if

		#load-if-defined KOREAN-CIV

            (defrule
            (goal g-current-unit-armor-type ARCHER-ARMOR)
            =>
            (up-modify-goal g-current-unit-score c:+ 100)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
            )

            (defrule
            (or
                (goal g-current-unit-type SUPPORT-ARCHER)
                (or
                    (goal g-current-unit-type SUPPORT-SKIRMISHER)
                    (or
                        (goal g-current-unit-type SUPPORT-CAVALRY-ARCHER)
                        (goal g-current-unit-type SUPPORT-GENITOUR))))
            =>
            (up-modify-goal g-current-unit-score c:+ 50)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 50)
            )
            
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player burmese)
                (or
                    (players-civ target-player teutonic)
                    (players-civ target-player turkish)))
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player berbers)
                (or
                    (players-civ target-player gothic)
                    (or
                        (players-civ target-player indian)
                        (or
                            (players-civ target-player italian)
                            (or
                                (players-civ target-player saracen)
                                (or
                                    (players-civ target-player turkish)
                                    (players-civ target-player vietnamese)))))))
            =>
            (up-modify-goal g-current-unit-score c:- 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
            )

		#end-if

		#load-if-defined LITHUANIANS-CIV

            (defrule
            (or
                (goal g-current-unit-type SUPPORT-SPEARMAN)
                (goal g-current-unit-type SUPPORT-SKIRMISHER))
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-SKIRMISHER)
            (goal g-primary-unit my-unique-unit)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )

            (defrule
            (or
                (goal g-current-unit-type SUPPORT-SPEARMAN)
                (goal g-current-unit-type SUPPORT-SKIRMISHER))
            (research-completed ri-tower-shields)
            =>
            (up-modify-goal g-current-unit-score c:+ 50)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 50)
            )
            
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (players-civ target-player teutonic)
            =>
            (up-modify-goal g-current-unit-score c:+ 400)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 400)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player frankish)
                (or
                    (players-civ target-player lithuanians)
                    (or
                        (players-civ target-player persian)
                        (or
                            (players-civ target-player slavic)
                            (players-civ target-player spanish)))))
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player gurjaras)
                (or
                    (players-civ target-player indian)
                    (or
                        (players-civ target-player italian)
                        (players-civ target-player saracen))))
            =>
            (up-modify-goal g-current-unit-score c:- 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
            )

		#end-if

		#load-if-defined MAGYAR-CIV

            (defrule
            (goal g-current-unit-attack-type MELEE-ATTACK)
            (up-compare-goal g-current-unit-type != SUPPORT-SPEARMAN)
            =>
            (up-modify-goal g-current-unit-score c:+ 100)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-ARCHER)
            (goal g-primary-unit my-unique-unit)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-SKIRMISHER)
            (goal g-primary-unit my-unique-unit)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-CAVALRY-ARCHER)
            =>
            (up-modify-goal g-current-unit-score c:+ 100)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
            )

            (defrule
            (or
                (goal g-current-unit-type SUPPORT-ARCHER)
                (or
                    (goal g-current-unit-type SUPPORT-SKIRMISHER)
                    (goal g-current-unit-type SUPPORT-CAVALRY-ARCHER)))
            (goal g-primary-unit my-unique-unit)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-CAVALRY-ARCHER)
            (goal g-primary-unit my-unique-unit)
            =>
            (up-modify-goal g-current-unit-score c:+ 100)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-SCOUT-CAVALRY)
            =>
            (up-modify-goal g-current-unit-score c:+ 100)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-CAVALRY-ARCHER)
            (research-completed ri-recurve-bow)
            =>
            (up-modify-goal g-current-unit-score c:+ 75)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 75)
            )
            
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player bohemians)
                (or
                    (players-civ target-player celtic)
                    (or
                        (players-civ target-player ethiopian)
                        (or
                            (players-civ target-player korean)
                            (or
                                (players-civ target-player mongol)
                                (players-civ target-player portuguese))))))
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player gurjaras)
                (or
                    (players-civ target-player indian)
                    (or
                        (players-civ target-player italian)
                        (players-civ target-player saracen))))
            =>
            (up-modify-goal g-current-unit-score c:- 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
            )

		#end-if

		#load-if-defined MALAY-CIV

            (defrule
            (goal g-current-unit-type SUPPORT-MILITIA)
            =>
            (up-modify-goal g-current-unit-score c:+ 100)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-SKIRMISHER)
            (goal g-primary-unit my-unique-unit)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-BATTLE-ELEPHANT)
            =>
            (up-modify-goal g-current-unit-score c:+ 300)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 300)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-MILITIA)
            (research-completed ri-forced-levy)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )
            
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (players-civ target-player bulgarians)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player briton)
                (or
                    (players-civ target-player ethiopian)
                    (or
                        (players-civ target-player korean)
                        (or
                            (players-civ target-player mayan)
                            (players-civ target-player vietnamese)))))
            =>
            (up-modify-goal g-current-unit-score c:- 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
            )

		#end-if

		#load-if-defined MALIAN-CIV

            (defrule
            (goal g-current-unit-armor-type INFANTRY-ARMOR)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )
            
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player celtic)
                (or
                    (players-civ target-player slavic)
                    (players-civ target-player teutonic)))
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player briton)
                (or
                    (players-civ target-player ethiopian)
                    (or
                        (players-civ target-player korean)
                        (or
                            (players-civ target-player mayan)
                            (players-civ target-player vietnamese)))))
            =>
            (up-modify-goal g-current-unit-score c:- 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
            )

            (defrule
            (goal g-current-unit-building barracks)
            (or
                (goal g-primary-unit-class archery-class)
                (or
                    (goal g-primary-unit-class archery-cannon-class)
                    (goal g-primary-unit my-unique-unit)))
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )

            (defrule
            (up-compare-goal g-current-unit-type != SUPPORT-CAVALRY-ARCHER)
            (up-compare-goal g-current-unit-type != SUPPORT-GENITOUR)
            (or
                (goal g-current-unit-armor-type ARCHER-ARMOR)
                (goal g-primary-unit my-unique-unit))
            (goal g-primary-unit-class infantry-class)
            (up-compare-goal g-primary-unit != my-unique-unit)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )

            (defrule
            (goal g-current-unit-armor-type CAVALRY-ARMOR)
            (research-completed ri-farimba)
            =>
            (up-modify-goal g-current-unit-score c:+ 150)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 150)
            )

		#end-if

		#load-if-defined MAYAN-CIV

            (defrule
            (goal g-current-unit-type SUPPORT-EAGLE-WARRIOR)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-ARCHER)
            =>
            (up-modify-goal g-current-unit-score c:+ 300)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 300)
            )

            (defrule
            (or
                (goal g-current-unit-type SUPPORT-SPEARMAN)
                (goal g-current-unit-type SUPPORT-EAGLE-WARRIOR))
            (goal g-primary-unit my-unique-unit)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )
            
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (goal g-primary-unit eagle-warrior)
            =>
            (up-modify-goal g-current-unit-score c:+ 100)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-SKIRMISHER)
            (research-completed ri-hulche-javelineers)
            =>
            (up-modify-goal g-current-unit-score c:+ 50)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 50)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-EAGLE-WARRIOR)
            (research-completed ri-el-dorado)
            =>
            (up-modify-goal g-current-unit-score c:+ 100)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player burmese)
                (or
                    (players-civ target-player celtic)
                    (players-civ target-player turkish)))
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (players-civ target-player vietnamese)
            =>
            (up-modify-goal g-current-unit-score c:- 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
            )

		#end-if

		#load-if-defined MONGOL-CIV

            (defrule
            (goal g-current-unit-type SUPPORT-CAVALRY-ARCHER)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )

            (defrule
            (or
                (goal g-current-unit-type SUPPORT-SCOUT-CAVALRY)
                (goal g-current-unit-type SUPPORT-STEPPE-LANCER))
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-SCOUT-CAVALRY)
            (goal g-primary-unit my-unique-unit)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )
            
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (players-civ target-player celtic)
            =>
            (up-modify-goal g-current-unit-score c:+ 300)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 300)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player aztec)
                (or
                    (players-civ target-player bohemians)
                    (or
                        (players-civ target-player bulgarians)
                        (or
                            (players-civ target-player dravidians)
                            (or
                                (players-civ target-player incan)
                                (or
                                    (players-civ target-player korean)
                                    (players-civ target-player mayan)))))))
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player portuguese)
                (or
                    (players-civ target-player sicilians)
                    (or
                        (players-civ target-player slavic)
                        (or
                            (players-civ target-player spanish)
                            (or
                                (players-civ target-player teutonic)
                                (or
                                    (players-civ target-player turkish)
                                    (players-civ target-player viking)))))))
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player briton)
                (or
                    (players-civ target-player gurjaras)
                    (or
                        (players-civ target-player italian)
                        (or
                            (players-civ target-player saracen)
                            (players-civ target-player vietnamese)))))
            =>
            (up-modify-goal g-current-unit-score c:- 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (players-civ target-player berbers)
            =>
            (up-modify-goal g-current-unit-score c:- 300)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: -300)
            )

		#end-if

		#load-if-defined PERSIAN-CIV

            (defrule
            (or
                (goal g-current-unit-type SUPPORT-ARCHER)
                (or
                    (goal g-current-unit-type SUPPORT-SKIRMISHER)
                    (goal g-current-unit-type SUPPORT-CAVALRY-ARCHER)))
            (goal g-primary-unit my-unique-unit)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-ARCHER)
            (research-completed ri-kamandaran)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (research-completed ri-mahouts)
            =>
            (up-modify-goal g-current-unit-score c:+ 100)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
            )
            
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (players-civ target-player turkish)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player bengalis)
                (or
                    (players-civ target-player bohemians)
                    (or
                        (players-civ target-player burmese)
                        (or
                            (players-civ target-player celtic)
                            (or
                                (players-civ target-player gothic)
                                (or
                                    (players-civ target-player italian)
                                    (players-civ target-player japanese)))))))
            =>
            (up-modify-goal g-current-unit-score c:- 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player lithuanians)
                (or
                    (players-civ target-player saracen)
                    (players-civ target-player spanish)))
            =>
            (up-modify-goal g-current-unit-score c:- 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
            )

		#end-if

		#load-if-defined POLES-CIV

            (defrule
            (or
                (goal g-current-unit-type SUPPORT-ARCHER)
                (goal g-current-unit-type SUPPORT-CAVALRY-ARCHER))
            (goal g-primary-unit my-unique-unit)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-SKIRMISHER)
            (goal g-primary-unit my-unique-unit)
            =>
            (up-modify-goal g-current-unit-score c:+ 400)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 400)
            )
            (defrule
            (or
                (goal g-current-unit-type SUPPORT-ARCHER)
                (or
                    (goal g-current-unit-type SUPPORT-SKIRMISHER)
                    (goal g-current-unit-type SUPPORT-CAVALRY-ARCHER)))
            (unit-type-count-total my-unique-unit-line >= 6)
            (up-compare-goal g-enemy-huskarls-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-huskarls-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (or
                (goal g-current-unit-type SUPPORT-ARCHER)
                (or
                    (goal g-current-unit-type SUPPORT-SKIRMISHER)
                    (goal g-current-unit-type SUPPORT-CAVALRY-ARCHER)))
            (unit-type-count-total my-unique-unit-line >= 6)
            (or
                (up-compare-goal g-enemy-heavy-cavalry-count >= 6)
                (up-compare-goal g-enemy-skirmishers-count >= 6))
            =>
            (set-goal g-temp 200)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (or
                (goal g-current-unit-type SUPPORT-MILITIA)
                (or
                    (goal g-current-unit-type SUPPORT-CONDOTTIERO)
                    (or
                        (goal g-current-unit-type SUPPORT-SCOUT-CAVALRY)
                        (goal g-current-unit-type SUPPORT-KNIGHT))))
            (unit-type-count-total my-unique-unit-line >= 6)
            (up-compare-goal g-enemy-teutonic-knights-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-teutonic-knights-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-KNIGHT)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-KNIGHT)
            (research-completed ri-szlachta-privileges)
            =>
            (up-modify-goal g-current-unit-score c:+ 100)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-SCOUT-CAVALRY)
            (research-completed ri-lechitic-legacy)
            =>
            (up-modify-goal g-current-unit-score c:+ 50)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 50)
            )
            
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player gothic)
                (players-civ target-player teutonic))
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )

		#end-if

		#load-if-defined PORTUGUESE-CIV

            (defrule
            (or
                (goal g-current-unit-type SUPPORT-CONDOTTIERO)
                (or
                    (goal g-current-unit-type SUPPORT-ARCHER)
                    (or
                        (goal g-current-unit-type SUPPORT-CAVALRY-ARCHER)
                        (goal g-current-unit-type SUPPORT-HAND-CANNONEER))))
            =>
            (up-modify-goal g-current-unit-score c:+ 100)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-SPEARMAN)
            (goal g-primary-unit my-unique-unit)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-KNIGHT)
            =>
            (up-modify-goal g-current-unit-score c:+ 150)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 150)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-MONK)
            =>
            (up-modify-goal g-current-unit-score c:+ 100)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
            )

            (defrule
            (or
                (goal g-current-unit-type SUPPORT-HAND-CANNONEER)
                (goal g-current-unit-type SUPPORT-UNIQUE-UNIT))
            (research-completed ri-arquebus)
            =>
            (up-modify-goal g-current-unit-score c:+ 50)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 50)
            )
            
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player bengalis)
                (or
                    (players-civ target-player magyar)
                    (players-civ target-player mongol)))
            =>
            (up-modify-goal g-current-unit-score c:- 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
            )

		#end-if

		#load-if-defined SARACEN-CIV

            (defrule
            (goal g-current-unit-type SUPPORT-ARCHER)
            (goal g-primary-unit my-unique-unit)
            =>
            (up-modify-goal g-current-unit-score c:+ 100)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-SKIRMISHER)
            (goal g-primary-unit my-unique-unit)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-GENITOUR)
            (goal g-primary-unit my-unique-unit)
            =>
            (up-modify-goal g-current-unit-score c:+ 300)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 300)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-CAMEL)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )

            (defrule
            (or
                (goal g-current-unit-type SUPPORT-CAMEL)
                (goal g-current-unit-type SUPPORT-UNIQUE-UNIT))
            (research-completed ri-zealotry)
            =>
            (up-modify-goal g-current-unit-score c:+ 50)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 50)
            )
            
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player frankish)
                (players-civ target-player spanish))
            =>
            (up-modify-goal g-current-unit-score c:+ 300)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 300)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player berbers)
                (or
                    (players-civ target-player burgundians)
                    (or
                        (players-civ target-player burmese)
                        (or
                            (players-civ target-player cumans)
                            (or
                                (players-civ target-player hun)
                                (or
                                    (players-civ target-player khmer)
                                    (players-civ target-player lithuanians)))))))
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player magyar)
                (or
                    (players-civ target-player mongol)
                    (or
                        (players-civ target-player persian)
                        (or
                            (players-civ target-player portuguese)
                            (or
                                (players-civ target-player slavic)
                                (or
                                    (players-civ target-player tatars)
                                    (players-civ target-player teutonic)))))))
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (players-civ target-player turkish)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player briton)
                (or
                    (players-civ target-player chinese)
                    (or
                        (players-civ target-player ethiopian)
                        (or
                            (players-civ target-player italian)
                            (or
                                (players-civ target-player malay)
                                (players-civ target-player vietnamese))))))
            =>
            (up-modify-goal g-current-unit-score c:- 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player aztec)
                (or
                    (players-civ target-player incan)
                    (players-civ target-player mayan)))
            =>
            (up-modify-goal g-current-unit-score c:- 400)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: -400)
            )

		#end-if

		#load-if-defined SICILIANS-CIV

            (defrule
            (or
                (goal g-current-unit-type SUPPORT-ARCHER)
                (goal g-current-unit-type SUPPORT-SCOUT-CAVALRY))
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-SKIRMISHER)
            =>
            (up-modify-goal g-current-unit-score c:+ 100)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-KNIGHT)
            =>
            (up-modify-goal g-current-unit-score c:+ 300)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 300)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-KNIGHT)
            (research-completed ri-hauberk)
            =>
            (up-modify-goal g-current-unit-score c:+ 50)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 50)
            )
            
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player berbers)
                (or
                    (players-civ target-player burmese)
                    (or
                        (players-civ target-player cumans)
                        (or
                            (players-civ target-player hun)
                            (or
                                (players-civ target-player mongol)
                                (players-civ target-player tatars))))))
            =>
            (up-modify-goal g-current-unit-score c:- 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
            )

		#end-if

		#load-if-defined SLAVIC-CIV

            (defrule
            (goal g-current-unit-armor-type INFANTRY-ARMOR)
            =>
            (up-modify-goal g-current-unit-score c:+ 100)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-SKIRMISHER)
            (goal g-primary-unit my-unique-unit)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )

            (defrule
            (goal g-current-unit-armor-type INFANTRY-ARMOR)
            (research-completed ri-druzhina)
            =>
            (up-modify-goal g-current-unit-score c:+ 100)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
            )
            
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player berbers)
                (or
                    (players-civ target-player burgundians)
                    (or
                        (players-civ target-player frankish)
                        (or
                            (players-civ target-player lithuanians)
                            (or
                                (players-civ target-player magyar)
                                (or
                                    (players-civ target-player persian)
                                    (players-civ target-player portuguese)))))))
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player spanish)
                (or
                    (players-civ target-player teutonic)
                    (players-civ target-player turkish)))
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player gurjaras)
                (or
                    (players-civ target-player indian)
                    (or
                        (players-civ target-player italian)
                        (players-civ target-player saracen))))
            =>
            (up-modify-goal g-current-unit-score c:- 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
            )

		#end-if

		#load-if-defined SPANISH-CIV

            (defrule
            (goal g-current-unit-type SUPPORT-HAND-CANNONEER)
            =>
            (up-modify-goal g-current-unit-score c:+ 100)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-SCOUT-CAVALRY)
            (goal g-primary-unit my-unique-unit)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-MONK)
            =>
            (up-modify-goal g-current-unit-score c:+ 100)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
            )
            
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player berbers)
                (or
                    (players-civ target-player byzantine)
                    (or
                        (players-civ target-player gurjaras)
                        (or
                            (players-civ target-player indian)
                            (or
                                (players-civ target-player italian)
                                (players-civ target-player saracen))))))
            =>
            (up-modify-goal g-current-unit-score c:- 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
            )

		#end-if

		#load-if-defined TATARS-CIV

            (defrule
            (goal g-current-unit-attack-type PIERCE-ATTACK)
            =>
            (up-modify-goal g-current-unit-score c:+ 100)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-ARCHER)
            =>
            (up-modify-goal g-current-unit-score c:+ 100)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-CAVALRY-ARCHER)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )

            (defrule
            (or
                (goal g-current-unit-type SUPPORT-ARCHER)
                (or
                    (goal g-current-unit-type SUPPORT-SKIRMISHER)
                    (goal g-current-unit-type SUPPORT-CAVALRY-ARCHER)))
            (goal g-primary-unit my-unique-unit)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )

            (defrule
            (or
                (goal g-current-unit-type SUPPORT-SCOUT-CAVALRY)
                (goal g-current-unit-type SUPPORT-STEPPE-LANCER))
            =>
            (up-modify-goal g-current-unit-score c:+ 100)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
            )

            (defrule
            (or
                (goal g-current-unit-type SUPPORT-SCOUT-CAVALRY)
                (or
                    (goal g-current-unit-type SUPPORT-STEPPE-LANCER)
                    (goal g-current-unit-type SUPPORT-CAVALRY-ARCHER)))
            (research-completed ri-silk-armor)
            =>
            (up-modify-goal g-current-unit-score c:+ 50)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 50)
            )
            
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player gurjaras)
                (or
                    (players-civ target-player indian)
                    (or
                        (players-civ target-player italian)
                        (or
                            (players-civ target-player saracen)
                            (or
                                (players-civ target-player slavic)
                                (players-civ target-player teutonic))))))
            =>
            (up-modify-goal g-current-unit-score c:- 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
            )

		#end-if

		#load-if-defined TEUTONIC-CIV
            
            (defrule
            (or
                (goal g-current-unit-armor-type INFANTRY-ARMOR)
                (goal g-current-unit-armor-type CAVALRY-ARMOR))
            =>
            (up-modify-goal g-current-unit-score c:+ 100)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-SKIRMISHER)
            (goal g-primary-unit my-unique-unit)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )
            
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player celtic)
                (players-civ target-player gothic))
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player bohemians)
                (or
                    (players-civ target-player briton)
                    (or
                        (players-civ target-player bulgarians)
                        (or
                            (players-civ target-player chinese)
                            (or
                                (players-civ target-player cumans)
                                (or
                                    (players-civ target-player ethiopian)
                                    (players-civ target-player italian)))))))
            =>
            (up-modify-goal g-current-unit-score c:- 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player japanese)
                (or
                    (players-civ target-player mayan)
                    (or
                        (players-civ target-player tatars)
                        (players-civ target-player vietnamese))))
            =>
            (up-modify-goal g-current-unit-score c:- 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
            )

		#end-if

		#load-if-defined TURKISH-CIV

            (defrule
            (goal g-current-unit-type SUPPORT-CAVALRY-ARCHER)
            =>
            (up-modify-goal g-current-unit-score c:+ 100)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-HAND-CANNONEER)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-SCOUT-CAVALRY)
            =>
            (up-modify-goal g-current-unit-score c:+ 250)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 250)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-SCOUT-CAVALRY)
            (goal g-primary-unit my-unique-unit)
            =>
            (up-modify-goal g-current-unit-score c:+ 300)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 300)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-CAVALRY-ARCHER)
            (research-completed ri-sipahi)
            =>
            (up-modify-goal g-current-unit-score c:+ 50)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 50)
            )
            
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player aztec)
                (or
                    (players-civ target-player bohemians)
                    (or
                        (players-civ target-player burmese)
                        (or
                            (players-civ target-player celtic)
                            (or
                                (players-civ target-player dravidians)
                                (or
                                    (players-civ target-player gothic)
                                    (players-civ target-player incan)))))))
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player malay)
                (or
                    (players-civ target-player mayan)
                    (or
                        (players-civ target-player slavic)
                        (or
                            (players-civ target-player spanish)
                            (or
                                (players-civ target-player teutonic)
                                (players-civ target-player turkish))))))
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player briton)
                (players-civ target-player vietnamese))
            =>
            (up-modify-goal g-current-unit-score c:- 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
            )

		#end-if

		#load-if-defined VIETNAMESE-CIV

            (defrule
            (goal g-current-unit-type SUPPORT-SPEARMAN)
            (goal g-primary-unit my-unique-unit)
            =>
            (up-modify-goal g-current-unit-score c:+ 300)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 300)
            )

            (defrule
            (goal g-current-unit-building archery-range)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-BATTLE-ELEPHANT)
            =>
            (up-modify-goal g-current-unit-score c:+ 100)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 100)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-BATTLE-ELEPHANT)
            (research-completed ri-chatras)
            =>
            (up-modify-goal g-current-unit-score c:+ 50)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 50)
            )
            
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player briton)
                (or
                    (players-civ target-player chinese)
                    (or
                        (players-civ target-player korean)
                        (or
                            (players-civ target-player mayan)
                            (or
                                (players-civ target-player mongol)
                                (players-civ target-player vietnamese))))))
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-civ target-player bulgarians)
                (or
                    (players-civ target-player celtic)
                    (or
                        (players-civ target-player frankish)
                        (or
                            (players-civ target-player gothic)
                            (or
                                (players-civ target-player spanish)
                                (players-civ target-player teutonic))))))
            =>
            (up-modify-goal g-current-unit-score c:- 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: -200)
            )

		#end-if

		#load-if-defined VIKING-CIV

            (defrule
            (goal g-current-unit-armor-type INFANTRY-ARMOR)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )

            (defrule
            (goal g-current-unit-type SUPPORT-SKIRMISHER)
            (goal g-primary-unit my-unique-unit)
            =>
            (up-modify-goal g-current-unit-score c:+ 200)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 200)
            )

            (defrule
            (goal g-current-unit-armor-type INFANTRY-ARMOR)
            (up-compare-goal g-current-unit-type != SUPPORT-SPEARMAN)
            =>
            (up-modify-goal g-current-unit-score c:+ 50)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 50)
            )

            (defrule
            (goal g-current-unit-armor-type INFANTRY-ARMOR)
            (research-completed ri-chieftains)
            =>
            (up-modify-goal g-current-unit-score c:+ 50)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT c: 50)
            )
            (defrule
            (goal g-current-unit-armor-type INFANTRY-ARMOR)
            (up-compare-goal g-current-unit-type != SUPPORT-SPEARMAN)
            (research-completed ri-chieftains)
            (or
                (up-compare-goal g-enemy-light-cavalry-count >= 5)
                (or
                    (up-compare-goal g-enemy-heavy-cavalry-count >= 5)
                    (or
                        (up-compare-goal g-enemy-camels-count >= 5)
                        (up-compare-goal g-enemy-elephants-count >= 4))))
            =>
            (set-goal g-temp 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (goal g-current-unit-armor-type INFANTRY-ARMOR)
            (up-compare-goal g-current-unit-type != SUPPORT-SPEARMAN)
            (research-completed ri-chieftains)
            (up-compare-goal g-enemy-cataphracts-count >= 5)
            =>
            (set-goal g-temp 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-TYPE c: 13)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )

		#end-if

    ;-------------------------
    ;   Counter Enemy Units
    ;-------------------------

        ;Against enemy swordsmen
            (defrule
            (or
                (and
                    (goal g-current-unit-type SUPPORT-HAND-CANNONEER)
                    (players-unit-type-count target-player condottiero <= 3))
                (goal g-current-unit-type SUPPORT-SLINGER))
            (not
                (players-civ target-player sicilians))
            (up-compare-goal g-enemy-swordsmen-count >= 4)
            =>
            (up-modify-goal g-temp g:= g-enemy-swordsmen-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 350)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-swordsmen-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (or
                (and
                    (goal g-current-unit-type SUPPORT-HAND-CANNONEER)
                    (players-unit-type-count target-player condottiero <= 3))
                (goal g-current-unit-type SUPPORT-SLINGER))
            (players-civ target-player sicilians)
            (up-compare-goal g-enemy-swordsmen-count >= 4)
            =>
            (up-modify-goal g-temp g:= g-enemy-swordsmen-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-swordsmen-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-MILITIA)
            (up-compare-goal g-enemy-swordsmen-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-swordsmen-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-swordsmen-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (or
                (goal g-current-unit-type SUPPORT-CAMEL)
                (goal g-current-unit-type SUPPORT-SKIRMISHER))
            (up-compare-goal g-enemy-swordsmen-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-swordsmen-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-swordsmen-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-SPEARMAN)
            (up-compare-goal g-enemy-swordsmen-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-swordsmen-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-swordsmen-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (or
                (goal g-current-unit-type SUPPORT-EAGLE-WARRIOR)
                (goal g-current-unit-type SUPPORT-SHRIVAMSHA-RIDER))
            (up-compare-goal g-enemy-swordsmen-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-swordsmen-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-swordsmen-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )

        ;Against enemy spearmen
            (defrule
            (or
                (goal g-current-unit-type SUPPORT-HAND-CANNONEER)
                (goal g-current-unit-type SUPPORT-SLINGER))
            (up-compare-goal g-enemy-spearmen-count >= 3)
            =>
            (up-modify-goal g-temp g:= g-enemy-spearmen-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 350)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-spearmen-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-ARCHER)
            (up-compare-goal g-enemy-spearmen-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-spearmen-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-spearmen-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-SKIRMISHER)
            (up-compare-goal g-enemy-spearmen-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-spearmen-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-spearmen-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-CAVALRY-ARCHER)
            (up-compare-goal g-enemy-spearmen-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-spearmen-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-spearmen-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (or
                (goal g-current-unit-type SUPPORT-MILITIA)
                (goal g-current-unit-type SUPPORT-CONDOTTIERO))
            (up-compare-goal g-enemy-spearmen-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-spearmen-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-spearmen-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-ELEPHANT-ARCHER)
            (up-compare-goal g-enemy-spearmen-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-spearmen-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-spearmen-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (or
                (goal g-current-unit-type SUPPORT-SCOUT-CAVALRY)
                (or
                    (goal g-current-unit-type SUPPORT-KNIGHT)
                    (or
                        (goal g-current-unit-type SUPPORT-CAMEL)
                        (goal g-current-unit-type SUPPORT-STEPPE-LANCER))))
            (up-compare-goal g-enemy-spearmen-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-spearmen-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 250)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-spearmen-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-SHRIVAMSHA-RIDER)
            (up-compare-goal g-enemy-spearmen-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-spearmen-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 450)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-spearmen-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-BATTLE-ELEPHANT)
            (up-compare-goal g-enemy-spearmen-count >= 4)
            =>
            (up-modify-goal g-temp g:= g-enemy-spearmen-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 550)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-spearmen-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )

        ;Against enemy eagle warriors
            (defrule
            (goal g-current-unit-type SUPPORT-MILITIA)
            (up-compare-goal g-enemy-eagle-warriors-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-eagle-warriors-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 250)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-eagle-warriors-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (or
                (goal g-current-unit-type SUPPORT-HAND-CANNONEER)
                (goal g-current-unit-type SUPPORT-SLINGER))
            (up-compare-goal g-enemy-eagle-warriors-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-eagle-warriors-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-eagle-warriors-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (or
                (goal g-current-unit-type SUPPORT-CONDOTTIERO)
                (goal g-current-unit-type SUPPORT-KNIGHT))
            (up-compare-goal g-enemy-eagle-warriors-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-eagle-warriors-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-eagle-warriors-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (or
                (goal g-current-unit-type SUPPORT-ARCHER)
                (or
                    (goal g-current-unit-type SUPPORT-SCOUT-CAVALRY)
                    (goal g-current-unit-type SUPPORT-SHRIVAMSHA-RIDER)))
            (up-compare-goal g-enemy-eagle-warriors-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-eagle-warriors-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-eagle-warriors-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-GENITOUR)
            (up-compare-goal g-enemy-eagle-warriors-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-eagle-warriors-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-eagle-warriors-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-SKIRMISHER)
            (up-compare-goal g-enemy-eagle-warriors-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-eagle-warriors-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 250)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-eagle-warriors-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )

        ;Against enemy foot archers
            (defrule
            (goal g-current-unit-type SUPPORT-SKIRMISHER)
            (not
                (players-civ target-player sicilians))
            (up-compare-goal g-enemy-foot-archers-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-foot-archers-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 400)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-foot-archers-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-SKIRMISHER)
            (players-civ target-player sicilians)
            (up-compare-goal g-enemy-foot-archers-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-foot-archers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 200)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-foot-archers-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-GENITOUR)
            (up-compare-goal g-enemy-foot-archers-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-foot-archers-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 200)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-foot-archers-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            #load-if-defined MALIAN-CIV
                (defrule
                (goal g-current-unit-type SUPPORT-MILITIA)
                (up-compare-goal g-enemy-foot-archers-count >= 5)
                (current-age == castle-age)
                =>
                (up-modify-goal g-temp g:= g-enemy-foot-archers-count)
                (up-modify-goal g-temp c:min 20)
                (up-modify-goal g-temp c:* 20)
                (up-modify-goal g-temp c:+ 50)
                (up-modify-goal g-temp s:%* csn-countering-preference)
                (up-modify-goal g-current-unit-score g:+ g-temp)
                (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-foot-archers-count)
                (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
                )
                (defrule
                (goal g-current-unit-type SUPPORT-MILITIA)
                (up-compare-goal g-enemy-foot-archers-count >= 5)
                (current-age == imperial-age)
                =>
                (up-modify-goal g-temp g:= g-enemy-foot-archers-count)
                (up-modify-goal g-temp c:min 20)
                (up-modify-goal g-temp c:* 20)
                (up-modify-goal g-temp c:+ 250)
                (up-modify-goal g-temp s:%* csn-countering-preference)
                (up-modify-goal g-current-unit-score g:+ g-temp)
                (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-foot-archers-count)
                (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
                )
            #end-if
            (defrule
            (goal g-current-unit-type SUPPORT-SHRIVAMSHA-RIDER)
            (up-compare-goal g-enemy-foot-archers-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-foot-archers-count)
            (up-modify-goal g-temp c:min 25)
            (up-modify-goal g-temp2 c:= 25)                     ;if enemy has more than 25, decrease countering preference
            (up-modify-goal g-temp2 g:- g-enemy-foot-archers-count)  
            (up-modify-goal g-temp2 c:min 0)
            (up-modify-goal g-temp2 c:/ 2)
            (up-modify-goal g-temp g:+ g-temp2)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 200)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-foot-archers-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (or
                (goal g-current-unit-type SUPPORT-ELEPHANT-ARCHER)
                (goal g-current-unit-type SUPPORT-KNIGHT))
            (up-compare-goal g-enemy-foot-archers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-foot-archers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-foot-archers-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-SCOUT-CAVALRY)
            (up-compare-goal g-enemy-foot-archers-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-foot-archers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-foot-archers-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-CAMEL)
            (up-compare-goal g-enemy-foot-archers-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-foot-archers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-foot-archers-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (or
                (goal g-current-unit-type SUPPORT-MILITIA)
                (goal g-current-unit-type SUPPORT-MONK))
            (up-compare-goal g-enemy-foot-archers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-foot-archers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-foot-archers-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-SPEARMAN)
            (up-compare-goal g-enemy-foot-archers-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-foot-archers-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 200)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-foot-archers-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )

        ;Against enemy skirmishers
            (defrule
            (goal g-current-unit-type SUPPORT-SHRIVAMSHA-RIDER)
            (up-compare-goal g-enemy-skirmishers-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-skirmishers-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 500)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-skirmishers-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (or
                (goal g-current-unit-type SUPPORT-SCOUT-CAVALRY)
                (goal g-current-unit-type SUPPORT-KNIGHT))
            (up-compare-goal g-enemy-skirmishers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-skirmishers-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 200)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-skirmishers-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (or
                (goal g-current-unit-type SUPPORT-EAGLE-WARRIOR)
                (or
                    (goal g-current-unit-type SUPPORT-CONDOTTIERO)
                    (goal g-current-unit-type SUPPORT-CAMEL)))
            (up-compare-goal g-enemy-skirmishers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-skirmishers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp2 c:= 30)                     ;if enemy has more than 30, decrease countering preference
            (up-modify-goal g-temp2 g:- g-enemy-skirmishers-count)  
            (up-modify-goal g-temp2 c:min 0)
            (up-modify-goal g-temp2 c:/ 2)
            (up-modify-goal g-temp g:+ g-temp2)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 100)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-skirmishers-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            #load-if-defined MALIAN-CIV
                (defrule
                (goal g-current-unit-type SUPPORT-MILITIA)
                (up-compare-goal g-enemy-skirmishers-count >= 5)
                (current-age == castle-age)
                =>
                (up-modify-goal g-temp g:= g-enemy-skirmishers-count)
                (up-modify-goal g-temp c:min 20)
                (up-modify-goal g-temp c:* 20)
                (up-modify-goal g-temp c:+ 50)
                (up-modify-goal g-temp s:%* csn-countering-preference)
                (up-modify-goal g-current-unit-score g:+ g-temp)
                (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-skirmishers-count)
                (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
                )
                (defrule
                (goal g-current-unit-type SUPPORT-MILITIA)
                (up-compare-goal g-enemy-skirmishers-count >= 5)
                (current-age == imperial-age)
                =>
                (up-modify-goal g-temp g:= g-enemy-skirmishers-count)
                (up-modify-goal g-temp c:min 20)
                (up-modify-goal g-temp c:* 20)
                (up-modify-goal g-temp c:+ 250)
                (up-modify-goal g-temp s:%* csn-countering-preference)
                (up-modify-goal g-current-unit-score g:+ g-temp)
                (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-skirmishers-count)
                (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
                )
            #end-if
            (defrule
            (or
                (goal g-current-unit-type SUPPORT-MILITIA)
                (goal g-current-unit-type SUPPORT-STEPPE-LANCER))
            (up-compare-goal g-enemy-skirmishers-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-skirmishers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-skirmishers-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (or
                (goal g-current-unit-type SUPPORT-SPEARMAN)
                (or
                    (goal g-current-unit-type SUPPORT-HAND-CANNONEER)
                    (goal g-current-unit-type SUPPORT-ELEPHANT-ARCHER)))
            (up-compare-goal g-enemy-skirmishers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-skirmishers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-skirmishers-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (or
                (goal g-current-unit-type SUPPORT-ARCHER)
                (or
                    (goal g-current-unit-type SUPPORT-CAVALRY-ARCHER)
                    (goal g-current-unit-type SUPPORT-SLINGER)))
            (up-compare-goal g-enemy-skirmishers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-skirmishers-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 200)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-skirmishers-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )

        ;Against enemy cav archers
            (defrule
            (goal g-current-unit-type SUPPORT-GENITOUR)
            (not
                (players-civ target-player sicilians))
            (up-compare-goal g-enemy-cavalry-archers-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-cavalry-archers-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 500)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-cavalry-archers-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-GENITOUR)
            (players-civ target-player sicilians)
            (up-compare-goal g-enemy-cavalry-archers-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-cavalry-archers-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 300)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-cavalry-archers-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-SKIRMISHER)
            (not
                (players-civ target-player sicilians))
            (up-compare-goal g-enemy-cavalry-archers-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-cavalry-archers-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 300)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-cavalry-archers-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-SKIRMISHER)
            (players-civ target-player sicilians)
            (up-compare-goal g-enemy-cavalry-archers-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-cavalry-archers-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 100)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-cavalry-archers-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-SHRIVAMSHA-RIDER)
            (up-compare-goal g-enemy-cavalry-archers-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-cavalry-archers-count)
            (up-modify-goal g-temp c:min 25)
            (up-modify-goal g-temp2 c:= 25)                     ;if enemy has more than 25, decrease countering preference
            (up-modify-goal g-temp2 g:- g-enemy-cavalry-archers-count)  
            (up-modify-goal g-temp2 c:min 0)
            (up-modify-goal g-temp2 c:/ 2)
            (up-modify-goal g-temp g:+ g-temp2)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 300)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-cavalry-archers-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-CAMEL)
            (up-compare-goal g-enemy-cavalry-archers-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-cavalry-archers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-cavalry-archers-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-SCOUT-CAVALRY)
            (up-compare-goal g-enemy-cavalry-archers-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-cavalry-archers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-cavalry-archers-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-SPEARMAN)
            (up-compare-goal g-enemy-cavalry-archers-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-cavalry-archers-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -10)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-cavalry-archers-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (or
                (goal g-current-unit-type SUPPORT-CONDOTTIERO)
                (or
                    (goal g-current-unit-type SUPPORT-BATTLE-ELEPHANT)
                    (goal g-current-unit-type SUPPORT-MONK)))
            (up-compare-goal g-enemy-cavalry-archers-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-cavalry-archers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-cavalry-archers-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-MILITIA)
            (up-compare-goal g-enemy-cavalry-archers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-cavalry-archers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-cavalry-archers-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (or
                (goal g-current-unit-type SUPPORT-CAVALRY-ARCHER)
                (goal g-current-unit-type SUPPORT-ELEPHANT-ARCHER))
            (or
                (players-unit-type-count any-enemy camel-archer >= 5)
                (players-unit-type-count any-enemy camel-archer >= 5))
            =>
            (set-goal g-temp -500)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-CAMEL-ARCHER c: 0)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )

        ;Against enemy hand cannoneers and slingers
            (defrule
            (goal g-current-unit-type SUPPORT-SKIRMISHER)
            (up-compare-goal g-enemy-hand-cannoneers-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-hand-cannoneers-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 400)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-hand-cannoneers-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-SKIRMISHER)
            (up-compare-goal g-enemy-hand-cannoneers-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-hand-cannoneers-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 400)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-hand-cannoneers-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-SHRIVAMSHA-RIDER)
            (up-compare-goal g-enemy-hand-cannoneers-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-hand-cannoneers-count)
            (up-modify-goal g-temp c:min 25)
            (up-modify-goal g-temp2 c:= 25)                     ;if enemy has more than 25, decrease countering preference
            (up-modify-goal g-temp2 g:- g-enemy-hand-cannoneers-count)  
            (up-modify-goal g-temp2 c:min 0)
            (up-modify-goal g-temp2 c:/ 2)
            (up-modify-goal g-temp g:+ g-temp2)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 400)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-hand-cannoneers-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-CONDOTTIERO)
            (up-compare-goal g-enemy-hand-cannoneers-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-hand-cannoneers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp2 c:= 20)                     ;if enemy has more than 20, decrease countering preference
            (up-modify-goal g-temp2 g:- g-enemy-mamelukes-count)  
            (up-modify-goal g-temp2 c:min 0)
            (up-modify-goal g-temp2 c:/ 2)
            (up-modify-goal g-temp g:+ g-temp2)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 200)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-hand-cannoneers-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-GENITOUR)
            (up-compare-goal g-enemy-hand-cannoneers-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-hand-cannoneers-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 200)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-hand-cannoneers-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-KNIGHT)
            (up-compare-goal g-enemy-hand-cannoneers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-hand-cannoneers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-hand-cannoneers-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (or
                (goal g-current-unit-type SUPPORT-SCOUT-CAVALRY)
                (goal g-current-unit-type SUPPORT-STEPPE-LANCER))
            (up-compare-goal g-enemy-hand-cannoneers-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-hand-cannoneers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-hand-cannoneers-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-CAMEL)
            (up-compare-goal g-enemy-hand-cannoneers-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-hand-cannoneers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-hand-cannoneers-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-MONK)
            (up-compare-goal g-enemy-hand-cannoneers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-hand-cannoneers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-hand-cannoneers-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (or
                (goal g-current-unit-type SUPPORT-MILITIA)
                (or
                    (goal g-current-unit-type SUPPORT-SPEARMAN)
                    (goal g-current-unit-type SUPPORT-EAGLE-WARRIOR)))
            (up-compare-goal g-enemy-hand-cannoneers-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-hand-cannoneers-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 300)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-hand-cannoneers-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )

        ;Against enemy light cavalry
            (defrule
            (goal g-current-unit-type SUPPORT-CAMEL)
            (not
                (players-civ target-player sicilians))
            (up-compare-goal g-enemy-light-cavalry-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-light-cavalry-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 450)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-light-cavalry-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-CAMEL)
            (players-civ target-player sicilians)
            (up-compare-goal g-enemy-light-cavalry-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-light-cavalry-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 250)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-light-cavalry-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-SPEARMAN)
            (not
                (players-civ target-player sicilians))
            (up-compare-goal g-enemy-light-cavalry-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-light-cavalry-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 250)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-light-cavalry-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-SPEARMAN)
            (players-civ target-player sicilians)
            (up-compare-goal g-enemy-light-cavalry-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-light-cavalry-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-light-cavalry-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-EAGLE-WARRIOR)
            (up-compare-goal g-enemy-light-cavalry-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-light-cavalry-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-light-cavalry-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-ARCHER)
            (up-compare-goal g-enemy-light-cavalry-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-light-cavalry-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-light-cavalry-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-GENITOUR)
            (up-compare-goal g-enemy-light-cavalry-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-light-cavalry-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-light-cavalry-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-SKIRMISHER)
            (up-compare-goal g-enemy-light-cavalry-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-light-cavalry-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 250)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-light-cavalry-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-MONK)
            (up-compare-goal g-enemy-light-cavalry-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-light-cavalry-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 350)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-light-cavalry-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )

        ;Against enemy heavy cavalry
            (defrule
            (or
                (and
                    (goal g-current-unit-type SUPPORT-CAMEL)
                    (not
                        (players-civ target-player sicilians)))
                (goal g-current-unit-type SUPPORT-MONK))
            (up-compare-goal g-enemy-heavy-cavalry-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-heavy-cavalry-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 550)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-heavy-cavalry-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-CAMEL)
            (players-civ target-player sicilians)
            (up-compare-goal g-enemy-heavy-cavalry-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-heavy-cavalry-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 300)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-heavy-cavalry-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-SPEARMAN)
            (not
                (players-civ target-player sicilians))
            (up-compare-goal g-enemy-heavy-cavalry-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-heavy-cavalry-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 350)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-heavy-cavalry-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-SPEARMAN)
            (players-civ target-player sicilians)
            (up-compare-goal g-enemy-heavy-cavalry-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-heavy-cavalry-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 100)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-heavy-cavalry-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (or
                (goal g-current-unit-type SUPPORT-SCOUT-CAVALRY)
                (goal g-current-unit-type SUPPORT-SHRIVAMSHA-RIDER))
            (up-compare-goal g-enemy-heavy-cavalry-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-heavy-cavalry-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-heavy-cavalry-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (or
                (goal g-current-unit-type SUPPORT-ARCHER)
                (or
                    (goal g-current-unit-type SUPPORT-HAND-CANNONEER)
                    (goal g-current-unit-type SUPPORT-SLINGER)))
            (up-compare-goal g-enemy-heavy-cavalry-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-heavy-cavalry-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-heavy-cavalry-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-GENITOUR)
            (up-compare-goal g-enemy-heavy-cavalry-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-heavy-cavalry-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 250)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-heavy-cavalry-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-SKIRMISHER)
            (up-compare-goal g-enemy-heavy-cavalry-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-heavy-cavalry-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 350)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-heavy-cavalry-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )

        ;Against enemy camels
            (defrule
            (goal g-current-unit-type SUPPORT-MONK)
            (up-compare-goal g-enemy-camels-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-camels-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 350)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-camels-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-SPEARMAN)
            (up-compare-goal g-enemy-camels-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-camels-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-camels-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-ARCHER)
            (up-compare-goal g-enemy-camels-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-camels-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-camels-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (or
                (goal g-current-unit-type SUPPORT-ELEPHANT-ARCHER)
                (goal g-current-unit-type SUPPORT-SLINGER))
            (up-compare-goal g-enemy-camels-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-camels-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-camels-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (or
                (goal g-current-unit-type SUPPORT-CAVALRY-ARCHER)
                (goal g-current-unit-type SUPPORT-BATTLE-ELEPHANT))
            (up-compare-goal g-enemy-camels-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-camels-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-camels-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-SKIRMISHER)
            (up-compare-goal g-enemy-camels-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-camels-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-camels-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-GENITOUR)
            (up-compare-goal g-enemy-camels-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-camels-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 350)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-camels-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (or
                (goal g-current-unit-type SUPPORT-SCOUT-CAVALRY)
                (or
                    (goal g-current-unit-type SUPPORT-KNIGHT)
                    (goal g-current-unit-type SUPPORT-STEPPE-LANCER)))
            (up-compare-goal g-enemy-camels-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-camels-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 450)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-camels-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-SHRIVAMSHA-RIDER)
            (up-compare-goal g-enemy-camels-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-camels-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 550)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-camels-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )

        ;Against enemy elephants
            (defrule
            (or
                (goal g-current-unit-type SUPPORT-SPEARMAN)
                (goal g-current-unit-type SUPPORT-MONK))
            (up-compare-goal g-enemy-elephants-count >= 3)
            =>
            (up-modify-goal g-temp g:= g-enemy-elephants-count)
            (up-modify-goal g-temp c:min 18)
            (up-modify-goal g-temp c:* 30)
            (up-modify-goal g-temp c:+ 550)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-elephants-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-CAMEL)
            (up-compare-goal g-enemy-elephants-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-elephants-count)
            (up-modify-goal g-temp c:min 12)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-elephants-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (or
                (goal g-current-unit-type SUPPORT-MILITIA)
                (or
                    (goal g-current-unit-type SUPPORT-CONDOTTIERO)
                    (or
                        (goal g-current-unit-type SUPPORT-SKIRMISHER)
                        (goal g-current-unit-type SUPPORT-ELEPHANT-ARCHER))))
            (up-compare-goal g-enemy-elephants-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-elephants-count)
            (up-modify-goal g-temp c:min 12)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-elephants-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (or
                (goal g-current-unit-type SUPPORT-KNIGHT)
                (or
                    (goal g-current-unit-type SUPPORT-STEPPE-LANCER)
                    (goal g-current-unit-type SUPPORT-SHRIVAMSHA-RIDER)))
            (up-compare-goal g-enemy-elephants-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-elephants-count)
            (up-modify-goal g-temp c:min 12)
            (up-modify-goal g-temp c:* -25)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-elephants-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-SCOUT-CAVALRY)
            (up-compare-goal g-enemy-elephants-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-elephants-count)
            (up-modify-goal g-temp c:min 12)
            (up-modify-goal g-temp c:* -25)
            (up-modify-goal g-temp c:- 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-elephants-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )

        ;Against enemy monks
            (defrule
            (goal g-current-unit-type SUPPORT-SCOUT-CAVALRY)
            (not
                (players-civ target-player sicilians))
            (up-compare-goal g-enemy-monks-count >= 3)
            =>
            (up-modify-goal g-temp g:= g-enemy-monks-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 30)
            (up-modify-goal g-temp c:+ 350)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-monks-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-SCOUT-CAVALRY)
            (players-civ target-player sicilians)
            (up-compare-goal g-enemy-monks-count >= 3)
            =>
            (up-modify-goal g-temp g:= g-enemy-monks-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 30)
            (up-modify-goal g-temp c:+ 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-monks-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-EAGLE-WARRIOR)
            (up-compare-goal g-enemy-monks-count >= 3)
            =>
            (up-modify-goal g-temp g:= g-enemy-monks-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 30)
            (up-modify-goal g-temp c:+ 250)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-monks-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (or
                (goal g-current-unit-type SUPPORT-ARCHER)
                (goal g-current-unit-type SUPPORT-HAND-CANNONEER))
            (up-compare-goal g-enemy-monks-count >= 4)
            =>
            (up-modify-goal g-temp g:= g-enemy-monks-count)
            (up-modify-goal g-temp c:min 10)
            (up-modify-goal g-temp c:* 30)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-monks-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (or
                (goal g-current-unit-type SUPPORT-CAVALRY-ARCHER)
                (goal g-current-unit-type SUPPORT-SLINGER))
            (up-compare-goal g-enemy-monks-count >= 4)
            =>
            (up-modify-goal g-temp g:= g-enemy-monks-count)
            (up-modify-goal g-temp c:min 10)
            (up-modify-goal g-temp c:* 25)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-monks-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-MILITIA)
            (up-compare-goal g-enemy-monks-count >= 4)
            =>
            (up-modify-goal g-temp g:= g-enemy-monks-count)
            (up-modify-goal g-temp c:min 10)
            (up-modify-goal g-temp c:* -25)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-monks-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (or
                (goal g-current-unit-type SUPPORT-ELEPHANT-ARCHER)
                (or
                    (goal g-current-unit-type SUPPORT-KNIGHT)
                    (goal g-current-unit-type SUPPORT-CAMEL)))
            (up-compare-goal g-enemy-monks-count >= 3)
            =>
            (up-modify-goal g-temp g:= g-enemy-monks-count)
            (up-modify-goal g-temp c:min 10)
            (up-modify-goal g-temp c:* -30)
            (up-modify-goal g-temp c:- 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-monks-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-BATTLE-ELEPHANT)
            (up-compare-goal g-enemy-monks-count >= 3)
            =>
            (up-modify-goal g-temp g:= g-enemy-monks-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -30)
            (up-modify-goal g-temp c:- 350)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-monks-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )

        ;Against enemy field siege
            (defrule
            (goal g-current-unit-type SUPPORT-SHRIVAMSHA-RIDER)
            (up-compare-goal g-enemy-field-siege-count >= 3)
            =>
            (up-modify-goal g-temp g:= g-enemy-field-siege-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 30)
            (up-modify-goal g-temp c:+ 450)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-field-siege-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (or
                (goal g-current-unit-type SUPPORT-SCOUT-CAVALRY)
                (goal g-current-unit-type SUPPORT-STEPPE-LANCER))
            (up-compare-goal g-enemy-field-siege-count >= 4)
            =>
            (up-modify-goal g-temp g:= g-enemy-field-siege-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 30)
            (up-modify-goal g-temp c:+ 250)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-field-siege-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (or
                (goal g-current-unit-type SUPPORT-EAGLE-WARRIOR)
                (goal g-current-unit-type SUPPORT-KNIGHT))
            (up-compare-goal g-enemy-field-siege-count >= 4)
            =>
            (up-modify-goal g-temp g:= g-enemy-field-siege-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 30)
            (up-modify-goal g-temp c:+ 250)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-field-siege-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-MONK)
            (up-compare-const REDEMPTION-AVAILABLE == YES)
            (up-compare-goal g-enemy-field-siege-count >= 3)
            (players-unit-type-count any-enemy mangonel-line > 1)
            =>
            (up-modify-goal g-temp g:= g-enemy-field-siege-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 30)
            (up-modify-goal g-temp c:+ 250)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-field-siege-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-CAMEL)
            (up-compare-goal g-enemy-field-siege-count >= 4)
            =>
            (up-modify-goal g-temp g:= g-enemy-field-siege-count)
            (up-modify-goal g-temp c:min 10)
            (up-modify-goal g-temp c:* 30)
            (up-modify-goal g-temp c:+ 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-field-siege-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (or
                (goal g-current-unit-type SUPPORT-MILITIA)
                (goal g-current-unit-type SUPPORT-HAND-CANNONEER))
            (up-compare-goal g-enemy-field-siege-count >= 4)
            =>
            (up-modify-goal g-temp g:= g-enemy-field-siege-count)
            (up-modify-goal g-temp c:min 10)
            (up-modify-goal g-temp c:* -30)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-field-siege-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (or
                (goal g-current-unit-type SUPPORT-CAVALRY-ARCHER)
                (goal g-current-unit-type SUPPORT-GENITOUR))
            (up-compare-goal g-enemy-field-siege-count >= 4)
            =>
            (up-modify-goal g-temp g:= g-enemy-field-siege-count)
            (up-modify-goal g-temp c:min 10)
            (up-modify-goal g-temp c:* -30)
            (up-modify-goal g-temp c:- 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-field-siege-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (or
                (goal g-current-unit-type SUPPORT-SPEARMAN)
                (and
                    (goal g-current-unit-type SUPPORT-BATTLE-ELEPHANT)
                    (or
                        (players-unit-type-count any-enemy scorpion-line >= 2)
                        (players-unit-type-count any-enemy organ-gun-line >= 2))))
            (up-compare-goal g-enemy-field-siege-count >= 4)
            =>
            (up-modify-goal g-temp g:= g-enemy-field-siege-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -30)
            (up-modify-goal g-temp c:- 250)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-field-siege-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (or
                (goal g-current-unit-type SUPPORT-ARCHER)
                (or
                    (goal g-current-unit-type SUPPORT-SKIRMISHER)
                    (goal g-current-unit-type SUPPORT-SLINGER)))
            (up-compare-goal g-enemy-field-siege-count >= 4)
            =>
            (up-modify-goal g-temp g:= g-enemy-field-siege-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -30)
            (up-modify-goal g-temp c:- 350)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-field-siege-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )

        ;Against enemy jaguar warriors
            (defrule
            (or
                (goal g-current-unit-type SUPPORT-HAND-CANNONEER)
                (goal g-current-unit-type SUPPORT-SLINGER))
            (up-compare-goal g-enemy-jaguar-warriors-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-jaguar-warriors-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 450)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-jaguar-warriors-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-CAVALRY-ARCHER)
            (up-compare-goal g-enemy-jaguar-warriors-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-jaguar-warriors-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-jaguar-warriors-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (or
                (goal g-current-unit-type SUPPORT-ARCHER)
                (goal g-current-unit-type SUPPORT-ELEPHANT-ARCHER))
            (up-compare-goal g-enemy-jaguar-warriors-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-jaguar-warriors-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-jaguar-warriors-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-KNIGHT)
            (up-compare-goal g-enemy-jaguar-warriors-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-jaguar-warriors-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-jaguar-warriors-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (or
                (goal g-current-unit-type SUPPORT-MILITIA)
                (or
                    (goal g-current-unit-type SUPPORT-SPEARMAN)
                    (or
                        (goal g-current-unit-type SUPPORT-EAGLE-WARRIOR)
                        (goal g-current-unit-type SUPPORT-CONDOTTIERO))))
            (up-compare-goal g-enemy-jaguar-warriors-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-jaguar-warriors-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 250)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-jaguar-warriors-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )

        ;Against enemy cataphracts
            (defrule
            (goal g-current-unit-type SUPPORT-MONK)
            (up-compare-goal g-enemy-cataphracts-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-cataphracts-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 550)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-cataphracts-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-KNIGHT)
            (up-compare-goal g-enemy-cataphracts-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-cataphracts-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-cataphracts-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-BATTLE-ELEPHANT)
            (up-compare-goal g-enemy-cataphracts-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-cataphracts-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-cataphracts-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (or
                (goal g-current-unit-type SUPPORT-CAVALRY-ARCHER)
                (goal g-current-unit-type SUPPORT-ELEPHANT-ARCHER))
            (up-compare-goal g-enemy-cataphracts-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-cataphracts-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-cataphracts-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (or
                (goal g-current-unit-type SUPPORT-SCOUT-CAVALRY)
                (goal g-current-unit-type SUPPORT-SHRIVAMSHA-RIDER))
            (up-compare-goal g-enemy-cataphracts-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-cataphracts-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-cataphracts-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-GENITOUR)
            (up-compare-goal g-enemy-cataphracts-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-cataphracts-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-cataphracts-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-SKIRMISHER)
            (up-compare-goal g-enemy-cataphracts-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-cataphracts-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-cataphracts-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (or
                (goal g-current-unit-type SUPPORT-MILITIA)
                (or
                    (goal g-current-unit-type SUPPORT-EAGLE-WARRIOR)
                    (goal g-current-unit-type SUPPORT-CONDOTTIERO)))
            (up-compare-goal g-enemy-cataphracts-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-cataphracts-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 350)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-cataphracts-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )

        ;Against enemy huskarls
            (defrule
            (goal g-current-unit-type SUPPORT-MILITIA)
            (up-compare-goal g-enemy-huskarls-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-huskarls-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-huskarls-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-CONDOTTIERO)
            (up-compare-goal g-enemy-huskarls-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-huskarls-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-huskarls-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (or
                (goal g-current-unit-type SUPPORT-HAND-CANNONEER)
                (or
                    (goal g-current-unit-type SUPPORT-SLINGER)
                    (goal g-current-unit-type SUPPORT-BATTLE-ELEPHANT)))
            (up-compare-goal g-enemy-huskarls-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-huskarls-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-huskarls-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (or
                (goal g-current-unit-type SUPPORT-SCOUT-CAVALRY)
                (goal g-current-unit-type SUPPORT-STEPPE-LANCER))
            (up-compare-goal g-enemy-huskarls-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-huskarls-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-huskarls-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (or
                (goal g-current-unit-type SUPPORT-CAMEL)
                (goal g-current-unit-type SUPPORT-SHRIVAMSHA-RIDER))
            (up-compare-goal g-enemy-huskarls-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-huskarls-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-huskarls-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (or
                (goal g-current-unit-type SUPPORT-ARCHER)
                (or
                    (goal g-current-unit-type SUPPORT-SKIRMISHER)
                    (or
                        (goal g-current-unit-type SUPPORT-CAVALRY-ARCHER)
                        (or
                            (goal g-current-unit-type SUPPORT-ELEPHANT-ARCHER)
                            (goal g-current-unit-type SUPPORT-GENITOUR)))))
            (up-compare-goal g-enemy-huskarls-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-huskarls-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 250)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-huskarls-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            
        ;Against enemy chakram throwers
            (defrule
            (or
                (goal g-current-unit-type SUPPORT-HAND-CANNONEER)
                (goal g-current-unit-type SUPPORT-SLINGER))
            (up-compare-goal g-enemy-chakram-throwers-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-chakram-throwers-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 300)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-chakram-throwers-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-KNIGHT)
            (up-compare-goal g-enemy-chakram-throwers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-chakram-throwers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-chakram-throwers-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (goal g-current-unit-building stable)
            (up-compare-goal g-current-unit-type != SUPPORT-KNIGHT)
            (up-compare-goal g-enemy-chakram-throwers-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-chakram-throwers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-chakram-throwers-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (or
                (goal g-current-unit-type SUPPORT-ARCHER)
                (or
                    (goal g-current-unit-type SUPPORT-ELEPHANT-ARCHER)
                    (goal g-current-unit-type SUPPORT-CAVALRY-ARCHER)))
            (up-compare-goal g-enemy-chakram-throwers-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-chakram-throwers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-chakram-throwers-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (or
                (goal g-current-unit-type SUPPORT-SKIRMISHER)
                (goal g-current-unit-type SUPPORT-GENITOUR))
            (up-compare-goal g-enemy-chakram-throwers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-chakram-throwers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-chakram-throwers-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (or
                (goal g-current-unit-type SUPPORT-MILITIA)
                (or
                    (goal g-current-unit-type SUPPORT-SPEARMAN)
                    (or
                        (goal g-current-unit-type SUPPORT-EAGLE-WARRIOR)
                        (goal g-current-unit-type SUPPORT-CONDOTTIERO))))
            (up-compare-goal g-enemy-chakram-throwers-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-chakram-throwers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-chakram-throwers-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )

        ;Against enemy genoese xbows
            (defrule
            (goal g-current-unit-type SUPPORT-SKIRMISHER)
            (up-compare-goal g-enemy-genoese-crossbowmen-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-genoese-crossbowmen-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 400)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-genoese-crossbowmen-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            #load-if-defined MALIAN-CIV
                (defrule
                (goal g-current-unit-type SUPPORT-MILITIA)
                (up-compare-goal g-enemy-genoese-crossbowmen-count >= 5)
                (current-age == castle-age)
                =>
                (up-modify-goal g-temp g:= g-enemy-genoese-crossbowmen-count)
                (up-modify-goal g-temp c:min 20)
                (up-modify-goal g-temp c:* 20)
                (up-modify-goal g-temp c:+ 50)
                (up-modify-goal g-temp s:%* csn-countering-preference)
                (up-modify-goal g-current-unit-score g:+ g-temp)
                (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-genoese-crossbowmen-count)
                (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
                )
                (defrule
                (goal g-current-unit-type SUPPORT-MILITIA)
                (up-compare-goal g-enemy-genoese-crossbowmen-count >= 5)
                (current-age == imperial-age)
                =>
                (up-modify-goal g-temp g:= g-enemy-genoese-crossbowmen-count)
                (up-modify-goal g-temp c:min 20)
                (up-modify-goal g-temp c:* 20)
                (up-modify-goal g-temp c:+ 250)
                (up-modify-goal g-temp s:%* csn-countering-preference)
                (up-modify-goal g-current-unit-score g:+ g-temp)
                (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-genoese-crossbowmen-count)
                (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
                )
            #end-if
            (defrule
            (or
                (goal g-current-unit-type SUPPORT-MILITIA)
                (goal g-current-unit-type SUPPORT-MONK))
            (up-compare-goal g-enemy-genoese-crossbowmen-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-genoese-crossbowmen-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-genoese-crossbowmen-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (or
                (goal g-current-unit-type SUPPORT-CAVALRY-ARCHER)
                (or
                    (goal g-current-unit-type SUPPORT-ELEPHANT-ARCHER)
                    (goal g-current-unit-type SUPPORT-SCOUT-CAVALRY)))
            (up-compare-goal g-enemy-genoese-crossbowmen-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-genoese-crossbowmen-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 100)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-genoese-crossbowmen-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (or
                (goal g-current-unit-type SUPPORT-SPEARMAN)
                (or
                    (goal g-current-unit-type SUPPORT-KNIGHT)
                    (or
                        (goal g-current-unit-type SUPPORT-CAMEL)
                        (or
                            (goal g-current-unit-type SUPPORT-STEPPE-LANCER)
                            (goal g-current-unit-type SUPPORT-BATTLE-ELEPHANT)))))
            (up-compare-goal g-enemy-genoese-crossbowmen-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-genoese-crossbowmen-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 200)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-genoese-crossbowmen-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )

        ;Against enemy samurai
            (defrule
            (goal g-current-unit-type SUPPORT-HAND-CANNONEER)
            (up-compare-goal g-enemy-samurai-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-samurai-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 350)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-samurai-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-SLINGER)
            (up-compare-goal g-enemy-samurai-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-samurai-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-samurai-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-EAGLE-WARRIOR)
            (up-compare-goal g-enemy-samurai-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-samurai-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-samurai-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-GENITOUR)
            (up-compare-goal g-enemy-samurai-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-samurai-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-samurai-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-SHRIVAMSHA-RIDER)
            (up-compare-goal g-enemy-samurai-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-samurai-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 250)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-samurai-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )

        ;Against enemy mamelukes
            (defrule
            (or
                (goal g-current-unit-type SUPPORT-CAMEL)
                (goal g-current-unit-type SUPPORT-MONK))
            (up-compare-goal g-enemy-mamelukes-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-mamelukes-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp2 c:= 20)                     ;if enemy has more than 20, decrease countering preference
            (up-modify-goal g-temp2 g:- g-enemy-mamelukes-count)  
            (up-modify-goal g-temp2 c:min 0)
            (up-modify-goal g-temp2 c:/ 2)
            (up-modify-goal g-temp g:+ g-temp2)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 200)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-mamelukes-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (or
                (goal g-current-unit-type SUPPORT-EAGLE-WARRIOR)
                (goal g-current-unit-type SUPPORT-ARCHER))
            (up-compare-goal g-enemy-mamelukes-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-mamelukes-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-mamelukes-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (or
                (goal g-current-unit-type SUPPORT-MILITIA)
                (goal g-current-unit-type SUPPORT-SLINGER))
            (up-compare-goal g-enemy-mamelukes-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-mamelukes-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-mamelukes-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-SKIRMISHER)
            (up-compare-goal g-enemy-mamelukes-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-mamelukes-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 100)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-mamelukes-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (or
                (goal g-current-unit-type SUPPORT-CAVALRY-ARCHER)
                (or
                    (goal g-current-unit-type SUPPORT-ELEPHANT-ARCHER)
                    (goal g-current-unit-type SUPPORT-BATTLE-ELEPHANT)))
            (up-compare-goal g-enemy-mamelukes-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-mamelukes-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 200)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-mamelukes-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-GENITOUR)
            (up-compare-goal g-enemy-mamelukes-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-mamelukes-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 300)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-mamelukes-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (or
                (goal g-current-unit-type SUPPORT-SCOUT-CAVALRY)
                (or
                    (goal g-current-unit-type SUPPORT-KNIGHT)
                    (or
                        (goal g-current-unit-type SUPPORT-STEPPE-LANCER)
                        (goal g-current-unit-type SUPPORT-SHRIVAMSHA-RIDER))))
            (up-compare-goal g-enemy-mamelukes-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-mamelukes-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 400)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-mamelukes-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )

        ;Against enemy teutonic knights
            (defrule
            (or
                (goal g-current-unit-type SUPPORT-HAND-CANNONEER)
                (goal g-current-unit-type SUPPORT-SLINGER))
            (up-compare-goal g-enemy-teutonic-knights-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-teutonic-knights-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 550)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-teutonic-knights-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (or
                (goal g-current-unit-type SUPPORT-ARCHER)
                (or
                    (goal g-current-unit-type SUPPORT-ELEPHANT-ARCHER)
                    (goal g-current-unit-type SUPPORT-CAVALRY-ARCHER)))
            (up-compare-goal g-enemy-teutonic-knights-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-teutonic-knights-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-teutonic-knights-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )
            (defrule
            (or
                (goal g-current-unit-type SUPPORT-EAGLE-WARRIOR)
                (or
                    (goal g-current-unit-type SUPPORT-KNIGHT)
                    (goal g-current-unit-type SUPPORT-STEPPE-LANCER)))
            (up-compare-goal g-enemy-teutonic-knights-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-teutonic-knights-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-teutonic-knights-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            ) 
            (defrule
            (or
                (goal g-current-unit-type SUPPORT-MILITIA)
                (or
                    (goal g-current-unit-type SUPPORT-SPEARMAN)
                    (or
                        (goal g-current-unit-type SUPPORT-CONDOTTIERO)
                        (goal g-current-unit-type SUPPORT-BATTLE-ELEPHANT))))
            (up-compare-goal g-enemy-teutonic-knights-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-teutonic-knights-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 250)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            (up-log-data 0 CHAT-COUNTER-ENEMY-TYPE c: g-enemy-teutonic-knights-count)
            (up-log-data 0 CHAT-COUNTER-AMOUNT g: g-temp)
            )

    ;-------------------------------
    ;   Counter with Unique Units
    ;-------------------------------

		#load-if-defined AZTEC-CIV

            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-swordsmen-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-swordsmen-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 450)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-spearmen-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-spearmen-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 450)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-eagle-warriors-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-eagle-warriors-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 450)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-foot-archers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-foot-archers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-cavalry-archers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-cavalry-archers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-skirmishers-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-skirmishers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-hand-cannoneers-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-hand-cannoneers-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 300)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-elephants-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-elephants-count)
            (up-modify-goal g-temp c:min 12)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-monks-count >= 4)
            =>
            (up-modify-goal g-temp g:= g-enemy-monks-count)
            (up-modify-goal g-temp c:min 10)
            (up-modify-goal g-temp c:* -25)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-field-siege-count >= 4)
            =>
            (up-modify-goal g-temp g:= g-enemy-field-siege-count)
            (up-modify-goal g-temp c:min 10)
            (up-modify-goal g-temp c:* -30)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-cataphracts-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-cataphracts-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 350)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-huskarls-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-huskarls-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 450)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-chakram-throwers-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-chakram-throwers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp2 c:= 20)                     ;if enemy has more than 20, decrease countering preference
            (up-modify-goal g-temp2 g:- g-enemy-chakram-throwers-count)  
            (up-modify-goal g-temp2 c:min 0)
            (up-modify-goal g-temp2 c:/ 2)
            (up-modify-goal g-temp g:+ g-temp2)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 100)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-genoese-crossbowmen-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-genoese-crossbowmen-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-mamelukes-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-mamelukes-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )

		#end-if

        #load-if-defined BENGALIS-CIV

            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-spearmen-count >= 6)
            (research-completed ri-parthian-tactics)
            =>
            (set-goal g-temp 200)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-spearmen-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-spearmen-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-foot-archers-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-foot-archers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-skirmishers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-skirmishers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-camels-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-camels-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-monks-count >= 4)
            =>
            (up-modify-goal g-temp g:= g-enemy-monks-count)
            (up-modify-goal g-temp c:min 10)
            (up-modify-goal g-temp c:* 25)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-jaguar-warriors-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-jaguar-warriors-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (players-unit-type-count any-enemy camel-archer-line >= 5)
            =>
            (set-goal g-temp -500)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-cataphracts-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-cataphracts-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-huskarls-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-huskarls-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-chakram-throwers-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-chakram-throwers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-genoese-crossbowmen-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-genoese-crossbowmen-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 100)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-samurai-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-samurai-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-mamelukes-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-mamelukes-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 200)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-teutonic-knights-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-teutonic-knights-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )

        #end-if

		#load-if-defined BERBERS-CIV

            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-spearmen-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-spearmen-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-skirmishers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-skirmishers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 100)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-cavalry-archers-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-cavalry-archers-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 200)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-camels-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-camels-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-monks-count >= 4)
            =>
            (up-modify-goal g-temp g:= g-enemy-monks-count)
            (up-modify-goal g-temp c:min 10)
            (up-modify-goal g-temp c:* 25)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-field-siege-count >= 4)
            =>
            (up-modify-goal g-temp g:= g-enemy-field-siege-count)
            (up-modify-goal g-temp c:min 10)
            (up-modify-goal g-temp c:* -30)
            (up-modify-goal g-temp c:- 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-jaguar-warriors-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-jaguar-warriors-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-cataphracts-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-cataphracts-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-huskarls-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-huskarls-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 250)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-chakram-throwers-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-chakram-throwers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-genoese-crossbowmen-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-genoese-crossbowmen-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-samurai-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-samurai-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-mamelukes-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-mamelukes-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 200)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-teutonic-knights-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-teutonic-knights-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )

		#end-if

        #load-if-defined BOHEMIANS-CIV

            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-spearmen-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-spearmen-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-eagle-warriors-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-eagle-warriors-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (players-unit-type-count any-enemy condottiero >= 5)
            =>
            (set-goal g-temp -500)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-foot-archers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-foot-archers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-skirmishers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-skirmishers-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 300)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-cavalry-archers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-cavalry-archers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-light-cavalry-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-light-cavalry-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-heavy-cavalry-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-heavy-cavalry-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-camels-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-camels-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-monks-count >= 4)
            =>
            (up-modify-goal g-temp g:= g-enemy-monks-count)
            (up-modify-goal g-temp c:min 10)
            (up-modify-goal g-temp c:* -30)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-jaguar-warriors-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-jaguar-warriors-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-huskarls-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-huskarls-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-chakram-throwers-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-chakram-throwers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-genoese-crossbowmen-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-genoese-crossbowmen-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-samurai-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-samurai-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-teutonic-knights-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-teutonic-knights-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )

        #end-if

		#load-if-defined BRITON-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-spearmen-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-spearmen-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-eagle-warriors-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-eagle-warriors-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-skirmishers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-skirmishers-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 200)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-light-cavalry-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-light-cavalry-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-heavy-cavalry-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-heavy-cavalry-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-camels-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-camels-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-elephants-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-elephants-count)
            (up-modify-goal g-temp c:min 12)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-monks-count >= 4)
            =>
            (up-modify-goal g-temp g:= g-enemy-monks-count)
            (up-modify-goal g-temp c:min 10)
            (up-modify-goal g-temp c:* 30)
            (up-modify-goal g-temp c:+ 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-field-siege-count >= 4)
            =>
            (up-modify-goal g-temp g:= g-enemy-field-siege-count)
            (up-modify-goal g-temp c:min 10)
            (up-modify-goal g-temp c:* -30)
            (up-modify-goal g-temp c:- 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-jaguar-warriors-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-jaguar-warriors-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-huskarls-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-huskarls-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 250)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-chakram-throwers-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-chakram-throwers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-samurai-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-samurai-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-mamelukes-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-mamelukes-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-teutonic-knights-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-teutonic-knights-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )

		#end-if

		#load-if-defined BULGARIANS-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-spearmen-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-spearmen-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-eagle-warriors-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-eagle-warriors-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-skirmishers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-skirmishers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 100)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-hand-cannoneers-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-hand-cannoneers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-camels-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-camels-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 450)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-elephants-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-elephants-count)
            (up-modify-goal g-temp c:min 12)
            (up-modify-goal g-temp c:* -25)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-monks-count >= 3)
            =>
            (up-modify-goal g-temp g:= g-enemy-monks-count)
            (up-modify-goal g-temp c:min 10)
            (up-modify-goal g-temp c:* -30)
            (up-modify-goal g-temp c:- 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-field-siege-count >= 4)
            =>
            (up-modify-goal g-temp g:= g-enemy-field-siege-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 30)
            (up-modify-goal g-temp c:+ 250)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-jaguar-warriors-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-jaguar-warriors-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-cataphracts-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-cataphracts-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-chakram-throwers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-chakram-throwers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-genoese-crossbowmen-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-genoese-crossbowmen-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 200)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-samurai-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-samurai-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-mamelukes-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-mamelukes-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 400)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-teutonic-knights-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-teutonic-knights-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )

		#end-if

		#load-if-defined BURGUNDIANS-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-spearmen-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-spearmen-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 250)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-eagle-warriors-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-eagle-warriors-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-foot-archers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-foot-archers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-skirmishers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-skirmishers-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 200)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-hand-cannoneers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-hand-cannoneers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-camels-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-camels-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 450)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-elephants-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-elephants-count)
            (up-modify-goal g-temp c:min 12)
            (up-modify-goal g-temp c:* -25)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-monks-count >= 3)
            =>
            (up-modify-goal g-temp g:= g-enemy-monks-count)
            (up-modify-goal g-temp c:min 10)
            (up-modify-goal g-temp c:* -30)
            (up-modify-goal g-temp c:- 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-field-siege-count >= 4)
            =>
            (up-modify-goal g-temp g:= g-enemy-field-siege-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 30)
            (up-modify-goal g-temp c:+ 250)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-jaguar-warriors-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-jaguar-warriors-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-cataphracts-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-cataphracts-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-chakram-throwers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-chakram-throwers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-genoese-crossbowmen-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-genoese-crossbowmen-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 200)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-samurai-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-samurai-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-mamelukes-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-mamelukes-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 400)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-teutonic-knights-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-teutonic-knights-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )

		#end-if

		#load-if-defined BURMESE-CIV
        
            #load-if-defined DE-AVAILABLE
                (defrule
                (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
                (up-compare-goal g-enemy-spearmen-count >= 6)
                (research-completed ri-parthian-tactics)
                =>
                (set-goal g-temp 200)
                (up-modify-goal g-temp s:%* csn-countering-preference)
                (up-modify-goal g-current-unit-score g:+ g-temp)
                )
            #end-if
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-spearmen-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-spearmen-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-skirmishers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-skirmishers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-camels-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-camels-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-monks-count >= 4)
            =>
            (up-modify-goal g-temp g:= g-enemy-monks-count)
            (up-modify-goal g-temp c:min 10)
            (up-modify-goal g-temp c:* 25)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-field-siege-count >= 4)
            =>
            (up-modify-goal g-temp g:= g-enemy-field-siege-count)
            (up-modify-goal g-temp c:min 10)
            (up-modify-goal g-temp c:* -25)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-jaguar-warriors-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-jaguar-warriors-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-unit-type-count any-enemy camel-archer >= 5)
                (players-unit-type-count any-enemy elite-camel-archer >= 5))
            =>
            (set-goal g-temp -500)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-cataphracts-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-cataphracts-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-huskarls-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-huskarls-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-chakram-throwers-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-chakram-throwers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-genoese-crossbowmen-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-genoese-crossbowmen-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 100)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-samurai-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-samurai-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-mamelukes-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-mamelukes-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 200)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-teutonic-knights-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-teutonic-knights-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )

		#end-if
		
		#load-if-defined BYZANTINE-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-swordsmen-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-swordsmen-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 450)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-eagle-warriors-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-eagle-warriors-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 450)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-skirmishers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-skirmishers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp2 c:= 30)                     ;if enemy has more than 30, decrease countering preference
            (up-modify-goal g-temp2 g:- g-enemy-skirmishers-count)  
            (up-modify-goal g-temp2 c:min 0)
            (up-modify-goal g-temp2 c:/ 2)
            (up-modify-goal g-temp g:+ g-temp2)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 100)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-cavalry-archers-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-cavalry-archers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-hand-cannoneers-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-hand-cannoneers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-heavy-cavalry-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-heavy-cavalry-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-camels-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-camels-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-elephants-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-elephants-count)
            (up-modify-goal g-temp c:min 12)
            (up-modify-goal g-temp c:* -25)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-monks-count >= 3)
            =>
            (up-modify-goal g-temp g:= g-enemy-monks-count)
            (up-modify-goal g-temp c:min 10)
            (up-modify-goal g-temp c:* -30)
            (up-modify-goal g-temp c:- 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-field-siege-count >= 4)
            =>
            (up-modify-goal g-temp g:= g-enemy-field-siege-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 30)
            (up-modify-goal g-temp c:+ 250)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-jaguar-warriors-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-jaguar-warriors-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 450)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-huskarls-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-huskarls-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 350)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-chakram-throwers-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-chakram-throwers-count)
            (up-modify-goal g-temp c:min 25)
            (up-modify-goal g-temp2 c:= 25)                     ;if enemy has more than 25, decrease countering preference
            (up-modify-goal g-temp2 g:- g-enemy-chakram-throwers-count)  
            (up-modify-goal g-temp2 c:min 0)
            (up-modify-goal g-temp2 c:/ 2)
            (up-modify-goal g-temp g:+ g-temp2)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 300)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-genoese-crossbowmen-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-genoese-crossbowmen-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 300)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-samurai-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-samurai-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-mamelukes-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-mamelukes-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-teutonic-knights-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-teutonic-knights-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 250)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )

		#end-if

		#load-if-defined CELTIC-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-spearmen-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-spearmen-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-eagle-warriors-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-eagle-warriors-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-skirmishers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-skirmishers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp2 c:= 30)                     ;if enemy has more than 30, decrease countering preference
            (up-modify-goal g-temp2 g:- g-enemy-skirmishers-count)  
            (up-modify-goal g-temp2 c:min 0)
            (up-modify-goal g-temp2 c:/ 2)
            (up-modify-goal g-temp g:+ g-temp2)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 100)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-cavalry-archers-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-cavalry-archers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-hand-cannoneers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-hand-cannoneers-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 300)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-elephants-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-elephants-count)
            (up-modify-goal g-temp c:min 12)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-jaguar-warriors-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-jaguar-warriors-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 250)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-cataphracts-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-cataphracts-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 350)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-huskarls-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-huskarls-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-chakram-throwers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-chakram-throwers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-samurai-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-samurai-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 350)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-teutonic-knights-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-teutonic-knights-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 250)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )

		#end-if

		#load-if-defined CHINESE-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-spearmen-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-spearmen-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-eagle-warriors-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-eagle-warriors-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-skirmishers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-skirmishers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-light-cavalry-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-light-cavalry-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-heavy-cavalry-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-heavy-cavalry-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-camels-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-camels-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-monks-count >= 4)
            =>
            (up-modify-goal g-temp g:= g-enemy-monks-count)
            (up-modify-goal g-temp c:min 10)
            (up-modify-goal g-temp c:* 30)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-field-siege-count >= 4)
            =>
            (up-modify-goal g-temp g:= g-enemy-field-siege-count)
            (up-modify-goal g-temp c:min 10)
            (up-modify-goal g-temp c:* -30)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-jaguar-warriors-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-jaguar-warriors-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-huskarls-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-huskarls-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-chakram-throwers-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-chakram-throwers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-samurai-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-samurai-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-mamelukes-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-mamelukes-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-teutonic-knights-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-teutonic-knights-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )

		#end-if

		#load-if-defined CUMANS-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-spearmen-count >= 6)
            (research-completed ri-parthian-tactics)
            =>
            (set-goal g-temp 200)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-spearmen-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-spearmen-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-skirmishers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-skirmishers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-camels-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-camels-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-monks-count >= 4)
            =>
            (up-modify-goal g-temp g:= g-enemy-monks-count)
            (up-modify-goal g-temp c:min 10)
            (up-modify-goal g-temp c:* 25)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-field-siege-count >= 4)
            =>
            (up-modify-goal g-temp g:= g-enemy-field-siege-count)
            (up-modify-goal g-temp c:min 10)
            (up-modify-goal g-temp c:* -30)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-jaguar-warriors-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-jaguar-warriors-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (players-unit-type-count any-enemy camel-archer-line >= 5)
            =>
            (set-goal g-temp -500)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-cataphracts-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-cataphracts-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-huskarls-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-huskarls-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-chakram-throwers-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-chakram-throwers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-genoese-crossbowmen-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-genoese-crossbowmen-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 100)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-samurai-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-samurai-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-mamelukes-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-mamelukes-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 200)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-teutonic-knights-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-teutonic-knights-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )

		#end-if

        #load-if-defined DRAVIDIANS-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-swordsmen-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-swordsmen-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-spearmen-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-spearmen-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-eagle-warriors-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-eagle-warriors-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-foot-archers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-foot-archers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-skirmishers-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-skirmishers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-cavalry-archers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-cavalry-archers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-hand-cannoneers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-hand-cannoneers-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 300)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-light-cavalry-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-light-cavalry-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-elephants-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-elephants-count)
            (up-modify-goal g-temp c:min 12)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-monks-count >= 4)
            =>
            (up-modify-goal g-temp g:= g-enemy-monks-count)
            (up-modify-goal g-temp c:min 10)
            (up-modify-goal g-temp c:* -25)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-field-siege-count >= 4)
            =>
            (up-modify-goal g-temp g:= g-enemy-field-siege-count)
            (up-modify-goal g-temp c:min 10)
            (up-modify-goal g-temp c:* -30)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-jaguar-warriors-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-jaguar-warriors-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-cataphracts-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-cataphracts-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-huskarls-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-huskarls-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 250)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-genoese-crossbowmen-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-genoese-crossbowmen-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-samurai-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-samurai-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-mamelukes-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-mamelukes-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )

        #end-if

		#load-if-defined ETHIOPIAN-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-spearmen-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-spearmen-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-eagle-warriors-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-eagle-warriors-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-foot-archers-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-foot-archers-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 200)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-skirmishers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-skirmishers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-cavalry-archers-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-cavalry-archers-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 200)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-hand-cannoneers-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-hand-cannoneers-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 500)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-elephants-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-elephants-count)
            (up-modify-goal g-temp c:min 12)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-field-siege-count >= 4)
            =>
            (up-modify-goal g-temp g:= g-enemy-field-siege-count)
            (up-modify-goal g-temp c:min 10)
            (up-modify-goal g-temp c:* -30)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-jaguar-warriors-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-jaguar-warriors-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 250)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-cataphracts-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-cataphracts-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 350)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-huskarls-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-huskarls-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-chakram-throwers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-chakram-throwers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-genoese-crossbowmen-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-genoese-crossbowmen-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 200)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-samurai-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-samurai-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 350)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-mamelukes-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-mamelukes-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-teutonic-knights-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-teutonic-knights-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )

		#end-if

		#load-if-defined FRANKISH-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-spearmen-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-spearmen-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-foot-archers-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-foot-archers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-skirmishers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-skirmishers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-cavalry-archers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-cavalry-archers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-hand-cannoneers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-hand-cannoneers-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 300)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-elephants-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-elephants-count)
            (up-modify-goal g-temp c:min 12)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-field-siege-count >= 4)
            =>
            (up-modify-goal g-temp g:= g-enemy-field-siege-count)
            (up-modify-goal g-temp c:min 10)
            (up-modify-goal g-temp c:* -30)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-jaguar-warriors-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-jaguar-warriors-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 250)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-cataphracts-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-cataphracts-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 350)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-chakram-throwers-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-chakram-throwers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-genoese-crossbowmen-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-genoese-crossbowmen-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-samurai-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-samurai-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 250)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-teutonic-knights-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-teutonic-knights-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )

		#end-if

		#load-if-defined GOTHIC-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (goal g-primary-unit spearman)
            =>
            (up-modify-goal g-temp g:= g-enemy-spearmen-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-swordsmen-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-swordsmen-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-spearmen-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-spearmen-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-eagle-warriors-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-eagle-warriors-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-foot-archers-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-foot-archers-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 300)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-skirmishers-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-skirmishers-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 300)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-cavalry-archers-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-cavalry-archers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp2 c:= 30)                     ;if enemy has more than 30, decrease countering preference
            (up-modify-goal g-temp2 g:- g-enemy-cavalry-archers-count)  
            (up-modify-goal g-temp2 c:min 0)
            (up-modify-goal g-temp2 c:/ 2)
            (up-modify-goal g-temp g:+ g-temp2)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 100)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-hand-cannoneers-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-hand-cannoneers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-elephants-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-elephants-count)
            (up-modify-goal g-temp c:min 12)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-field-siege-count >= 4)
            =>
            (up-modify-goal g-temp g:= g-enemy-field-siege-count)
            (up-modify-goal g-temp c:min 10)
            (up-modify-goal g-temp c:* 30)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-jaguar-warriors-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-jaguar-warriors-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 250)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-cataphracts-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-cataphracts-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 350)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-chakram-throwers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-chakram-throwers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-genoese-crossbowmen-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-genoese-crossbowmen-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 300)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-samurai-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-samurai-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 450)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-mamelukes-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-mamelukes-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-teutonic-knights-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-teutonic-knights-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 250)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )

		#end-if

        #load-if-defined GURJARAS-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-swordsmen-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-swordsmen-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-spearmen-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-spearmen-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-eagle-warriors-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-eagle-warriors-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-foot-archers-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-foot-archers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-skirmishers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-skirmishers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-cavalry-archers-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-cavalry-archers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-hand-cannoneers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-hand-cannoneers-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 300)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-light-cavalry-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-light-cavalry-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-heavy-cavalry-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-heavy-cavalry-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-camels-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-camels-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-elephants-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-elephants-count)
            (up-modify-goal g-temp c:min 12)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-field-siege-count >= 4)
            =>
            (up-modify-goal g-temp g:= g-enemy-field-siege-count)
            (up-modify-goal g-temp c:min 10)
            (up-modify-goal g-temp c:* 25)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-jaguar-warriors-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-jaguar-warriors-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-cataphracts-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-cataphracts-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 350)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-huskarls-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-huskarls-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-genoese-crossbowmen-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-genoese-crossbowmen-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-samurai-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-samurai-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-teutonic-knights-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-teutonic-knights-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )

        #end-if

		#load-if-defined HUN-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-spearmen-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-spearmen-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 250)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-foot-archers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-foot-archers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp2 c:= 20)                     ;if enemy has more than 20, decrease countering preference
            (up-modify-goal g-temp2 g:- g-enemy-foot-archers-count)  
            (up-modify-goal g-temp2 c:min 0)
            (up-modify-goal g-temp2 c:/ 2)
            (up-modify-goal g-temp g:+ g-temp2)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 100)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-skirmishers-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-skirmishers-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 300)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-cavalry-archers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-cavalry-archers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-hand-cannoneers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-hand-cannoneers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-camels-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-camels-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 450)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-elephants-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-elephants-count)
            (up-modify-goal g-temp c:min 12)
            (up-modify-goal g-temp c:* -25)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-monks-count >= 3)
            =>
            (up-modify-goal g-temp g:= g-enemy-monks-count)
            (up-modify-goal g-temp c:min 10)
            (up-modify-goal g-temp c:* -30)
            (up-modify-goal g-temp c:- 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-field-siege-count >= 4)
            =>
            (up-modify-goal g-temp g:= g-enemy-field-siege-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 30)
            (up-modify-goal g-temp c:+ 250)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-jaguar-warriors-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-jaguar-warriors-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-chakram-throwers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-chakram-throwers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-genoese-crossbowmen-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-genoese-crossbowmen-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-samurai-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-samurai-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-mamelukes-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-mamelukes-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 400)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-teutonic-knights-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-teutonic-knights-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )

		#end-if

		#load-if-defined INCAN-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-swordsmen-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-swordsmen-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-spearmen-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-spearmen-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-eagle-warriors-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-eagle-warriors-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-foot-archers-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-foot-archers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-skirmishers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-skirmishers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-cavalry-archers-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-cavalry-archers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-hand-cannoneers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-hand-cannoneers-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 300)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-light-cavalry-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-light-cavalry-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-heavy-cavalry-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-heavy-cavalry-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-camels-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-camels-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-monks-count >= 4)
            =>
            (up-modify-goal g-temp g:= g-enemy-monks-count)
            (up-modify-goal g-temp c:min 10)
            (up-modify-goal g-temp c:* -25)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-field-siege-count >= 4)
            =>
            (up-modify-goal g-temp g:= g-enemy-field-siege-count)
            (up-modify-goal g-temp c:min 10)
            (up-modify-goal g-temp c:* -30)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-jaguar-warriors-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-jaguar-warriors-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 250)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-cataphracts-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-cataphracts-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 350)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-huskarls-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-huskarls-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-chakram-throwers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-chakram-throwers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-genoese-crossbowmen-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-genoese-crossbowmen-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-samurai-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-samurai-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 350)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-teutonic-knights-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-teutonic-knights-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 250)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            

		#end-if

		#load-if-defined INDIAN-CIV
        
            #load-if-not-defined DE-AVAILABLE
            
                (defrule
                (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
                (up-compare-goal g-enemy-foot-archers-count >= 6)
                =>
                (up-modify-goal g-temp g:= g-enemy-foot-archers-count)
                (up-modify-goal g-temp c:min 20)
                (up-modify-goal g-temp c:* 20)
                (up-modify-goal g-temp s:%* csn-countering-preference)
                (up-modify-goal g-current-unit-score g:+ g-temp)
                )
                (defrule
                (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
                (up-compare-goal g-enemy-skirmishers-count >= 6)
                =>
                (up-modify-goal g-temp g:= g-enemy-skirmishers-count)
                (up-modify-goal g-temp c:min 20)
                (up-modify-goal g-temp c:* -20)
                (up-modify-goal g-temp s:%* csn-countering-preference)
                (up-modify-goal g-current-unit-score g:+ g-temp)
                )
                (defrule
                (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
                (up-compare-goal g-enemy-camels-count >= 7)
                =>
                (up-modify-goal g-temp g:= g-enemy-camels-count)
                (up-modify-goal g-temp c:min 15)
                (up-modify-goal g-temp c:* -15)
                (up-modify-goal g-temp s:%* csn-countering-preference)
                (up-modify-goal g-current-unit-score g:+ g-temp)
                )
                (defrule
                (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
                (up-compare-goal g-enemy-field-siege-count >= 3)
                (players-unit-type-count any-enemy scorpion-line > 2)
                =>
                (up-modify-goal g-temp g:= g-enemy-field-siege-count)
                (up-modify-goal g-temp c:min 10)
                (up-modify-goal g-temp c:* -30)
                (up-modify-goal g-temp c:- 150)
                (up-modify-goal g-temp s:%* csn-countering-preference)
                (up-modify-goal g-current-unit-score g:+ g-temp)
                )
                (defrule
                (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
                (up-compare-goal g-enemy-jaguar-warriors-count >= 6)
                =>
                (up-modify-goal g-temp g:= g-enemy-jaguar-warriors-count)
                (up-modify-goal g-temp c:min 15)
                (up-modify-goal g-temp c:* 20)
                (up-modify-goal g-temp c:+ 50)
                (up-modify-goal g-temp s:%* csn-countering-preference)
                (up-modify-goal g-current-unit-score g:+ g-temp)
                )
                (defrule
                (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
                (or
                    (players-unit-type-count any-enemy camel-archer >= 5)
                    (players-unit-type-count any-enemy elite-camel-archer >= 5))
                =>
                (set-goal g-temp -500)
                (up-modify-goal g-temp s:%* csn-countering-preference)
                (up-modify-goal g-current-unit-score g:+ g-temp)
                )
                (defrule
                (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
                (up-compare-goal g-enemy-cataphracts-count >= 7)
                =>
                (up-modify-goal g-temp g:= g-enemy-cataphracts-count)
                (up-modify-goal g-temp c:min 15)
                (up-modify-goal g-temp c:* 15)
                (up-modify-goal g-temp s:%* csn-countering-preference)
                (up-modify-goal g-current-unit-score g:+ g-temp)
                )
                (defrule
                (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
                (up-compare-goal g-enemy-huskarls-count >= 5)
                =>
                (up-modify-goal g-temp g:= g-enemy-huskarls-count)
                (up-modify-goal g-temp c:min 20)
                (up-modify-goal g-temp c:* -20)
                (up-modify-goal g-temp c:- 250)
                (up-modify-goal g-temp s:%* csn-countering-preference)
                (up-modify-goal g-current-unit-score g:+ g-temp)
                )
                (defrule
                (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
                (up-compare-goal g-enemy-chakram-throwers-count >= 7)
                =>
                (up-modify-goal g-temp g:= g-enemy-chakram-throwers-count)
                (up-modify-goal g-temp c:min 20)
                (up-modify-goal g-temp c:* 15)
                (up-modify-goal g-temp s:%* csn-countering-preference)
                (up-modify-goal g-current-unit-score g:+ g-temp)
                )
                (defrule
                (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
                (up-compare-goal g-enemy-genoese-crossbowmen-count >= 5)
                =>
                (up-modify-goal g-temp g:= g-enemy-genoese-crossbowmen-count)
                (up-modify-goal g-temp c:min 20)
                (up-modify-goal g-temp c:* -20)
                (up-modify-goal g-temp c:- 100)
                (up-modify-goal g-temp s:%* csn-countering-preference)
                (up-modify-goal g-current-unit-score g:+ g-temp)
                )
                (defrule
                (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
                (up-compare-goal g-enemy-mamelukes-count >= 7)
                =>
                (up-modify-goal g-temp g:= g-enemy-mamelukes-count)
                (up-modify-goal g-temp c:min 30)
                (up-modify-goal g-temp c:* -20)
                (up-modify-goal g-temp c:- 200)
                (up-modify-goal g-temp s:%* csn-countering-preference)
                (up-modify-goal g-current-unit-score g:+ g-temp)
                )
                (defrule
                (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
                (up-compare-goal g-enemy-teutonic-knights-count >= 5)
                =>
                (up-modify-goal g-temp g:= g-enemy-teutonic-knights-count)
                (up-modify-goal g-temp c:min 15)
                (up-modify-goal g-temp c:* 20)
                (up-modify-goal g-temp c:+ 150)
                (up-modify-goal g-temp s:%* csn-countering-preference)
                (up-modify-goal g-current-unit-score g:+ g-temp)
                )
            #else
            
                (defrule
                (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
                (up-compare-goal g-enemy-spearmen-count >= 7)
                =>
                (up-modify-goal g-temp g:= g-enemy-spearmen-count)
                (up-modify-goal g-temp c:min 15)
                (up-modify-goal g-temp c:* 15)
                (up-modify-goal g-temp s:%* csn-countering-preference)
                (up-modify-goal g-current-unit-score g:+ g-temp)
                )
                (defrule
                (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
                (up-compare-goal g-enemy-eagle-warriors-count >= 7)
                =>
                (up-modify-goal g-temp g:= g-enemy-eagle-warriors-count)
                (up-modify-goal g-temp c:min 15)
                (up-modify-goal g-temp c:* 15)
                (up-modify-goal g-temp s:%* csn-countering-preference)
                (up-modify-goal g-current-unit-score g:+ g-temp)
                )
                (defrule
                (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
                (up-compare-goal g-enemy-foot-archers-count >= 5)
                =>
                (up-modify-goal g-temp g:= g-enemy-foot-archers-count)
                (up-modify-goal g-temp c:min 25)
                (up-modify-goal g-temp2 c:= 25)                     ;if enemy has more than 25, decrease countering preference
                (up-modify-goal g-temp2 g:- g-enemy-foot-archers-count)  
                (up-modify-goal g-temp2 c:min 0)
                (up-modify-goal g-temp2 c:/ 2)
                (up-modify-goal g-temp g:+ g-temp2)
                (up-modify-goal g-temp c:* 20)
                (up-modify-goal g-temp c:+ 200)
                (up-modify-goal g-temp s:%* csn-countering-preference)
                (up-modify-goal g-current-unit-score g:+ g-temp)
                )
                (defrule
                (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
                (up-compare-goal g-enemy-skirmishers-count >= 5)
                =>
                (up-modify-goal g-temp g:= g-enemy-skirmishers-count)
                (up-modify-goal g-temp c:min 30)
                (up-modify-goal g-temp c:* 20)
                (up-modify-goal g-temp c:+ 400)
                (up-modify-goal g-temp s:%* csn-countering-preference)
                (up-modify-goal g-current-unit-score g:+ g-temp)
                )
                (defrule
                (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
                (up-compare-goal g-enemy-hand-cannoneers-count >= 6)
                =>
                (up-modify-goal g-temp g:= g-enemy-hand-cannoneers-count)
                (up-modify-goal g-temp c:min 20)
                (up-modify-goal g-temp c:* -20)
                (up-modify-goal g-temp c:- 100)
                (up-modify-goal g-temp s:%* csn-countering-preference)
                (up-modify-goal g-current-unit-score g:+ g-temp)
                )
                (defrule
                (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
                (up-compare-goal g-enemy-heavy-cavalry-count >= 6)
                =>
                (up-modify-goal g-temp g:= g-enemy-heavy-cavalry-count)
                (up-modify-goal g-temp c:min 15)
                (up-modify-goal g-temp c:* -20)
                (up-modify-goal g-temp c:- 50)
                (up-modify-goal g-temp s:%* csn-countering-preference)
                (up-modify-goal g-current-unit-score g:+ g-temp)
                )
                (defrule
                (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
                (up-compare-goal g-enemy-elephants-count >= 5)
                =>
                (up-modify-goal g-temp g:= g-enemy-elephants-count)
                (up-modify-goal g-temp c:min 12)
                (up-modify-goal g-temp c:* -25)
                (up-modify-goal g-temp s:%* csn-countering-preference)
                (up-modify-goal g-current-unit-score g:+ g-temp)
                )
                (defrule
                (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
                (up-compare-goal g-enemy-monks-count >= 4)
                =>
                (up-modify-goal g-temp g:= g-enemy-monks-count)
                (up-modify-goal g-temp c:min 10)
                (up-modify-goal g-temp c:* 25)
                (up-modify-goal g-temp s:%* csn-countering-preference)
                (up-modify-goal g-current-unit-score g:+ g-temp)
                )
                (defrule
                (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
                (up-compare-goal g-enemy-field-siege-count >= 4)
                =>
                (up-modify-goal g-temp g:= g-enemy-field-siege-count)
                (up-modify-goal g-temp c:min 10)
                (up-modify-goal g-temp c:* 25)
                (up-modify-goal g-temp s:%* csn-countering-preference)
                (up-modify-goal g-current-unit-score g:+ g-temp)
                )
                (defrule
                (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
                (up-compare-goal g-enemy-jaguar-warriors-count >= 5)
                =>
                (up-modify-goal g-temp g:= g-enemy-jaguar-warriors-count)
                (up-modify-goal g-temp c:min 20)
                (up-modify-goal g-temp c:* -20)
                (up-modify-goal g-temp c:- 250)
                (up-modify-goal g-temp s:%* csn-countering-preference)
                (up-modify-goal g-current-unit-score g:+ g-temp)
                )
                (defrule
                (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
                (up-compare-goal g-enemy-cataphracts-count >= 5)
                =>
                (up-modify-goal g-temp g:= g-enemy-cataphracts-count)
                (up-modify-goal g-temp c:min 20)
                (up-modify-goal g-temp c:* -20)
                (up-modify-goal g-temp c:- 350)
                (up-modify-goal g-temp s:%* csn-countering-preference)
                (up-modify-goal g-current-unit-score g:+ g-temp)
                )
                (defrule
                (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
                (up-compare-goal g-enemy-chakram-throwers-count >= 6)
                =>
                (up-modify-goal g-temp g:= g-enemy-chakram-throwers-count)
                (up-modify-goal g-temp c:min 20)
                (up-modify-goal g-temp c:* 20)
                (up-modify-goal g-temp s:%* csn-countering-preference)
                (up-modify-goal g-current-unit-score g:+ g-temp)
                )
                (defrule
                (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
                (up-compare-goal g-enemy-genoese-crossbowmen-count >= 5)
                =>
                (up-modify-goal g-temp g:= g-enemy-genoese-crossbowmen-count)
                (up-modify-goal g-temp c:min 25)
                (up-modify-goal g-temp2 c:= 25)                     ;if enemy has more than 25, decrease countering preference
                (up-modify-goal g-temp2 g:- g-enemy-genoese-crossbowmen-count)  
                (up-modify-goal g-temp2 c:min 0)
                (up-modify-goal g-temp2 c:/ 2)
                (up-modify-goal g-temp g:+ g-temp2)
                (up-modify-goal g-temp c:* 20)
                (up-modify-goal g-temp c:+ 200)
                (up-modify-goal g-temp s:%* csn-countering-preference)
                (up-modify-goal g-current-unit-score g:+ g-temp)
                )
                (defrule
                (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
                (up-compare-goal g-enemy-samurai-count >= 5)
                =>
                (up-modify-goal g-temp g:= g-enemy-samurai-count)
                (up-modify-goal g-temp c:min 20)
                (up-modify-goal g-temp c:* -20)
                (up-modify-goal g-temp c:- 350)
                (up-modify-goal g-temp s:%* csn-countering-preference)
                (up-modify-goal g-current-unit-score g:+ g-temp)
                )
                (defrule
                (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
                (up-compare-goal g-enemy-mamelukes-count >= 6)
                =>
                (up-modify-goal g-temp g:= g-enemy-mamelukes-count)
                (up-modify-goal g-temp c:min 20)
                (up-modify-goal g-temp c:* -15)
                (up-modify-goal g-temp s:%* csn-countering-preference)
                (up-modify-goal g-current-unit-score g:+ g-temp)
                )
                (defrule
                (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
                (up-compare-goal g-enemy-teutonic-knights-count >= 6)
                =>
                (up-modify-goal g-temp g:= g-enemy-teutonic-knights-count)
                (up-modify-goal g-temp c:min 15)
                (up-modify-goal g-temp c:* -20)
                (up-modify-goal g-temp c:- 50)
                (up-modify-goal g-temp s:%* csn-countering-preference)
                (up-modify-goal g-current-unit-score g:+ g-temp)
                )
                
            #end-if
		#end-if

		#load-if-defined ITALIAN-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-eagle-warriors-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-eagle-warriors-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-skirmishers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-skirmishers-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 200)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-cavalry-archers-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-cavalry-archers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 100)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-light-cavalry-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-light-cavalry-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-heavy-cavalry-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-heavy-cavalry-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 250)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-camels-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-camels-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 250)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-elephants-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-elephants-count)
            (up-modify-goal g-temp c:min 18)
            (up-modify-goal g-temp c:* 25)
            (up-modify-goal g-temp c:+ 250)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-monks-count >= 4)
            =>
            (up-modify-goal g-temp g:= g-enemy-monks-count)
            (up-modify-goal g-temp c:min 10)
            (up-modify-goal g-temp c:* 30)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-field-siege-count >= 4)
            =>
            (up-modify-goal g-temp g:= g-enemy-field-siege-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -30)
            (up-modify-goal g-temp c:- 350)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-jaguar-warriors-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-jaguar-warriors-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-huskarls-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-huskarls-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 250)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-chakram-throwers-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-chakram-throwers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-samurai-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-samurai-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-mamelukes-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-mamelukes-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 200)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-teutonic-knights-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-teutonic-knights-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )

		#end-if

		#load-if-defined JAPANESE-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-spearmen-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-spearmen-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-eagle-warriors-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-eagle-warriors-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (players-unit-type-count any-enemy condottiero >= 5)
            =>
            (set-goal g-temp 600)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-foot-archers-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-foot-archers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-skirmishers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-skirmishers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-cavalry-archers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-cavalry-archers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-hand-cannoneers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-hand-cannoneers-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 300)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-elephants-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-elephants-count)
            (up-modify-goal g-temp c:min 12)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-monks-count >= 4)
            =>
            (up-modify-goal g-temp g:= g-enemy-monks-count)
            (up-modify-goal g-temp c:min 10)
            (up-modify-goal g-temp c:* -25)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-field-siege-count >= 4)
            =>
            (up-modify-goal g-temp g:= g-enemy-field-siege-count)
            (up-modify-goal g-temp c:min 10)
            (up-modify-goal g-temp c:* -30)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-cataphracts-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-cataphracts-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-huskarls-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-huskarls-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 450)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-chakram-throwers-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-chakram-throwers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp2 c:= 20)                     ;if enemy has more than 20, decrease countering preference
            (up-modify-goal g-temp2 g:- g-enemy-chakram-throwers-count)  
            (up-modify-goal g-temp2 c:min 0)
            (up-modify-goal g-temp2 c:/ 2)
            (up-modify-goal g-temp g:+ g-temp2)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 200)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-genoese-crossbowmen-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-genoese-crossbowmen-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-unit-type-count any-enemy woad-raider-line >= 5)
                (or
                    (players-unit-type-count any-enemy berserk-line >= 5)
                    (or
                        (players-unit-type-count any-enemy shotel-warrior >= 5)
                        (or
                            (players-unit-type-count any-enemy elite-shotel-warrior >= 5)
                            (or
                                (players-unit-type-count any-enemy karambit-warrior >= 5)
                                (or
                                    (players-unit-type-count any-enemy elite-karambit-warrior >= 5)
                                    (players-unit-type-count any-enemy foot-konnik-line >= 5)))))))
            =>
            (set-goal g-temp 600)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-unit-type-count any-enemy kamayuk >= 5)
                (players-unit-type-count any-enemy elite-kamayuk >= 5))
            =>
            (set-goal g-temp 600)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (players-unit-type-count any-enemy throwing-axeman-line >= 5)
            =>
            (set-goal g-temp 500)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-unit-type-count any-enemy gbeto >= 5)
                (or
                    (players-unit-type-count any-enemy elite-gbeto >= 5)
                    (or
                        (players-unit-type-count any-enemy chu-ko-nu-line >= 5)
                        (or
                            (players-unit-type-count any-enemy janissary-line >= 5)
                            (or
                                (players-unit-type-count any-enemy rattan-archer >= 5)
                                (players-unit-type-count any-enemy elite-rattan-archer >= 5))))))
            =>
            (set-goal g-temp 400)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-unit-type-count any-enemy tarkan-line >= 6)
                (or
                    (players-unit-type-count any-enemy stable-tarkan >= 6)
                    (or
                        (players-unit-type-count any-enemy stable-elite-tarkan >= 6)
                        (or
                            (players-unit-type-count any-enemy magyar-huszar >= 6)
                            (or
                                (players-unit-type-count any-enemy elite-magyar-huszar >= 6)
                                (or
                                    (players-unit-type-count any-enemy boyar >= 6)
                                    (players-unit-type-count any-enemy elite-boyar >= 6)))))))
            =>
            (set-goal g-temp 300)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-unit-type-count any-enemy keshik-line >= 6)
                (or
                    (players-unit-type-count any-enemy konnik-line >= 6)
                    (or
                        (players-unit-type-count any-enemy steppe-lancer-line >= 6)
                        (or
                            (players-unit-type-count any-enemy war-elephant-line >= 5)
                            (players-unit-type-count any-enemy leitis-line >= 6)))))
            =>
            (set-goal g-temp 300)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-unit-type-count any-enemy longbowman-line >= 7)
                (or
                    (players-unit-type-count any-enemy plumed-archer-line >= 7)
                    (or
                        (players-unit-type-count any-enemy genitour >= 7)
                        (or
                            (players-unit-type-count any-enemy elite-genitour >= 7)
                            (or
                                (players-unit-type-count any-enemy arambai >= 7)
                                (or
                                    (players-unit-type-count any-enemy elite-arambai >= 7)
                                    (players-unit-type-count any-enemy mangudai-line >= 7)))))))
            =>
            (set-goal g-temp 200)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-unit-type-count any-enemy war-wagon-line >= 7)
                (or
                    (players-unit-type-count any-enemy conquistador-line >= 7)
                    (or
                        (players-unit-type-count any-enemy kipchak-line >= 7)
                        (or
                            (players-unit-type-count any-enemy slinger >= 7)
                            (or
                                (players-unit-type-count any-enemy ballista-elephant >= 7)
                                (players-unit-type-count any-enemy elite-ballista-elephant >= 7))))))
            =>
            (set-goal g-temp 200)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-unit-type-count any-enemy organ-gun >= 7)
                (or
                    (players-unit-type-count any-enemy elite-organ-gun >= 7)
                    (or
                        (players-unit-type-count any-enemy camel-archer >= 7)
                        (players-unit-type-count any-enemy elite-camel-archer >= 7))))
            =>
            (set-goal g-temp 200)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )

		#end-if

		#load-if-defined KHMER-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-eagle-warriors-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-eagle-warriors-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-foot-archers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-foot-archers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-skirmishers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-skirmishers-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 300)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-cavalry-archers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-cavalry-archers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-light-cavalry-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-light-cavalry-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-heavy-cavalry-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-heavy-cavalry-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-camels-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-camels-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-monks-count >= 3)
            =>
            (up-modify-goal g-temp g:= g-enemy-monks-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -30)
            (up-modify-goal g-temp c:- 350)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-jaguar-warriors-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-jaguar-warriors-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-huskarls-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-huskarls-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-chakram-throwers-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-chakram-throwers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-genoese-crossbowmen-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-genoese-crossbowmen-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 200)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-samurai-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-samurai-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-mamelukes-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-mamelukes-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 200)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-teutonic-knights-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-teutonic-knights-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )

		#end-if

		#load-if-defined KOREAN-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-spearmen-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-spearmen-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-foot-archers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-foot-archers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 100)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-skirmishers-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-skirmishers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-cavalry-archers-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-cavalry-archers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-camels-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-camels-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-monks-count >= 4)
            =>
            (up-modify-goal g-temp g:= g-enemy-monks-count)
            (up-modify-goal g-temp c:min 10)
            (up-modify-goal g-temp c:* -25)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-field-siege-count >= 4)
            =>
            (up-modify-goal g-temp g:= g-enemy-field-siege-count)
            (up-modify-goal g-temp c:min 10)
            (up-modify-goal g-temp c:* -25)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-jaguar-warriors-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-jaguar-warriors-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-unit-type-count any-enemy camel-archer >= 5)
                (players-unit-type-count any-enemy elite-camel-archer >= 5))
            =>
            (set-goal g-temp -400)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-cataphracts-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-cataphracts-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-huskarls-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-huskarls-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 250)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-chakram-throwers-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-chakram-throwers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-genoese-crossbowmen-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-genoese-crossbowmen-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-samurai-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-samurai-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-mamelukes-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-mamelukes-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 200)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-teutonic-knights-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-teutonic-knights-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )

		#end-if

		#load-if-defined LITHUANIANS-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-spearmen-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-spearmen-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 250)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-eagle-warriors-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-eagle-warriors-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-foot-archers-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-foot-archers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-skirmishers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-skirmishers-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 200)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-hand-cannoneers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-hand-cannoneers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-camels-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-camels-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 450)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-elephants-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-elephants-count)
            (up-modify-goal g-temp c:min 12)
            (up-modify-goal g-temp c:* -25)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-monks-count >= 3)
            =>
            (up-modify-goal g-temp g:= g-enemy-monks-count)
            (up-modify-goal g-temp c:min 10)
            (up-modify-goal g-temp c:* -30)
            (up-modify-goal g-temp c:- 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-field-siege-count >= 4)
            =>
            (up-modify-goal g-temp g:= g-enemy-field-siege-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 30)
            (up-modify-goal g-temp c:+ 250)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-jaguar-warriors-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-jaguar-warriors-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-cataphracts-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-cataphracts-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-chakram-throwers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-chakram-throwers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-genoese-crossbowmen-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-genoese-crossbowmen-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 200)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-samurai-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-samurai-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-mamelukes-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-mamelukes-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 400)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-teutonic-knights-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-teutonic-knights-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 350)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )

		#end-if

		#load-if-defined MAGYAR-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-spearmen-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-spearmen-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 250)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-foot-archers-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-foot-archers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-skirmishers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-skirmishers-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 200)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-cavalry-archers-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-cavalry-archers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-hand-cannoneers-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-hand-cannoneers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-heavy-cavalry-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-heavy-cavalry-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-camels-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-camels-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 450)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-elephants-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-elephants-count)
            (up-modify-goal g-temp c:min 12)
            (up-modify-goal g-temp c:* -25)
            (up-modify-goal g-temp c:- 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-monks-count >= 4)
            =>
            (up-modify-goal g-temp g:= g-enemy-monks-count)
            (up-modify-goal g-temp c:min 10)
            (up-modify-goal g-temp c:* -25)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-field-siege-count >= 4)
            =>
            (up-modify-goal g-temp g:= g-enemy-field-siege-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 650)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-cataphracts-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-cataphracts-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-huskarls-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-huskarls-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-chakram-throwers-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-chakram-throwers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-genoese-crossbowmen-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-genoese-crossbowmen-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 100)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-samurai-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-samurai-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-mamelukes-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-mamelukes-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 400)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-teutonic-knights-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-teutonic-knights-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )

		#end-if

		#load-if-defined MALAY-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-spearmen-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-spearmen-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-eagle-warriors-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-eagle-warriors-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-foot-archers-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-foot-archers-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 200)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-skirmishers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-skirmishers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-cavalry-archers-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-cavalry-archers-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 200)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-hand-cannoneers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-hand-cannoneers-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 500)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-elephants-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-elephants-count)
            (up-modify-goal g-temp c:min 12)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-field-siege-count >= 4)
            =>
            (up-modify-goal g-temp g:= g-enemy-field-siege-count)
            (up-modify-goal g-temp c:min 10)
            (up-modify-goal g-temp c:* -30)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-jaguar-warriors-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-jaguar-warriors-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 250)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-cataphracts-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-cataphracts-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 350)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-huskarls-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-huskarls-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-chakram-throwers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-chakram-throwers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 100)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-genoese-crossbowmen-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-genoese-crossbowmen-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 200)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-samurai-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-samurai-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 350)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-mamelukes-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-mamelukes-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-teutonic-knights-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-teutonic-knights-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 250)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )

		#end-if

		#load-if-defined MALIAN-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-swordsmen-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-swordsmen-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-spearmen-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-spearmen-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-foot-archers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-foot-archers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-skirmishers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-skirmishers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-cavalry-archers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-cavalry-archers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-hand-cannoneers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-hand-cannoneers-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 300)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-jaguar-warriors-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-jaguar-warriors-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-cataphracts-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-cataphracts-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 350)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-huskarls-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-huskarls-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-genoese-crossbowmen-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-genoese-crossbowmen-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-samurai-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-samurai-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-teutonic-knights-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-teutonic-knights-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )

		#end-if

		#load-if-defined MAYAN-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-swordsmen-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-swordsmen-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-spearmen-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-spearmen-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-foot-archers-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-foot-archers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-skirmishers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-skirmishers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 100)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-cavalry-archers-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-cavalry-archers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-light-cavalry-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-light-cavalry-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-heavy-cavalry-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-heavy-cavalry-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-camels-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-camels-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-monks-count >= 4)
            =>
            (up-modify-goal g-temp g:= g-enemy-monks-count)
            (up-modify-goal g-temp c:min 10)
            (up-modify-goal g-temp c:* 30)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-field-siege-count >= 4)
            =>
            (up-modify-goal g-temp g:= g-enemy-field-siege-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -30)
            (up-modify-goal g-temp c:- 350)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-jaguar-warriors-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-jaguar-warriors-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-huskarls-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-huskarls-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-chakram-throwers-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-chakram-throwers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-genoese-crossbowmen-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-genoese-crossbowmen-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-samurai-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-samurai-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-mamelukes-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-mamelukes-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-teutonic-knights-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-teutonic-knights-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )

		#end-if

		#load-if-defined MONGOL-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-spearmen-count >= 6)
            (research-completed ri-parthian-tactics)
            =>
            (set-goal g-temp 200)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-spearmen-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-spearmen-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-skirmishers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-skirmishers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 100)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-camels-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-camels-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-monks-count >= 4)
            =>
            (up-modify-goal g-temp g:= g-enemy-monks-count)
            (up-modify-goal g-temp c:min 10)
            (up-modify-goal g-temp c:* 25)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-field-siege-count >= 4)
            =>
            (up-modify-goal g-temp g:= g-enemy-field-siege-count)
            (up-modify-goal g-temp c:min 10)
            (up-modify-goal g-temp c:* 30)
            (up-modify-goal g-temp c:+ 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-jaguar-warriors-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-jaguar-warriors-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-unit-type-count any-enemy camel-archer >= 5)
                (players-unit-type-count any-enemy elite-camel-archer >= 5))
            =>
            (set-goal g-temp -500)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-cataphracts-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-cataphracts-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-huskarls-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-huskarls-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 250)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-chakram-throwers-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-chakram-throwers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-genoese-crossbowmen-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-genoese-crossbowmen-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 100)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-samurai-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-samurai-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-mamelukes-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-mamelukes-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 200)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-teutonic-knights-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-teutonic-knights-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )

		#end-if

		#load-if-defined PERSIAN-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-swordsmen-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-swordsmen-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-spearmen-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-spearmen-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 550)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-foot-archers-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-foot-archers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-cavalry-archers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-cavalry-archers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 100)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-hand-cannoneers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-hand-cannoneers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-camels-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-camels-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-monks-count >= 3)
            =>
            (up-modify-goal g-temp g:= g-enemy-monks-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -30)
            (up-modify-goal g-temp c:- 550)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-field-siege-count >= 4)
            (players-unit-type-count any-enemy scorpion-line >= 2)
            =>
            (up-modify-goal g-temp g:= g-enemy-field-siege-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -30)
            (up-modify-goal g-temp c:- 250)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-jaguar-warriors-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-jaguar-warriors-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-cataphracts-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-cataphracts-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-huskarls-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-huskarls-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-genoese-crossbowmen-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-genoese-crossbowmen-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 200)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-samurai-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-samurai-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-mamelukes-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-mamelukes-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 200)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-teutonic-knights-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-teutonic-knights-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )

		#end-if

		#load-if-defined POLES-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-spearmen-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-spearmen-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-eagle-warriors-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-eagle-warriors-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-foot-archers-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-foot-archers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-skirmishers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-skirmishers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-cavalry-archers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-cavalry-archers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-hand-cannoneers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-hand-cannoneers-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 300)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-heavy-cavalry-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-heavy-cavalry-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-elephants-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-elephants-count)
            (up-modify-goal g-temp c:min 12)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-monks-count >= 4)
            =>
            (up-modify-goal g-temp g:= g-enemy-monks-count)
            (up-modify-goal g-temp c:min 10)
            (up-modify-goal g-temp c:* -25)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-field-siege-count >= 4)
            =>
            (up-modify-goal g-temp g:= g-enemy-field-siege-count)
            (up-modify-goal g-temp c:min 10)
            (up-modify-goal g-temp c:* -30)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-jaguar-warriors-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-jaguar-warriors-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 250)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-cataphracts-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-cataphracts-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 350)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-huskarls-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-huskarls-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 350)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-chakram-throwers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-chakram-throwers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-genoese-crossbowmen-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-genoese-crossbowmen-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-samurai-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-samurai-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 350)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-mamelukes-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-mamelukes-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-teutonic-knights-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-teutonic-knights-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )

		#end-if

		#load-if-defined PORTUGUESE-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-eagle-warriors-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-eagle-warriors-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (players-unit-type-count any-enemy condottiero >= 5)
            =>
            (set-goal g-temp -500)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-foot-archers-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-foot-archers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-skirmishers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-skirmishers-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 300)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-cavalry-archers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-cavalry-archers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-light-cavalry-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-light-cavalry-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 250)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-heavy-cavalry-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-heavy-cavalry-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-camels-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-camels-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-monks-count >= 4)
            =>
            (up-modify-goal g-temp g:= g-enemy-monks-count)
            (up-modify-goal g-temp c:min 10)
            (up-modify-goal g-temp c:* -30)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-jaguar-warriors-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-jaguar-warriors-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-cataphracts-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-cataphracts-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-huskarls-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-huskarls-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-chakram-throwers-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-chakram-throwers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-genoese-crossbowmen-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-genoese-crossbowmen-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-samurai-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-samurai-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-teutonic-knights-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-teutonic-knights-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )

		#end-if

		#load-if-defined SARACEN-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-foot-archers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-foot-archers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-skirmishers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-skirmishers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp2 c:= 25)                     ;if enemy has more than 25, decrease countering preference
            (up-modify-goal g-temp2 g:- g-enemy-skirmishers-count)  
            (up-modify-goal g-temp2 c:min 0)
            (up-modify-goal g-temp2 c:/ 2)
            (up-modify-goal g-temp g:+ g-temp2)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 100)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-cavalry-archers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-cavalry-archers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-hand-cannoneers-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-hand-cannoneers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-light-cavalry-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-huskarls-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 450)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-heavy-cavalry-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-heavy-cavalry-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 550)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-camels-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-camels-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 250)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-elephants-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-elephants-count)
            (up-modify-goal g-temp c:min 12)
            (up-modify-goal g-temp c:* 25)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-monks-count >= 4)
            =>
            (up-modify-goal g-temp g:= g-enemy-monks-count)
            (up-modify-goal g-temp c:min 10)
            (up-modify-goal g-temp c:* -30)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-field-siege-count >= 4)
            =>
            (up-modify-goal g-temp g:= g-enemy-field-siege-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 30)
            (up-modify-goal g-temp c:+ 350)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-cataphracts-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-cataphracts-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-huskarls-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-huskarls-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-chakram-throwers-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-chakram-throwers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-genoese-crossbowmen-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-genoese-crossbowmen-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 100)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-teutonic-knights-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-teutonic-knights-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )

		#end-if

		#load-if-defined SICILIANS-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-spearmen-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-spearmen-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-eagle-warriors-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-eagle-warriors-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-foot-archers-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-foot-archers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-skirmishers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-skirmishers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-cavalry-archers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-cavalry-archers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-hand-cannoneers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-hand-cannoneers-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 300)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-elephants-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-elephants-count)
            (up-modify-goal g-temp c:min 12)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-monks-count >= 4)
            =>
            (up-modify-goal g-temp g:= g-enemy-monks-count)
            (up-modify-goal g-temp c:min 10)
            (up-modify-goal g-temp c:* -25)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-field-siege-count >= 4)
            =>
            (up-modify-goal g-temp g:= g-enemy-field-siege-count)
            (up-modify-goal g-temp c:min 10)
            (up-modify-goal g-temp c:* -30)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-jaguar-warriors-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-jaguar-warriors-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 250)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-cataphracts-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-cataphracts-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 350)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-huskarls-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-huskarls-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-genoese-crossbowmen-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-genoese-crossbowmen-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-samurai-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-samurai-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 350)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-mamelukes-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-mamelukes-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-teutonic-knights-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-teutonic-knights-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 250)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )

		#end-if

		#load-if-defined SLAVIC-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-swordsmen-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-swordsmen-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-eagle-warriors-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-eagle-warriors-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-spearmen-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-spearmen-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 250)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-foot-archers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-foot-archers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-skirmishers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-skirmishers-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 200)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-hand-cannoneers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-hand-cannoneers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-light-cavalry-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-light-cavalry-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-heavy-cavalry-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-heavy-cavalry-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-camels-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-camels-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 450)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-elephants-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-elephants-count)
            (up-modify-goal g-temp c:min 12)
            (up-modify-goal g-temp c:* -25)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-monks-count >= 3)
            =>
            (up-modify-goal g-temp g:= g-enemy-monks-count)
            (up-modify-goal g-temp c:min 10)
            (up-modify-goal g-temp c:* -30)
            (up-modify-goal g-temp c:- 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-field-siege-count >= 4)
            =>
            (up-modify-goal g-temp g:= g-enemy-field-siege-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 30)
            (up-modify-goal g-temp c:+ 250)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-jaguar-warriors-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-jaguar-warriors-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-cataphracts-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-cataphracts-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 250)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-huskarls-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-huskarls-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-chakram-throwers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-chakram-throwers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-genoese-crossbowmen-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-genoese-crossbowmen-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 200)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-samurai-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-samurai-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-mamelukes-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-mamelukes-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 400)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-teutonic-knights-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-teutonic-knights-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )

		#end-if

		#load-if-defined SPANISH-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (players-unit-type-count any-enemy condottiero >= 6)
            =>
            (set-goal g-temp -300)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-spearmen-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-spearmen-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-foot-archers-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-foot-archers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-skirmishers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-skirmishers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-camels-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-camels-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-monks-count >= 4)
            =>
            (up-modify-goal g-temp g:= g-enemy-monks-count)
            (up-modify-goal g-temp c:min 10)
            (up-modify-goal g-temp c:* 30)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-field-siege-count >= 4)
            =>
            (up-modify-goal g-temp g:= g-enemy-field-siege-count)
            (up-modify-goal g-temp c:min 10)
            (up-modify-goal g-temp c:* -25)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-jaguar-warriors-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-jaguar-warriors-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (or
                (players-unit-type-count any-enemy camel-archer >= 5)
                (players-unit-type-count any-enemy elite-camel-archer >= 5))
            =>
            (set-goal g-temp -500)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-cataphracts-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-cataphracts-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-huskarls-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-huskarls-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-chakram-throwers-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-chakram-throwers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-genoese-crossbowmen-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-genoese-crossbowmen-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 100)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-samurai-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-samurai-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-mamelukes-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-mamelukes-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 200)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-teutonic-knights-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-teutonic-knights-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )

		#end-if

		#load-if-defined TATARS-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-spearmen-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-spearmen-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 250)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-eagle-warriors-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-eagle-warriors-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-foot-archers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-foot-archers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-skirmishers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-skirmishers-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 200)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-hand-cannoneers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-hand-cannoneers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-camels-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-camels-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 450)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-elephants-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-elephants-count)
            (up-modify-goal g-temp c:min 12)
            (up-modify-goal g-temp c:* -25)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-monks-count >= 3)
            =>
            (up-modify-goal g-temp g:= g-enemy-monks-count)
            (up-modify-goal g-temp c:min 10)
            (up-modify-goal g-temp c:* -30)
            (up-modify-goal g-temp c:- 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-field-siege-count >= 4)
            =>
            (up-modify-goal g-temp g:= g-enemy-field-siege-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 30)
            (up-modify-goal g-temp c:+ 250)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-jaguar-warriors-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-jaguar-warriors-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-chakram-throwers-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-chakram-throwers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-genoese-crossbowmen-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-genoese-crossbowmen-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 200)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-samurai-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-samurai-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 50)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-mamelukes-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-mamelukes-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 400)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )

		#end-if

		#load-if-defined TEUTONIC-CIV

            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-swordsmen-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-swordsmen-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 250)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-spearmen-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-spearmen-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 250)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-eagle-warriors-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-eagle-warriors-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-foot-archers-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-foot-archers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 100)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-cavalry-archers-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-cavalry-archers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 100)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-hand-cannoneers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-hand-cannoneers-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 500)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-heavy-cavalry-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-heavy-cavalry-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-camels-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-camels-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-elephants-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-elephants-count)
            (up-modify-goal g-temp c:min 12)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-monks-count >= 4)
            =>
            (up-modify-goal g-temp g:= g-enemy-monks-count)
            (up-modify-goal g-temp c:min 10)
            (up-modify-goal g-temp c:* -30)
            (up-modify-goal g-temp c:- 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-field-siege-count >= 4)
            =>
            (up-modify-goal g-temp g:= g-enemy-field-siege-count)
            (up-modify-goal g-temp c:min 10)
            (up-modify-goal g-temp c:* -30)
            (up-modify-goal g-temp c:- 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-jaguar-warriors-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-jaguar-warriors-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-cataphracts-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-cataphracts-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 250)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-huskarls-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-huskarls-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 250)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-chakram-throwers-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-chakram-throwers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-genoese-crossbowmen-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-genoese-crossbowmen-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 100)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-samurai-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-samurai-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )

		#end-if

		#load-if-defined TURKISH-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-spearmen-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-spearmen-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (players-unit-type-count any-enemy condottiero >= 5)
            =>
            (set-goal g-temp -400)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-skirmishers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-skirmishers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-hand-cannoneers-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-hand-cannoneers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-heavy-cavalry-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-heavy-cavalry-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-camels-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-camels-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-monks-count >= 4)
            =>
            (up-modify-goal g-temp g:= g-enemy-monks-count)
            (up-modify-goal g-temp c:min 10)
            (up-modify-goal g-temp c:* 30)
            (up-modify-goal g-temp c:+ 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-jaguar-warriors-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-jaguar-warriors-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-huskarls-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-huskarls-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-chakram-throwers-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-chakram-throwers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-samurai-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-samurai-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-mamelukes-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-mamelukes-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-teutonic-knights-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-teutonic-knights-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )

		#end-if

		#load-if-defined VIETNAMESE-CIV
        
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-spearmen-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-spearmen-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-eagle-warriors-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-eagle-warriors-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-foot-archers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-foot-archers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-skirmishers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-skirmishers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-cavalry-archers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-cavalry-archers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-hand-cannoneers-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-hand-cannoneers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-light-cavalry-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-light-cavalry-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-heavy-cavalry-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-heavy-cavalry-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-camels-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-camels-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-monks-count >= 4)
            =>
            (up-modify-goal g-temp g:= g-enemy-monks-count)
            (up-modify-goal g-temp c:min 10)
            (up-modify-goal g-temp c:* 30)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-field-siege-count >= 4)
            =>
            (up-modify-goal g-temp g:= g-enemy-field-siege-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -30)
            (up-modify-goal g-temp c:- 250)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-jaguar-warriors-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-jaguar-warriors-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-huskarls-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-huskarls-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 250)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-chakram-throwers-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-chakram-throwers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-genoese-crossbowmen-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-genoese-crossbowmen-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-samurai-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-samurai-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-mamelukes-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-mamelukes-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-teutonic-knights-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-teutonic-knights-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )

		#end-if

		#load-if-defined VIKING-CIV

            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-spearmen-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-spearmen-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-eagle-warriors-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-eagle-warriors-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (goal g-primary-unit spearman)
            =>
            (up-modify-goal g-current-unit-score c:+ 100)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-skirmishers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-skirmishers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp2 c:= 30)                     ;if enemy has more than 30, decrease countering preference
            (up-modify-goal g-temp2 g:- g-enemy-skirmishers-count)  
            (up-modify-goal g-temp2 c:min 0)
            (up-modify-goal g-temp2 c:/ 2)
            (up-modify-goal g-temp g:+ g-temp2)
            (up-modify-goal g-temp c:* 20)
            (up-modify-goal g-temp c:+ 100)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-cavalry-archers-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-cavalry-archers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-hand-cannoneers-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-hand-cannoneers-count)
            (up-modify-goal g-temp c:min 30)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 300)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-elephants-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-elephants-count)
            (up-modify-goal g-temp c:min 12)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-monks-count >= 4)
            =>
            (up-modify-goal g-temp g:= g-enemy-monks-count)
            (up-modify-goal g-temp c:min 10)
            (up-modify-goal g-temp c:* -25)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-field-siege-count >= 4)
            =>
            (up-modify-goal g-temp g:= g-enemy-field-siege-count)
            (up-modify-goal g-temp c:min 10)
            (up-modify-goal g-temp c:* -25)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-jaguar-warriors-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-jaguar-warriors-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 250)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-cataphracts-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-cataphracts-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 350)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-huskarls-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-huskarls-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* 15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-chakram-throwers-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-chakram-throwers-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-samurai-count >= 5)
            =>
            (up-modify-goal g-temp g:= g-enemy-samurai-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 350)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-mamelukes-count >= 7)
            =>
            (up-modify-goal g-temp g:= g-enemy-mamelukes-count)
            (up-modify-goal g-temp c:min 20)
            (up-modify-goal g-temp c:* -15)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )
            (defrule
            (goal g-current-unit-type SUPPORT-UNIQUE-UNIT)
            (up-compare-goal g-enemy-teutonic-knights-count >= 6)
            =>
            (up-modify-goal g-temp g:= g-enemy-teutonic-knights-count)
            (up-modify-goal g-temp c:min 15)
            (up-modify-goal g-temp c:* -20)
            (up-modify-goal g-temp c:- 150)
            (up-modify-goal g-temp s:%* csn-countering-preference)
            (up-modify-goal g-current-unit-score g:+ g-temp)
            )

		#end-if

;---------------------------------
;   Calculate Best Counter Unit
;---------------------------------

    (defrule
    (up-compare-goal g-desired-num-military > 0)
    (up-compare-goal g-age-status >= MID-CASTLE)
    (up-compare-goal g-primary-unit > 0)
    =>
    (up-log-data 0 "Support Unit Score: %d" g: g-current-unit-score)
    )

    (defrule
    (taunt-detected TAUNT-PLAYER 240)
    (up-compare-goal g-desired-num-military > 0)
    (up-compare-goal g-age-status >= MID-CASTLE)
    (up-compare-goal g-primary-unit > 0)
    =>
    (up-chat-data-to-player my-player-number "Support Unit Type: %d" g: g-current-unit-type)
    (up-chat-data-to-player my-player-number "Support Unit Score: %d" g: g-current-unit-score)
    )

    (defrule
    (up-compare-goal g-desired-num-military > 0)
    (up-compare-goal g-age-status >= MID-CASTLE)
    (up-compare-goal g-primary-unit > 0)
    (up-compare-goal g-current-unit-score g:> g-best-unit-score)
    =>
    (up-modify-goal g-best-unit-score g:= g-current-unit-score)
    (up-modify-goal g-best-unit-type g:= g-current-unit-type)
    )

    (defrule
    (up-compare-goal g-army-comp-start-rule-id > 0)
    (up-compare-goal g-desired-num-military > 0)
    (up-compare-goal g-age-status >= MID-CASTLE)
    (up-compare-goal g-primary-unit > 0)
    (up-modify-goal g-current-unit-type c:+ 1)
    (up-compare-goal g-current-unit-type <= SUPPORT-UNIQUE-UNIT)
    =>
    (set-goal g-current-unit-score 0)
    (set-goal g-current-unit-attack-type NONE)
    (set-goal g-current-unit-armor-type NONE)
    (up-jump-direct g: g-army-comp-start-rule-id)
    )

    (defrule
    (goal g-best-unit-type SUPPORT-MILITIA)
    (up-compare-goal g-support-unit != militiaman)
    =>
    (set-goal g-support-unit militiaman)
    )
    (defrule
    (goal g-best-unit-type SUPPORT-SPEARMAN)
    (up-compare-goal g-support-unit != spearman)
    =>
    (set-goal g-support-unit spearman)
    )
    (defrule
    (goal g-best-unit-type SUPPORT-EAGLE-WARRIOR)
    (up-compare-goal g-support-unit != eagle-warrior)
    =>
    (set-goal g-support-unit eagle-warrior)
    )
    (defrule
    (goal g-best-unit-type SUPPORT-CONDOTTIERO)
    (up-compare-goal g-support-unit != condottiero)
    =>
    (set-goal g-support-unit condottiero)
    )
    (defrule
    (goal g-best-unit-type SUPPORT-ARCHER)
    (up-compare-goal g-support-unit != archer)
    =>
    (set-goal g-support-unit archer)
    )
    (defrule
    (goal g-best-unit-type SUPPORT-SKIRMISHER)
    (up-compare-goal g-support-unit != skirmisher)
    =>
    (set-goal g-support-unit skirmisher)
    )
    (defrule
    (goal g-best-unit-type SUPPORT-CAVALRY-ARCHER)
    (up-compare-goal g-support-unit != cavalry-archer)
    =>
    (set-goal g-support-unit cavalry-archer)
    )
    (defrule
    (goal g-best-unit-type SUPPORT-ELEPHANT-ARCHER)
    (up-compare-goal g-support-unit != elephant-archer)
    =>
    (set-goal g-support-unit elephant-archer)
    )
    (defrule
    (goal g-best-unit-type SUPPORT-SLINGER)
    (up-compare-goal g-support-unit != slinger)
    =>
    (set-goal g-support-unit slinger)
    )
    (defrule
    (goal g-best-unit-type SUPPORT-GENITOUR)
    (up-compare-goal g-support-unit != genitour)
    =>
    (set-goal g-support-unit genitour)
    )
    (defrule
    (goal g-best-unit-type SUPPORT-HAND-CANNONEER)
    (up-compare-goal g-support-unit != hand-cannoneer)
    =>
    (set-goal g-support-unit hand-cannoneer)
    )
    (defrule
    (goal g-best-unit-type SUPPORT-SCOUT-CAVALRY)
    (up-compare-goal g-support-unit != scout-cavalry)
    =>
    (set-goal g-support-unit scout-cavalry)
    )
    (defrule
    (goal g-best-unit-type SUPPORT-KNIGHT)
    (up-compare-goal g-support-unit != knight)
    =>
    (set-goal g-support-unit knight)
    )
    (defrule
    (goal g-best-unit-type SUPPORT-CAMEL)
    (up-compare-goal g-support-unit != camel)
    =>
    (set-goal g-support-unit camel)
    )
    (defrule
    (goal g-best-unit-type SUPPORT-BATTLE-ELEPHANT)
    (up-compare-goal g-support-unit != battle-elephant)
    =>
    (set-goal g-support-unit battle-elephant)
    )
    (defrule
    (goal g-best-unit-type SUPPORT-STEPPE-LANCER)
    (up-compare-goal g-support-unit != steppe-lancer)
    =>
    (set-goal g-support-unit steppe-lancer)
    )
    (defrule
    (goal g-best-unit-type SUPPORT-SHRIVAMSHA-RIDER)
    (up-compare-goal g-support-unit != shrivamsha-rider)
    =>
    (set-goal g-support-unit shrivamsha-rider)
    )
    (defrule
    (goal g-best-unit-type SUPPORT-UNIQUE-UNIT)
    (up-compare-goal g-support-unit != my-unique-unit)
    =>
    (set-goal g-support-unit my-unique-unit)
    )

    (defrule
    (true)
    =>
    (up-get-rule-id g-army-comp-end-rule-id)
    (disable-self)
    )

    (defrule
    (taunt-detected TAUNT-PLAYER 240)
    =>
    (acknowledge-taunt THIS-ANY-TAUNT-PLAYER 240)
    )